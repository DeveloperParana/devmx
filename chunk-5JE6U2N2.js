import{i as D,m as R,n as k,o as j,p as C,q as S,u as I,v as g,x as s}from"./chunk-MXPAX6UE.js";import{L as n,_ as q,a as y,b as A}from"./chunk-3DLDMRAG.js";var a=class{};var o=class extends j{};var c=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.createUser(e)}};var u=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.delete(e)}};var p=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.findOne(e)}};var d=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.find(e)}};var l=class{authenticationService;constructor(e){this.authenticationService=e}execute(){return this.authenticationService.load()}};var h=class{authenticationService;constructor(e){this.authenticationService=e}execute({name:e}){return this.authenticationService.sendUserCode(e)}};var U=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updatePassword(e)}};var x=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updateProfile(e)}};var f=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updateRoles(e)}};var v=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updateSocial(e)}};var m=class{authenticationService;constructor(e){this.authenticationService=e}execute(e){return this.authenticationService.validateUserCode(e).pipe(q(({accessToken:t})=>(localStorage.setItem("accessToken",t),this.authenticationService.load())))}};var B=D({auth:null,loading:!1,message:null,sended:!1}),$=class extends R{createUserUseCase;sendUserCodeUseCase;validateUserCodeUseCase;loadAuthenticationUseCase;auth$=this.select(e=>e.auth);message$=this.select(e=>e.message);loading$=this.select(e=>e.loading);connected$=this.select(()=>!!this.accessToken);get accessToken(){return localStorage.getItem("accessToken")}constructor(e,t,i,P){super(B),this.createUserUseCase=e,this.sendUserCodeUseCase=t,this.validateUserCodeUseCase=i,this.loadAuthenticationUseCase=P}load(){this.loadAuthenticationUseCase.execute().pipe(n(1)).subscribe(t=>this.setState({auth:t}))}sendUserCode(e){this.setState({loading:!0}),this.sendUserCodeUseCase.execute(e).pipe(n(1)).subscribe(({message:i})=>{this.setState({sended:!0,loading:!1,message:i})})}validateUserCode(e){this.setState({loading:!0}),this.validateUserCodeUseCase.execute(e).pipe(n(1)).subscribe(()=>this.setState({loading:!1}))}createUser(e){this.setState({loading:!0}),this.createUserUseCase.execute(e).pipe(n(1)).subscribe()}signOut(){this.setState(B),localStorage.removeItem("accessToken")}};function H(){return g($,[c,h,m,l])}var b=class extends I{findUsersUseCase;findUserByIDUseCase;updateProfileUseCase;updatePasswordUseCase;updateSocialUseCase;updateRolesUseCase;deleteUserUseCase;profile$=this.select(e=>{if(e.selected){let{profile:t,id:i}=e.selected;return A(y({},t),{id:i})}return null});social$=this.select(e=>{if(e.selected){let{social:t,id:i}=e.selected;return{social:t,id:i}}return null});constructor(e,t,i,P,M,G,J){super({response:{data:[],items:0,pages:0},params:{page:0,size:10,filter:{name:""}},selected:null}),this.findUsersUseCase=e,this.findUserByIDUseCase=t,this.updateProfileUseCase=i,this.updatePasswordUseCase=P,this.updateSocialUseCase=M,this.updateRolesUseCase=G,this.deleteUserUseCase=J}load(){this.onLoad(this.findUsersUseCase.execute(this.state.params))}loadOne(e){this.onLoadOne(this.findUserByIDUseCase.execute(e))}updateProfile(e){this.updateProfileUseCase.execute(e).pipe(n(1)).subscribe()}updatePassword(e){this.onUpdate(this.updatePasswordUseCase.execute(e))}updateSocial(e){this.updateSocialUseCase.execute(e).pipe(n(1)).subscribe()}updateRoles(e){this.onUpdate(this.updateRolesUseCase.execute(e))}delete(e){this.onDelete(this.deleteUserUseCase.execute(e))}};function T(){return g(b,[d,p,x,U,v,f,u])}function E(){return[H(),T()]}var w=class{http;env;endpoint;get url(){return`${this.env.api.url}/${this.endpoint}`}constructor(e,t,i){this.http=e,this.env=t,this.endpoint=i}load(){return this.http.get(this.url)}createUser(e){let t=[this.url,"create-user"];return this.http.post(t.join("/"),e)}sendUserCode(e){return this.http.post(this.url,{name:e})}validateUserCode(e){let t=[this.url,"validate"];return this.http.post(t.join("/"),e)}};function L(){return{provide:a,useFactory(r,e){return new w(r,e,"authentication")},deps:[S,C]}}var F=class extends k{updatePassword(e){let t=[this.url,e.id,"password"];return this.http.patch(t.join("/"),e)}updateProfile(e){let t=[this.url,e.id,"profile"];return this.http.patch(t.join("/"),e)}updateSocial(e){let t=[this.url,e.id,"social"];return this.http.patch(t.join("/"),e)}updateRoles(e){let t=[this.url,e.id,"roles"];return this.http.patch(t.join("/"),e)}};function O(){return{provide:o,useFactory(r,e){return new F(r,e,"users")},deps:[S,C]}}function z(){return[L(),O()]}function K(){return s(c,[a])}function N(){return s(u,[o])}function Q(){return s(p,[o])}function W(){return s(d,[o])}function X(){return s(l,[a])}function Y(){return s(h,[a])}function Z(){return s(U,[o])}function _(){return s(x,[o])}function ee(){return s(v,[o])}function te(){return s(f,[o])}function re(){return s(m,[a])}function V(){return[K(),N(),Q(),W(),X(),Y(),Z(),_(),ee(),te(),re()]}function St(){return[...z(),...V(),...E()]}export{$ as a,b,St as c};
