import{a as s}from"./chunk-XIUDFJWJ.js";import{A as T,a as F,b as M,c as $,d as U,i as g,j as A,n as b,t as q,u as O}from"./chunk-4FWBEGAE.js";import{F as c,L as p,O as a,a as B,b as D,ba as E,t as y}from"./chunk-TEKHUYWQ.js";var o=class extends F{};var v=class{eventService;constructor(e){this.eventService=e}execute({id:e,title:r}){return this.eventService.copy(e,{id:e,title:r})}};function w(){return s(v,[o])}var m=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.create(e)}};function j(){return s(m,[o])}var d=class{eventService;constructor(e){this.eventService=e}execute({event:e,status:r}){return this.eventService.createRSVP(e,r)}};function k(){return s(d,[o])}var u=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.delete(e)}};function H(){return s(u,[o])}var f=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findAll(e)}};function W(){return s(f,[o])}var x=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findOne(e)}};function Y(){return s(x,[o])}var l=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.find(e)}};function L(){return s(l,[o])}var h=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findRSVPByEvent(e)}};function Q(){return s(h,[o])}var C=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findRSVPConfirmedByEvent(e)}};function z(){return s(C,[o])}var S=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.update(e.id,e)}};function _(){return s(S,[o])}var P=class extends O{findAll(e){let r=[`${this.url}/all`,b(e)];return this.http.get(r.join("?"))}copy(e,r){let n=[this.url,e,"copy"];return this.http.patch(n.join("/"),r)}createRSVP(e,r){let n=[this.url,e,"rsvps"];return this.http.post(n.join("/"),{status:r})}findRSVPByEvent(e){let r=[this.url,e,"rsvps"];return this.http.get(r.join("/"))}findRSVPConfirmedByEvent(e){let r=[this.url,e,"rsvps","confirmed"];return this.http.get(r.join("/"))}};function G(){return{provide:o,useFactory(t,e){return new P(t,e,"events")},deps:[$,M]}}var ve=Math.pow(10,8)*24*60*60*1e3,ht=-ve;var J=6e4;var me=3600;var K=me*24,Ct=K*7,de=K*365.2425,ue=de/12,St=ue*3,R=Symbol.for("constructDateFrom");function N(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&R in t?t[R](e):t instanceof Date?new t.constructor(e):new Date(e)}function X(t,e){return N(e||t,t)}function Z(t,e,r){let n=X(t,r?.in);return n.setTime(n.getTime()+e*J),n}function ee(t){let e=new Date(t.date??""),r=g(t.duration??"2h"),n=Z(e,r);return D(B({},t),{start:e,end:n})}var te=t=>{switch(t){case"in-person":return"OfflineEventAttendanceMode";case"online":return"OnlineEventAttendanceMode";case"mixed":default:return"MixedEventAttendanceMode"}};function re(t){return{"@context":"https://schema.org","@type":"Event",name:t.title,description:A(t.description??""),startDate:`${t.start}`,endDate:`${t.end}`,eventAttendanceMode:te(t.format),eventSchedule:[{"@type":"Schedule"}]}}var I=class extends T{createEventUseCase;findEventsUseCase;findAllEventsUseCase;findEventByIDUseCase;updateEventUseCase;copyEventUseCase;deleteEventUseCase;page$=this.select(e=>e.selected).pipe(c(e=>!!e),y(e=>ee(e)));schema$=this.page$.pipe(y(e=>re(e)));constructor(e,r,n,i,ce,pe,ae){super({response:{data:[],items:0,pages:0},params:{page:0,size:10,filter:{title:"",format:""},sort:{date:"asc"}},selected:null}),this.createEventUseCase=e,this.findEventsUseCase=r,this.findAllEventsUseCase=n,this.findEventByIDUseCase=i,this.updateEventUseCase=ce,this.copyEventUseCase=pe,this.deleteEventUseCase=ae}load(){this.onLoad(this.findEventsUseCase.execute(this.state.params))}loadAll(){this.onLoad(this.findAllEventsUseCase.execute(this.state.params))}loadOne(e){this.onLoadOne(this.findEventByIDUseCase.execute(e))}create(e){let r=this.createEventUseCase.execute(e),n=i=>this.setState({selected:i});return r.pipe(p(1),E(n))}copy(e){let r=this.copyEventUseCase.execute(e),n=i=>this.setState({selected:i});return r.pipe(p(1),E(n))}update(e){let r=this.updateEventUseCase.execute(e),n=i=>this.setState({selected:i});return r.pipe(p(1),E(n))}delete(e){this.onDelete(this.deleteEventUseCase.execute(e))}};function oe(){return U(I,[m,l,f,x,S,v,u])}var V=class extends q{createRSVPUseCase;findRSVPByEventUseCase;findRSVPConfirmedByEventUseCase;response$=this.select(e=>e.response);constructor(e,r,n){super({response:[]}),this.createRSVPUseCase=e,this.findRSVPByEventUseCase=r,this.findRSVPConfirmedByEventUseCase=n}load(e){let r=this.findRSVPByEventUseCase.execute(e),n=i=>{this.setState({response:i})};r.pipe(p(1)).subscribe(n)}loadConfirmed(e){let r=this.findRSVPConfirmedByEventUseCase.execute(e),n=i=>{this.setState({response:i})};r.pipe(p(1)).subscribe(n)}create(e){this.createRSVPUseCase.execute(e).pipe(p(1)).subscribe(()=>this.loadConfirmed(e.event))}};function ne(){return U(V,[d,h,C])}function se(){return[G(),j(),L(),W(),Y(),_(),H(),w(),oe()]}function ie(){return[k(),Q(),z(),ne()]}function ar(){return[...se(),...ie()]}var dr=(t,e)=>(t.loadOne(e.id),t.page$.pipe(a(),c(r=>!!r)));var xr=(t,e)=>(t.loadOne(e.id),t.selected$.pipe(a(),c(r=>!!r)));var Cr=(t,e)=>(t.loadOne(e.id),t.schema$.pipe(a(),c(r=>!!r)));export{N as a,X as b,I as c,V as d,ar as e,dr as f,xr as g,Cr as h};
