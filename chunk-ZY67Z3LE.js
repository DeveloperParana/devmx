import{a as D,b as $,c as y,d as P,f as s,h as I,n as H}from"./chunk-MTMSRDZL.js";import{i as j,m as k}from"./chunk-WJBOH2N4.js";import{F as c,L as n,O as g,_ as q,a as N,b as O,t as R}from"./chunk-TEKHUYWQ.js";var a=class{};var o=class extends D{};var p=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.createUser(e)}};var u=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.delete(e)}};var d=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.findOne(e)}};var l=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.findOneByName(e)}};var h=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.find(e)}};var U=class{authenticationService;constructor(e){this.authenticationService=e}execute(){return this.authenticationService.load()}};var m=class{authenticationService;constructor(e){this.authenticationService=e}execute({name:e}){return this.authenticationService.sendUserCode(e)}};var f=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updatePassword(e)}};var x=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updateProfile(e)}};var v=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updateRoles(e)}};var C=class{userService;constructor(e){this.userService=e}execute(e){return this.userService.updateSocial(e)}};var S=class{authenticationService;constructor(e){this.authenticationService=e}execute(e){return this.authenticationService.validateUserCode(e).pipe(q(({accessToken:t})=>(localStorage.setItem("accessToken",t),this.authenticationService.load())))}};var L=j({auth:null,loading:!1,message:null,sended:!1}),B=class extends k{createUserUseCase;sendUserCodeUseCase;validateUserCodeUseCase;loadAuthenticationUseCase;auth$=this.select(e=>e.auth);message$=this.select(e=>e.message);loading$=this.select(e=>e.loading);connected$=this.select(()=>!!this.accessToken);get accessToken(){return localStorage.getItem("accessToken")}constructor(e,t,i,b){super(L),this.createUserUseCase=e,this.sendUserCodeUseCase=t,this.validateUserCodeUseCase=i,this.loadAuthenticationUseCase=b}load(){this.loadAuthenticationUseCase.execute().pipe(n(1)).subscribe(t=>this.setState({auth:t}))}sendUserCode(e){this.setState({loading:!0}),this.sendUserCodeUseCase.execute(e).pipe(n(1)).subscribe(({message:i})=>{this.setState({sended:!0,loading:!1,message:i})})}validateUserCode(e){this.setState({loading:!0}),this.validateUserCodeUseCase.execute(e).pipe(n(1)).subscribe(()=>this.setState({loading:!1}))}createUser(e){this.setState({loading:!0}),this.createUserUseCase.execute(e).pipe(n(1)).subscribe()}signOut(){this.setState(L),localStorage.removeItem("accessToken")}};function T(){return P(B,[p,m,S,U])}function E(r){return{"@context":"https://schema.org","@type":"Person",name:r.displayName,email:`mailto:${r.contact.email}`,url:`https://devparana.mx/sobre/${r.name}`}}var F=class extends H{findUsersUseCase;findUserByIDUseCase;updateProfileUseCase;updatePasswordUseCase;updateSocialUseCase;updateRolesUseCase;deleteUserUseCase;findUserByNameUseCase;profile$=this.select(e=>{if(e.selected){let{profile:t,id:i}=e.selected;return O(N({},t),{id:i})}return null});social$=this.select(e=>{if(e.selected){let{social:t,id:i}=e.selected;return{social:t,id:i}}return null});schema$=this.selected$.pipe(c(e=>!!e),R(e=>E(e)));constructor(e,t,i,b,K,Q,X,Y){super({response:{data:[],items:0,pages:0},params:{page:0,size:10,filter:{name:""}},selected:null}),this.findUsersUseCase=e,this.findUserByIDUseCase=t,this.updateProfileUseCase=i,this.updatePasswordUseCase=b,this.updateSocialUseCase=K,this.updateRolesUseCase=Q,this.deleteUserUseCase=X,this.findUserByNameUseCase=Y}load(){this.onLoad(this.findUsersUseCase.execute(this.state.params))}loadOne(e){this.onLoadOne(this.findUserByIDUseCase.execute(e))}loadOneByName(e){this.onLoadOne(this.findUserByNameUseCase.execute(e))}updateProfile(e){this.updateProfileUseCase.execute(e).pipe(n(1)).subscribe()}updatePassword(e){this.onUpdate(this.updatePasswordUseCase.execute(e))}updateSocial(e){this.updateSocialUseCase.execute(e).pipe(n(1)).subscribe()}updateRoles(e){this.onUpdate(this.updateRolesUseCase.execute(e))}delete(e){this.onDelete(this.deleteUserUseCase.execute(e))}};function z(){return P(F,[h,d,x,f,C,v,u,l])}function V(){return[T(),z()]}var w=class{http;env;endpoint;get url(){return`${this.env.api.url}/${this.endpoint}`}constructor(e,t,i){this.http=e,this.env=t,this.endpoint=i}load(){return this.http.get(this.url)}createUser(e){let t=[this.url,"create-user"];return this.http.post(t.join("/"),e)}sendUserCode(e){return this.http.post(this.url,{name:e})}validateUserCode(e){let t=[this.url,"validate"];return this.http.post(t.join("/"),e)}};function W(){return{provide:a,useFactory(r,e){return new w(r,e,"authentication")},deps:[y,$]}}var A=class extends I{findOneByName(e){let t=[this.url,"about",e];return this.http.get(t.join("/"))}updatePassword(e){let t=[this.url,e.id,"password"];return this.http.patch(t.join("/"),e)}updateProfile(e){let t=[this.url,e.id,"profile"];return this.http.patch(t.join("/"),e)}updateSocial(e){let t=[this.url,e.id,"social"];return this.http.patch(t.join("/"),e)}updateRoles(e){let t=[this.url,e.id,"roles"];return this.http.patch(t.join("/"),e)}};function M(){return{provide:o,useFactory(r,e){return new A(r,e,"users")},deps:[y,$]}}function G(){return[W(),M()]}function Z(){return s(p,[a])}function _(){return s(u,[o])}function ee(){return s(d,[o])}function te(){return s(l,[o])}function re(){return s(h,[o])}function se(){return s(U,[a])}function oe(){return s(m,[a])}function ie(){return s(f,[o])}function ae(){return s(x,[o])}function ne(){return s(C,[o])}function ce(){return s(v,[o])}function pe(){return s(S,[a])}function J(){return[Z(),_(),ee(),te(),re(),se(),oe(),ie(),ae(),ne(),ce(),pe()]}function qt(){return[...G(),...J(),...V()]}var kt=(r,e)=>(r.loadOneByName(e.name),r.selected$.pipe(g(),c(t=>!!t)));var Lt=(r,e)=>(r.loadOneByName(e.name),r.schema$.pipe(g(),c(t=>!!t)));export{B as a,F as b,qt as c,kt as d,Lt as e};
