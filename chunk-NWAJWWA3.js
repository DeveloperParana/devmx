import{a as n}from"./chunk-XIUDFJWJ.js";import{A as w,a as g,b as A,c as b,d as P,i as j,j as q,n as R,t as O,u as T}from"./chunk-4FWBEGAE.js";import{F as c,L as p,O as a,a as D,b as $,ba as y,t as I}from"./chunk-TEKHUYWQ.js";var o=class extends g{};var v=class{eventService;constructor(e){this.eventService=e}execute({id:e,title:r}){return this.eventService.copy(e,{id:e,title:r})}};function k(){return n(v,[o])}var d=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.create(e)}};function H(){return n(d,[o])}var m=class{eventService;constructor(e){this.eventService=e}execute({event:e,status:r}){return this.eventService.createRSVP(e,r)}};function W(){return n(m,[o])}var u=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.delete(e)}};function Y(){return n(u,[o])}var f=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findAll(e)}};function L(){return n(f,[o])}var x=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findOne(e)}};function Q(){return n(x,[o])}var l=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findUntil(e)}};function z(){return n(l,[o])}var h=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.find(e)}};function _(){return n(h,[o])}var E=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findMyEvents(e)}};function G(){return n(E,[o])}var C=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findRSVPByEvent(e)}};function J(){return n(C,[o])}var S=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findRSVPConfirmedByEvent(e)}};function K(){return n(S,[o])}var U=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.update(e.id,e)}};function N(){return n(U,[o])}var M=class extends T{findAll(e){let r=[`${this.url}/all`,R(e)];return this.http.get(r.join("?"))}findUntil(e){let r=[`${this.url}/until`,R(e)];return this.http.get(r.join("?"))}findMyEvents(e){let r=[`${this.url}/my`,R(e)];return this.http.get(r.join("?"))}copy(e,r){let s=[this.url,e,"copy"];return this.http.patch(s.join("/"),r)}createRSVP(e,r){let s=[this.url,e,"rsvps"];return this.http.post(s.join("/"),{status:r})}findRSVPByEvent(e){let r=[this.url,e,"rsvps"];return this.http.get(r.join("/"))}findRSVPConfirmedByEvent(e){let r=[this.url,e,"rsvps","confirmed"];return this.http.get(r.join("/"))}};function X(){return{provide:o,useFactory(t,e){return new M(t,e,"events")},deps:[b,A]}}var le=Math.pow(10,8)*24*60*60*1e3,$t=-le;var Z=6e4;var he=3600;var ee=he*24,gt=ee*7,Ee=ee*365.2425,Ce=Ee/12,At=Ce*3,V=Symbol.for("constructDateFrom");function te(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&V in t?t[V](e):t instanceof Date?new t.constructor(e):new Date(e)}function re(t,e){return te(e||t,t)}function oe(t,e,r){let s=re(t,r?.in);return s.setTime(s.getTime()+e*Z),s}function ne(t){let e=new Date(t.date??""),r=j(t.duration??"2h"),s=oe(e,r);return $(D({},t),{start:e,end:s})}var se=t=>{switch(t){case"in-person":return"OfflineEventAttendanceMode";case"online":return"OnlineEventAttendanceMode";case"mixed":default:return"MixedEventAttendanceMode"}};function ie(t){return{"@context":"https://schema.org","@type":"Event",name:t.title,description:q(t.description??""),startDate:`${t.start}`,endDate:`${t.end}`,eventAttendanceMode:se(t.format),eventSchedule:[{"@type":"Schedule"}]}}var F=class extends w{createEventUseCase;findEventsUseCase;findMyEventsUseCase;findAllEventsUseCase;findEventsUntilUseCase;findEventByIDUseCase;updateEventUseCase;copyEventUseCase;deleteEventUseCase;page$=this.select(e=>e.selected).pipe(c(e=>!!e),I(e=>ne(e)));schema$=this.page$.pipe(I(e=>ie(e)));constructor(e,r,s,i,de,me,ue,fe,xe){super({response:{data:[],items:0,pages:0},params:{page:0,size:10,filter:{title:"",format:""},sort:{date:"asc"}},selected:null}),this.createEventUseCase=e,this.findEventsUseCase=r,this.findMyEventsUseCase=s,this.findAllEventsUseCase=i,this.findEventsUntilUseCase=de,this.findEventByIDUseCase=me,this.updateEventUseCase=ue,this.copyEventUseCase=fe,this.deleteEventUseCase=xe}load(){this.onLoad(this.findEventsUseCase.execute(this.state.params))}loadAll(){this.onLoad(this.findAllEventsUseCase.execute(this.state.params))}loadUntil(){this.onLoad(this.findEventsUntilUseCase.execute(this.state.params))}loadMyEvents(){this.onLoad(this.findMyEventsUseCase.execute(this.state.params))}loadOne(e){this.onLoadOne(this.findEventByIDUseCase.execute(e))}create(e){let r=this.createEventUseCase.execute(e),s=i=>this.setState({selected:i});return r.pipe(p(1),y(s))}copy(e){let r=this.copyEventUseCase.execute(e),s=i=>this.setState({selected:i});return r.pipe(p(1),y(s))}update(e){let r=this.updateEventUseCase.execute(e),s=i=>this.setState({selected:i});return r.pipe(p(1),y(s))}delete(e){this.onDelete(this.deleteEventUseCase.execute(e))}};function ce(){return P(F,[d,h,E,f,l,x,U,v,u])}var B=class extends O{createRSVPUseCase;findRSVPByEventUseCase;findRSVPConfirmedByEventUseCase;response$=this.select(e=>e.response);constructor(e,r,s){super({response:[]}),this.createRSVPUseCase=e,this.findRSVPByEventUseCase=r,this.findRSVPConfirmedByEventUseCase=s}load(e){let r=this.findRSVPByEventUseCase.execute(e),s=i=>{this.setState({response:i})};r.pipe(p(1)).subscribe(s)}loadConfirmed(e){let r=this.findRSVPConfirmedByEventUseCase.execute(e),s=i=>{this.setState({response:i})};r.pipe(p(1)).subscribe(s)}create(e){this.createRSVPUseCase.execute(e).pipe(p(1)).subscribe(()=>this.loadConfirmed(e.event))}};function pe(){return P(B,[m,C,S])}function ae(){return[X(),H(),_(),G(),L(),z(),Q(),N(),Y(),k(),ce()]}function ve(){return[W(),J(),K(),pe()]}function Pr(){return[...ae(),...ve()]}var Mr=(t,e)=>(t.loadOne(e.id),t.page$.pipe(a(),c(r=>!!r)));var Br=(t,e)=>(t.loadOne(e.id),t.selected$.pipe(a(),c(r=>!!r)));var gr=(t,e)=>(t.loadOne(e.id),t.schema$.pipe(a(),c(r=>!!r)));export{te as a,re as b,F as c,B as d,Pr as e,Mr as f,Br as g,gr as h};
