import{a as De}from"./chunk-6STDPPRP.js";import{a as Me}from"./chunk-KAZRQD4G.js";import"./chunk-ZQOXWN4S.js";import{a as W}from"./chunk-AD4TXQD3.js";import{h as We}from"./chunk-JX4IWPKV.js";import"./chunk-XC6WES62.js";import{b as Ee}from"./chunk-RRBYVHNZ.js";import{a as Q}from"./chunk-ZHS65JNW.js";import{c as Se}from"./chunk-VYHC3V3G.js";import"./chunk-3I45H2NO.js";import"./chunk-R66KDUEB.js";import"./chunk-MLNPCJDD.js";import{a as Ae,b as Ve,c as $e,d as Ne}from"./chunk-F2GYQZHU.js";import"./chunk-UOTKRQ63.js";import"./chunk-BJXILAOS.js";import{a as Be}from"./chunk-AC7KYN3P.js";import"./chunk-3SNV2MVI.js";import"./chunk-2IAXMR6M.js";import{c as w,d as Pe,g as Fe}from"./chunk-NWAJWWA3.js";import"./chunk-XIUDFJWJ.js";import{a as z}from"./chunk-TZR6QHL3.js";import"./chunk-5DAHKZ7F.js";import{a as M}from"./chunk-A3N3AUUJ.js";import{C as ge,G as xe,H as ye,I as D}from"./chunk-4FWBEGAE.js";import{b as ze,c as Ue,g as je,h as Ge,i as He,j as qe,k as Qe}from"./chunk-RUSPURVH.js";import"./chunk-HGOTYYGI.js";import"./chunk-2K6IALUF.js";import{g as A,i as V,j as $,p as S}from"./chunk-KXTQ2UTD.js";import"./chunk-I7VYXJU2.js";import{a as de,d as ue,e as ve,f as _e,g as fe,i as Ce,l as he}from"./chunk-PAP2P7QR.js";import{a as we,b as be,c as Oe,d as Te,f as Ie,g as ke,h as Le,i as Re}from"./chunk-EC6LD5KM.js";import{a as N,h as re,i as me,m as se,p as le,s as ce,x as pe}from"./chunk-EDIJ2EBQ.js";import"./chunk-W5KNOAKV.js";import{$b as P,Ba as K,F as T,Fb as ee,Ha as X,Hc as E,Ia as G,Jc as v,Kc as C,Lc as q,Nb as _,Ob as H,Pb as te,Rb as ne,Tb as l,Yb as f,Yd as ie,_b as L,ac as F,ba as J,bc as o,cc as r,dc as s,gb as b,hc as R,je as oe,ka as p,kc as x,lb as a,mc as u,pe as ae,t as j,ta as I,u as Y,ua as k,ub as g,xb as Z,xc as c,yc as y,zc as B}from"./chunk-TEKHUYWQ.js";var Ye=(()=>{class e{router=p(V);destroyRef=p(K);authFacade=p(z);layoutFacade=p(Ee);ngOnInit(){this.authFacade.auth$.pipe(M(this.destroyRef)).subscribe(t=>{t&&(this.layoutFacade.loadNavLinks(t.roles),this.waitingForLogout())}),this.authFacade.load()}waitingForLogout(){this.authFacade.auth$.pipe(M(this.destroyRef)).subscribe(t=>{t===null&&(this.layoutFacade.resetNavLinks(),this.router.navigateByUrl("/conta/autenticacao"))})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-event-feature-shell"]],decls:1,vars:0,template:function(i,n){i&1&&s(0,"devmx-layout")},dependencies:[S,Me],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var Je=e=>Fe(p(w),e.params);var Ke=(()=>{class e{transform(t){switch(t){case"in-person":return"Presencial";case"online":return"Online";case"mixed":return"H\xEDbrido"}}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=Z({name:"eventFormat",type:e,pure:!0})}return e})();var mt=e=>["/","evento",e];function st(e,m){if(e&1&&s(0,"img",7),e&2){let t=u();l("src",t.cover,b)("alt",t.title)}}function lt(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"devmx-icon",16),o(2,"div",9),c(3),r()()),e&2){let t=u();a(3),y(t.address)}}function ct(e,m){if(e&1&&s(0,"devmx-maps-button",18),e&2){let t=u();l("data",t)}}function pt(e,m){if(e&1&&s(0,"devmx-youtube-button",19),e&2){let t=u();l("data",t)}}function dt(e,m){if(e&1&&(o(0,"mat-card-content",12),s(1,"devmx-calendar-button",17),_(2,ct,1,1,"devmx-maps-button",18),v(3,"showEventAddress"),_(4,pt,1,1,"devmx-youtube-button",19),v(5,"showEventLink"),s(6,"devmx-whats-app-button",20),r()),e&2){let t=m;a(),l("data",t),a(),f(C(3,4,t.format)&&t.address?2:-1),a(2),f(C(5,6,t.format)&&t.link?4:-1),a(2),l("data",t)}}function ut(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"devmx-icon",22),o(2,"div",9),c(3),r()()),e&2){let t=m.$implicit;a(3),y(t.title)}}function vt(e,m){if(e&1&&(o(0,"mat-list")(1,"h3",21),c(2,"Apresenta\xE7\xF5es"),r(),P(3,ut,4,1,"mat-list-item",null,L),r()),e&2){let t=u();a(3),F(t.presentations)}}function _t(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"img",23),v(2,"photo"),o(3,"div",9),c(4),r()()),e&2){let t=m.$implicit;a(),l("src",C(2,3,t==null||t.profile==null?null:t.profile.photo),b)("alt",t.displayName),a(3),y(t.displayName)}}function ft(e,m){if(e&1&&(o(0,"mat-list")(1,"h3",21),c(2,"Organizadores"),r(),P(3,_t,5,5,"mat-list-item",null,L),r()),e&2){let t=u();a(3),F(t.leaders)}}function Ct(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"img",23),v(2,"photo"),o(3,"div",9),c(4),r()()),e&2){let t=m.$implicit;a(),l("src",C(2,3,t.user.profile==null?null:t.user.profile.photo),b)("alt",t.user.displayName),a(3),y(t.user.displayName)}}function ht(e,m){if(e&1){let t=R();o(0,"form",24)(1,"devmx-rsvp-button",25),x("statusChange",function(){I(t);let n=u(2);return k(n.onStatusChange())}),r()(),o(2,"mat-list")(3,"h3",21),c(4,"Presen\xE7as"),r(),P(5,Ct,5,5,"mat-list-item",null,L),r()}if(e&2){let t=u(2);l("formGroup",t.rsvpForm),a(5),F(m)}}function gt(e,m){if(e&1&&(o(0,"mat-card",0)(1,"mat-card-header",1)(2,"a",2),s(3,"devmx-icon",3),r(),o(4,"mat-card-title",4),c(5),r(),o(6,"a",5),s(7,"devmx-icon",6),r()(),_(8,st,1,2,"img",7),o(9,"mat-list")(10,"mat-list-item"),s(11,"devmx-icon",8),o(12,"div",9),c(13),v(14,"eventFormat"),r()(),o(15,"mat-list-item"),s(16,"devmx-icon",10),o(17,"div",9),c(18),v(19,"date"),r()(),o(20,"mat-list-item"),s(21,"devmx-icon",11),o(22,"div",9),c(23),v(24,"date"),r()(),_(25,lt,4,1,"mat-list-item"),r(),_(26,dt,7,8,"mat-card-content",12),v(27,"async"),o(28,"mat-card-content"),s(29,"devmx-markdown-view",13),o(30,"a",14),c(31," Ir para p\xE1gina do evento "),r()(),_(32,vt,5,0,"mat-list")(33,ft,5,0,"mat-list")(34,ht,7,1),v(35,"async"),o(36,"mat-card-header"),s(37,"img",15),v(38,"photo"),o(39,"mat-card-title"),c(40),r(),o(41,"mat-card-subtitle"),c(42," Organizador "),r()()()),e&2){let t,i,n=m,d=u();a(5),B(" ",n.title," "),a(3),f(n.cover?8:-1),a(5),y(C(14,15,n.format)),a(5),y(q(19,17,n.date,"shortDate")),a(5),B("",q(24,20,n.date,"shortTime"),"h"),a(2),f(n.address?25:-1),a(),f((t=C(27,23,d.eventFacade.page$))?26:-1,t),a(3),l("content",n.description),a(),l("routerLink",E(29,mt,n.id)),a(2),f(n.presentations.length?32:-1),a(),f(n.leaders.length?33:-1),a(),f((i=C(35,25,d.rsvpFacade.response$))?34:-1,i),a(3),l("src",C(38,27,n.owner.profile==null?null:n.owner.profile.photo),b)("alt",n.owner.displayName),a(3),B(" ",n.owner.displayName," ")}}var Xe=(()=>{class e{route=p(A);rsvpForm=new Qe;authFacade=p(z);eventFacade=p(w);rsvpFacade=p(Pe);event$=this.route.data.pipe(T(t=>"event"in t),j(t=>t.event),J(t=>this.setRSVPEvent(t.id)));constructor(){let t=this.authFacade.auth$.pipe(T(n=>!!n),j(n=>n.id)),i=this.rsvpFacade.response$.pipe(T(n=>n.length>0));Y([t,i]).pipe(M()).subscribe(([n,d])=>{let h=d.find(U=>U.user.id===n);h&&this.setRSVPStatus(h)})}setRSVPEvent=t=>{this.rsvpForm.patchValue({event:t}),this.rsvpFacade.loadConfirmed(t)};setRSVPStatus({status:t}){this.rsvpForm.patchValue({status:t},{emitEvent:!1})}onStatusChange(){this.rsvpForm.valid&&this.rsvpFacade.create(this.rsvpForm.getRawValue())}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-event-details"]],decls:2,vars:3,consts:[[1,"event-card"],[1,"event-card-header","sticky"],["mat-card-avatar","","routerLink","..","mat-icon-button",""],["name","arrow/left"],[1,"event-card-header-title"],["routerLink","..","mat-icon-button",""],["name","close-cross"],["mat-card-image","",3,"src","alt"],["matListItemIcon","","name","transport/flag-pin"],["matListItemTitle",""],["matListItemIcon","","name","calendar"],["matListItemIcon","","name","alarm-clock-alert"],[1,"event-card-buttons"],[3,"content"],["mat-raised-button","",3,"routerLink"],["mat-card-avatar","",3,"src","alt"],["matListItemIcon","","name","transport/map-pin"],["text","Definir lembrete",3,"data"],["text","Ver no mapa",3,"data"],["text","Assistir",3,"data"],["text","Compartilhar",3,"data"],["mat-subheader",""],["matListItemIcon","","name","presentation"],["matListItemAvatar","",3,"src","alt"],[1,"rsvp-button",3,"formGroup"],["formControlName","status",3,"statusChange"]],template:function(i,n){if(i&1&&(_(0,gt,43,31,"mat-card",0),v(1,"async")),i&2){let d;f((d=C(1,1,n.event$))?0:-1,d)}},dependencies:[S,$,pe,se,re,me,le,ce,Ue,Ve,$e,Ae,Ne,Re,we,Le,Oe,Ie,ke,Te,be,he,_e,fe,ue,ve,Ce,de,D,ge,ye,N,Ke,Be,je,Ge,De,oe,ae],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 16px;font-size:1.2em;font-weight:500;opacity:.6}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.2em;word-wrap:break-word}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]   .mat-mdc-card-avatar[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .event-card-buttons[_ngcontent-%COMP%]{gap:1em;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .rsvp-button[_ngcontent-%COMP%]{padding:1em}"],changeDetection:0})}return e})();var Ze=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-event-home"]],decls:0,vars:0,template:function(i,n){},dependencies:[D,We],encapsulation:2,changeDetection:0})}return e})();var et=(()=>{class e{ascText=G("");descText=G("");sortChange=X();current=ee("asc");toggle(){this.current()==="asc"?this.current.set("desc"):this.current.set("asc"),this.sortChange.emit(this.current())}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-sort-direction"]],inputs:{ascText:[1,"ascText"],descText:[1,"descText"]},outputs:{sortChange:"sortChange"},exportAs:["sortDirection"],decls:4,vars:2,consts:[["mat-icon-button","",3,"click","ngClass"],["name","arrow/up"]],template:function(i,n){i&1&&(o(0,"span"),c(1),r(),o(2,"button",0),x("click",function(){return n.toggle()}),s(3,"devmx-icon",1),r()),i&2&&(a(),y(n.current()==="asc"?n.ascText():n.descText()),a(),l("ngClass",n.current()))},dependencies:[D,xe,N,ie],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{transition:transform .6s cubic-bezier(.175,.885,.32,1.275)}[_nghost-%COMP%]   button.asc[_ngcontent-%COMP%]{transform:rotate(-360deg)}[_nghost-%COMP%]   button.desc[_ngcontent-%COMP%]{transform:rotate(540deg)}"]})}return e})();var xt=(e,m)=>m.id,yt=()=>[Se,Q,import("./chunk-QQ3DFMVY.js").then(e=>e.AsyncPipe)],Et=()=>[He,$],Mt=e=>[e],Pt=e=>({right:e}),Ft=e=>({outlets:e}),St=e=>["/","eventos",e];function Dt(e,m){if(e&1&&(o(0,"a",6),s(1,"devmx-event-card",7),r()),e&2){let t=u().$implicit;l("routerLink",E(8,St,E(6,Ft,E(4,Pt,E(2,Mt,t.id))))),a(),l("data",t)}}function wt(e,m){e&1&&s(0,"devmx-skeleton",8),e&2&&l("rows",3)}function bt(e,m){e&1&&(_(0,Dt,2,10)(1,wt,1,1),H(2,0,Et,null,1),ne(0,-1))}function Ot(e,m){if(e&1){let t=R();o(0,"div",3),P(1,bt,4,0,null,null,xt),r(),s(3,"div",4),o(4,"footer")(5,"devmx-paginator",5),x("pageChange",function(n){I(t);let d=u(2);return k(d.onPageChange(n))}),r()()}if(e&2){let t=m;a(),F(t.data),a(4),l("size",10)("items",t.items)}}function Tt(e,m){if(e&1&&(_(0,Ot,6,2),v(1,"async")),e&2){let t,i=u();f((t=C(1,1,i.eventFacade.response$))?0:-1,t)}}function It(e,m){e&1&&(o(0,"div",3),s(1,"devmx-skeleton",8)(2,"devmx-skeleton",8)(3,"devmx-skeleton",8),r()),e&2&&(a(),l("rows",3),a(),l("rows",2),a(),l("rows",3))}var tt=(()=>{class e{router=p(V);route=p(A);eventFacade=p(w);constructor(){this.route.queryParams.pipe(M()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{title:i="",format:n="",date:d="asc",time:h=""}=t,{page:U=0,size:nt=10}=t,it={title:i,format:n},ot={date:d};this.eventFacade.setParams({page:U,size:nt,filter:it,sort:ot}),h==="until"?this.eventFacade.loadUntil():this.eventFacade.load()};onFilterChange(t){let i={format:t};this.router.navigate([],{queryParams:i})}onTimeChange(t){let i={time:t};this.router.navigate([],{queryParams:i})}onSortChange(t){let i={date:t};this.router.navigate([],{queryParams:i})}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-events"]],decls:9,vars:0,consts:[[3,"filterChange"],[3,"timeChange"],[3,"sortChange"],[1,"events-container"],[1,"spacer"],[3,"pageChange","size","items"],[3,"routerLink"],[1,"event-card",3,"data"],[3,"rows"]],template:function(i,n){i&1&&(o(0,"header")(1,"div")(2,"devmx-event-filter",0),x("filterChange",function(h){return n.onFilterChange(h)}),r(),o(3,"devmx-event-time",1),x("timeChange",function(h){return n.onTimeChange(h)}),r()(),o(4,"devmx-sort-direction",2),x("sortChange",function(h){return n.onSortChange(h)}),r()(),_(5,Tt,2,3)(6,It,4,3),H(7,5,yt,null,6),te(500))},dependencies:[qe,ze,et,Q,S],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;padding:.4em .8em}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return e})();var Qn=[{path:"",data:{breadcrumb:"Eventos"},canActivate:[W("member")],component:Ye,children:[{path:"administracao",canActivate:[W("leader","director","manager","staff")],loadChildren:()=>import("./chunk-RN3MKDGP.js").then(e=>e.eventFeatureAdminRoutes)},{path:"",title:"Eventos",component:tt},{path:":id",data:{breadcrumb:e=>e.event.title},title:"Evento",resolve:{event:Je},component:Xe,outlet:"right"},{path:"",component:Ze}]}];export{Ye as EventFeatureShellComponent,Qn as eventFeatureShellRoutes};
