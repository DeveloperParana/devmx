import{a as ie,b as re}from"./chunk-IBLKOITY.js";import{d as oe}from"./chunk-2SAHWZOE.js";import{a as T}from"./chunk-ZR4PYGAM.js";import{a as Z,b as ee,d as te,e as ne}from"./chunk-SOKUPTDF.js";import{b as j,c as Q,d as N,i as q,j as B}from"./chunk-WLWXH53B.js";import{a as K,c as M,g as U,h as H,l as G,o as J,x as W}from"./chunk-57VKPFDS.js";import{Ca as X,Ga as Y}from"./chunk-XMIP7OAF.js";import{Gb as D,Hb as I,Ja as m,Jb as g,Ka as F,Lb as O,Ob as P,Ub as _,Zb as $,cc as a,dc as l,ec as u,ic as z,lc as c,mb as d,nb as x,oc as L,pc as b,tb as A,ua as E,uc as y,va as S,vb as h,vc as V,wc as C,yc as p,zc as k}from"./chunk-FZSJMIDG.js";var se=["textareaRef"],R=(()=>{class r extends M{ngControl;textareaRef=I("textareaRef");get textarea(){let n=this.textareaRef();return n?n.nativeElement:null}autofocus=m(!1);get hasAutofocus(){let n=this.autofocus();return n===!0||n===""}resize=m(!0);label=m("");hint=m("");error=m("");minRows=m(5);maxRows=m(10);get control(){return this.ngControl.control??new G}constructor(n,t,e){super(n,t,!0),this.ngControl=e,this.ngControl.valueAccessor=this}handleKeydown(n){if(n.key==="Enter"&&this.textarea){let{selectionStart:t,value:e}=this.textarea,o=e.lastIndexOf(`
`,t-1)+1,i=e.slice(o,t),s=i.match(/^(\d+)\.\s/);if(s){if(i.match(/^(\d+)\.\s$/))return;n.preventDefault(),this.handleOrderedList(s,e,t)}if(i.match(/^-\s/)){if(i.match(/^-\s$/))return;n.preventDefault(),this.handleUnorderedList(e,t)}}}handleOrderedList(n,t,e){let i=parseInt(n[1],10)+1,s=t.slice(0,e),f=t.slice(e),v=`${s}
${i}. ${f}`;this.control.setValue(v),queueMicrotask(()=>{if(this.textarea){let w=e+`
${i}. `.length;this.textarea.setSelectionRange(w,w)}})}handleUnorderedList(n,t){let e=n.slice(0,t),o=n.slice(t),i=`${e}
- ${o}`;this.control.setValue(i),queueMicrotask(()=>{if(this.textarea){let s=t+3;this.textarea.setSelectionRange(s,s)}})}static \u0275fac=function(t){return new(t||r)(x(A),x(F),x(U,10))};static \u0275cmp=h({type:r,selectors:[["devmx-markdown-editor"]],viewQuery:function(t,e){t&1&&V(e.textareaRef,se,5),t&2&&C()},inputs:{autofocus:[1,"autofocus"],resize:[1,"resize"],label:[1,"label"],hint:[1,"hint"],error:[1,"error"],minRows:[1,"minRows"],maxRows:[1,"maxRows"]},exportAs:["markdownEditor"],features:[O],decls:10,vars:7,consts:[["textareaRef","","autosize","cdkTextareaAutosize"],["matInput","","cdkTextareaAutosize","",3,"keydown","formControl","autofocus","cdkAutosizeMinRows","cdkAutosizeMaxRows"]],template:function(t,e){if(t&1){let o=z();a(0,"mat-form-field")(1,"mat-label"),p(2),l(),a(3,"textarea",1,0),c("keydown",function(s){return E(o),S(e.handleKeydown(s))}),l(),a(6,"mat-hint"),p(7),l(),a(8,"mat-error"),p(9),l()()}t&2&&(d(2),k(e.label()),d(),_("formControl",e.control)("autofocus",e.hasAutofocus)("cdkAutosizeMinRows",e.minRows())("cdkAutosizeMaxRows",e.maxRows()),d(4),k(e.hint()),d(2),k(e.error()))},dependencies:[W,M,H,J,B,q,j,N,Q,ee,Z,ne,te,oe],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return r})();var ce=[[["devmx-markdown-view"]],[["devmx-markdown-editor"]]],me=["devmx-markdown-view","devmx-markdown-editor"];function de(r,ae){r&1&&b(0)}function ue(r,ae){r&1&&b(0,1)}var Qe=(()=>{class r{editor=g(R);view=g(T);preview=D(!1);togglePreview(){this.preview.set(!this.preview())}applyFormat(n,t=n){let e=this.editor();if(!e||!e.textarea)return;let o=e.textarea.selectionStart,i=e.textarea.selectionEnd,s=e.control.value.slice(o,i),f=e.control.value.slice(0,o),v=e.control.value.slice(i),w=`${f}${n}${s}${t}${v}`;e.control.setValue(w),queueMicrotask(()=>{e.textarea&&(e.textarea.setSelectionRange(o+n.length,i+n.length),e.textarea.focus())})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=h({type:r,selectors:[["devmx-markdown-toolbar"]],contentQueries:function(t,e,o){t&1&&(y(o,e.editor,R,5),y(o,e.view,T,5)),t&2&&C(2)},ngContentSelectors:me,decls:18,vars:2,consts:[[3,"change","checked"],["type","button","mat-mini-fab","",3,"click"],["name","text/heading"],["name","text/bold"],["name","text/italic"],["name","software/code"],["name","text/ordered-list"],["name","text/unordered-list"]],template:function(t,e){t&1&&(L(ce),a(0,"div")(1,"mat-checkbox",0),c("change",function(){return e.togglePreview()}),p(2," Visualiza\xE7\xE3o "),l(),a(3,"menu")(4,"button",1),c("click",function(){return e.applyFormat("### ","")}),u(5,"devmx-icon",2),l(),a(6,"button",1),c("click",function(){return e.applyFormat("**")}),u(7,"devmx-icon",3),l(),a(8,"button",1),c("click",function(){return e.applyFormat("_")}),u(9,"devmx-icon",4),l(),a(10,"button",1),c("click",function(){return e.applyFormat("`")}),u(11,"devmx-icon",5),l(),a(12,"button",1),c("click",function(){return e.applyFormat("1. ","")}),u(13,"devmx-icon",6),l(),a(14,"button",1),c("click",function(){return e.applyFormat("- ","")}),u(15,"devmx-icon",7),l()()(),P(16,de,1,0)(17,ue,1,0)),t&2&&(d(),_("checked",e.preview()),d(15),$(e.preview()?16:17))},dependencies:[Y,X,re,ie,K],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{gap:1em;display:flex;margin:.2em 0;flex-direction:row;justify-content:flex-end}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%]{padding:0;display:flex;margin:.2em 0;flex-direction:row}[_nghost-%COMP%]   .mat-mdc-mini-fab[_ngcontent-%COMP%]{background-color:transparent;box-shadow:unset}"],changeDetection:0})}return r})();export{R as a,Qe as b};
