import{a as Fe}from"./chunk-GOVZFZAX.js";import{a as Se}from"./chunk-P6RHV6F4.js";import{c as $,d as Me,g as Ee}from"./chunk-NKK5D6PR.js";import{a as Re,b as Ve,h as Be,i as Ae}from"./chunk-6YHZV7GI.js";import"./chunk-T5N3CWHW.js";import"./chunk-3B6HSN33.js";import{h as Ne}from"./chunk-5H2Z45P4.js";import"./chunk-MWYR6VMH.js";import"./chunk-QTYAOHU5.js";import"./chunk-QZNZNR6Z.js";import{a as ye}from"./chunk-PXZDP5KE.js";import{a as q}from"./chunk-UNKS6JF4.js";import{b as xe}from"./chunk-MQIFBFZZ.js";import"./chunk-CVO6T746.js";import"./chunk-ECQ6XKT3.js";import"./chunk-RM2SUUDH.js";import{a as Q}from"./chunk-6GNLP6OM.js";import{c as Pe}from"./chunk-D4PXVVUY.js";import"./chunk-LICX6DKQ.js";import"./chunk-B2ZHFSGF.js";import{a as M}from"./chunk-TXDFFIFR.js";import{a as z}from"./chunk-5JE6U2N2.js";import{e as V,g as B,h as A,n as F}from"./chunk-RV6LFV4E.js";import{C as ge,D as he,E as S}from"./chunk-MXPAX6UE.js";import"./chunk-K7PNGXRF.js";import"./chunk-I7VYXJU2.js";import{a as pe,d as de,e as ue,f as fe,g as ve,i as _e,l as Ce}from"./chunk-BI6U2PF7.js";import{a as De,b as Oe,c as we,d as Te,f as be,g as Ie,h as ke,i as Le}from"./chunk-JJTHNE76.js";import{a as N,h as ae,i as re,m as me,p as se,s as le,x as ce}from"./chunk-OOV3P5QF.js";import"./chunk-PKBC2DEO.js";import{$b as P,Ca as K,F as T,Fb as Z,Gc as O,Ia as X,Ic as v,Ja as G,Jc as _,Nb as C,Ob as H,Pb as ee,Qb as te,Sb as l,Xb as g,Xd as ne,Zb as k,_b as E,ac as i,ba as J,bc as a,cc as s,gc as L,hb as D,ie,jc as y,ka as p,lb as o,lc as d,oe,t as j,u as W,ua as b,ub as f,va as I,wc as c,xb as Y,xc as h,yc as R}from"./chunk-3DLDMRAG.js";var $e=(()=>{class e{router=p(B);destroyRef=p(K);authFacade=p(z);layoutFacade=p(xe);ngOnInit(){this.authFacade.auth$.pipe(M(this.destroyRef)).subscribe(t=>{t&&(this.layoutFacade.loadNavLinks(t.roles),this.waitingForLogout())}),this.authFacade.load()}waitingForLogout(){this.authFacade.auth$.pipe(M(this.destroyRef)).subscribe(t=>{t===null&&(this.layoutFacade.resetNavLinks(),this.router.navigateByUrl("/conta/autenticacao"))})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=f({type:e,selectors:[["devmx-event-feature-shell"]],decls:1,vars:0,template:function(n,r){n&1&&s(0,"devmx-layout")},dependencies:[F,ye],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var ze=e=>Ee(p($),e.params);var Ue=(()=>{class e{transform(t){switch(t){case"in-person":return"Presencial";case"online":return"Online";case"mixed":return"H\xEDbrido"}}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=Y({name:"eventFormat",type:e,pure:!0})}return e})();function Xe(e,m){if(e&1&&s(0,"img",7),e&2){let t=d();l("src",t.cover,D)("alt",t.title)}}function Ye(e,m){if(e&1&&(i(0,"mat-list-item"),s(1,"devmx-icon",14),i(2,"div",9),c(3),a()()),e&2){let t=d();o(3),h(t.address)}}function Ze(e,m){if(e&1&&(i(0,"mat-list-item"),s(1,"devmx-icon",16),i(2,"div",9),c(3),a()()),e&2){let t=m.$implicit;o(3),h(t.title)}}function et(e,m){if(e&1&&(i(0,"mat-list")(1,"h3",15),c(2,"Apresenta\xE7\xF5es"),a(),E(3,Ze,4,1,"mat-list-item",null,k),a()),e&2){let t=d();o(3),P(t.presentations)}}function tt(e,m){if(e&1&&(i(0,"mat-list-item"),s(1,"img",17),v(2,"photo"),i(3,"div",9),c(4),a()()),e&2){let t=m.$implicit;o(),l("src",_(2,3,t==null||t.profile==null?null:t.profile.photo),D)("alt",t.displayName),o(3),h(t.displayName)}}function nt(e,m){if(e&1&&(i(0,"mat-list")(1,"h3",15),c(2,"Organizadores"),a(),E(3,tt,5,5,"mat-list-item",null,k),a()),e&2){let t=d();o(3),P(t.leaders)}}function it(e,m){if(e&1&&(i(0,"mat-list-item"),s(1,"img",17),v(2,"photo"),i(3,"div",9),c(4),a()()),e&2){let t=m.$implicit;o(),l("src",_(2,3,t.user.profile==null?null:t.user.profile.photo),D)("alt",t.user.displayName),o(3),h(t.user.displayName)}}function ot(e,m){if(e&1){let t=L();i(0,"form",18)(1,"devmx-rsvp-button",19),y("statusChange",function(){b(t);let r=d(2);return I(r.onStatusChange())}),a()(),i(2,"mat-list")(3,"h3",15),c(4,"Presen\xE7as"),a(),E(5,it,5,5,"mat-list-item",null,k),a()}if(e&2){let t=d(2);l("formGroup",t.rsvpForm),o(5),P(m)}}function at(e,m){if(e&1&&(i(0,"mat-card",0)(1,"mat-card-header",1)(2,"a",2),s(3,"devmx-icon",3),a(),i(4,"mat-card-title",4),c(5),a(),i(6,"a",5),s(7,"devmx-icon",6),a()(),C(8,Xe,1,2,"img",7),i(9,"mat-list")(10,"mat-list-item"),s(11,"devmx-icon",8),i(12,"div",9),c(13),v(14,"eventFormat"),a()(),i(15,"mat-list-item"),s(16,"devmx-icon",10),i(17,"div",9),c(18),a()(),i(19,"mat-list-item"),s(20,"devmx-icon",11),i(21,"div",9),c(22),v(23,"date"),a()(),C(24,Ye,4,1,"mat-list-item"),a(),i(25,"mat-card-content"),s(26,"devmx-markdown",12),a(),C(27,et,5,0,"mat-list")(28,nt,5,0,"mat-list")(29,ot,7,1),v(30,"async"),i(31,"mat-card-header"),s(32,"img",13),v(33,"photo"),i(34,"mat-card-title"),c(35),a(),i(36,"mat-card-subtitle"),c(37," Organizador "),a()()()),e&2){let t,n=m,r=d();o(5),R(" ",n.title," "),o(3),g(n.cover?8:-1),o(5),h(_(14,13,n.format)),o(5),R("",n.time,"h"),o(4),h(_(23,15,n.date)),o(2),g(n.address?24:-1),o(2),l("content",n.description),o(),g(n.presentations.length?27:-1),o(),g(n.leaders.length?28:-1),o(),g((t=_(30,17,r.rsvpFacade.response$))?29:-1,t),o(3),l("src",_(33,19,n.owner.profile==null?null:n.owner.profile.photo),D)("alt",n.owner.displayName),o(3),R(" ",n.owner.displayName," ")}}var je=(()=>{class e{route=p(V);rsvpForm=new Ae;authFacade=p(z);rsvpFacade=p(Me);event$=this.route.data.pipe(T(t=>"event"in t),j(t=>t.event),J(t=>this.setRSVPEvent(t.id)));constructor(){let t=this.authFacade.auth$.pipe(T(r=>!!r),j(r=>r.id)),n=this.rsvpFacade.response$.pipe(T(r=>r.length>0));W([t,n]).pipe(M()).subscribe(([r,u])=>{let x=u.find(U=>U.user.id===r);x&&this.setRSVPStatus(x)})}setRSVPEvent=t=>{this.rsvpForm.patchValue({event:t}),this.rsvpFacade.loadConfirmed(t)};setRSVPStatus({status:t}){this.rsvpForm.patchValue({status:t},{emitEvent:!1})}onStatusChange(){this.rsvpForm.valid&&this.rsvpFacade.create(this.rsvpForm.getRawValue())}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=f({type:e,selectors:[["devmx-event-details"]],decls:2,vars:3,consts:[[1,"event-card"],[1,"event-card-header","sticky"],["mat-card-avatar","","routerLink","..","mat-icon-button",""],["name","arrow/left"],[1,"event-card-header-title"],["routerLink","..","mat-icon-button",""],["name","close-cross"],["mat-card-image","",3,"src","alt"],["matListItemIcon","","name","transport/flag-pin"],["matListItemTitle",""],["matListItemIcon","","name","alarm-clock-alert"],["matListItemIcon","","name","calendar"],[3,"content"],["mat-card-avatar","",3,"src","alt"],["matListItemIcon","","name","transport/map-pin"],["mat-subheader",""],["matListItemIcon","","name","presentation"],["matListItemAvatar","",3,"src","alt"],[1,"rsvp-button",3,"formGroup"],["formControlName","status",3,"statusChange"]],template:function(n,r){if(n&1&&(C(0,at,38,21,"mat-card",0),v(1,"async")),n&2){let u;g((u=_(1,1,r.event$))?0:-1,u)}},dependencies:[F,A,ce,me,ae,re,se,le,Ve,Le,De,ke,we,be,Ie,Te,Oe,Ce,fe,ve,de,ue,_e,pe,S,he,N,Ue,Se,Fe,ie,oe],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 16px;font-size:1.2em;font-weight:500;opacity:.6}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.2em;word-wrap:break-word}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]   .mat-mdc-card-avatar[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .rsvp-button[_ngcontent-%COMP%]{padding:1em}"],changeDetection:0})}return e})();var Ge=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=f({type:e,selectors:[["devmx-event-home"]],decls:0,vars:0,template:function(n,r){},dependencies:[S,Ne],encapsulation:2,changeDetection:0})}return e})();var He=(()=>{class e{ascText=G("");descText=G("");change=X();current=Z("asc");toggle(){this.current()==="asc"?this.current.set("desc"):this.current.set("asc"),this.change.emit(this.current())}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=f({type:e,selectors:[["devmx-sort-direction"]],inputs:{ascText:[1,"ascText"],descText:[1,"descText"]},outputs:{change:"change"},exportAs:["sortDirection"],decls:4,vars:2,consts:[["mat-icon-button","",3,"click","ngClass"],["name","arrow/up"]],template:function(n,r){n&1&&(i(0,"span"),c(1),a(),i(2,"button",0),y("click",function(){return r.toggle()}),s(3,"devmx-icon",1),a()),n&2&&(o(),h(r.current()==="asc"?r.ascText():r.descText()),o(),l("ngClass",r.current()))},dependencies:[S,ge,N,ne],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{transition:transform .6s cubic-bezier(.175,.885,.32,1.275)}[_nghost-%COMP%]   button.asc[_ngcontent-%COMP%]{transform:rotate(-360deg)}[_nghost-%COMP%]   button.desc[_ngcontent-%COMP%]{transform:rotate(540deg)}"]})}return e})();var rt=(e,m)=>m.id,mt=()=>[Pe,q,import("./chunk-GYYG4ZVP.js").then(e=>e.AsyncPipe)],st=()=>[Be,A],lt=e=>[e],ct=e=>({right:e}),pt=e=>({outlets:e}),dt=e=>["/","eventos",e];function ut(e,m){if(e&1&&(i(0,"a",4),s(1,"devmx-event-card",5),a()),e&2){let t=d().$implicit;l("routerLink",O(8,dt,O(6,pt,O(4,ct,O(2,lt,t.id))))),o(),l("data",t)}}function ft(e,m){e&1&&s(0,"devmx-skeleton",6),e&2&&l("rows",3)}function vt(e,m){e&1&&(C(0,ut,2,10)(1,ft,1,1),H(2,0,st,null,1),te(0,-1))}function _t(e,m){if(e&1){let t=L();i(0,"div",1),E(1,vt,4,0,null,null,rt),a(),s(3,"div",2),i(4,"footer")(5,"devmx-paginator",3),y("pageChange",function(r){b(t);let u=d(2);return I(u.onPageChange(r))}),a()()}if(e&2){let t=m;o(),P(t.data),o(4),l("size",10)("items",t.items)}}function Ct(e,m){if(e&1&&(C(0,_t,6,2),v(1,"async")),e&2){let t,n=d();g((t=_(1,1,n.eventFacade.response$))?0:-1,t)}}function gt(e,m){e&1&&(i(0,"div",1),s(1,"devmx-skeleton",6)(2,"devmx-skeleton",6)(3,"devmx-skeleton",6),a()),e&2&&(o(),l("rows",3),o(),l("rows",2),o(),l("rows",3))}var qe=(()=>{class e{router=p(B);route=p(V);eventFacade=p($);constructor(){this.route.queryParams.pipe(M()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{title:n="",format:r="",date:u="asc"}=t,{page:x=0,size:U=10}=t,Qe={title:n,format:r},We={date:u};this.eventFacade.setParams({page:x,size:U,filter:Qe,sort:We}),this.eventFacade.load()};onFilterChange(t){let n={format:t};this.router.navigate([],{queryParams:n})}onSortChange(t){let n={date:t};this.router.navigate([],{queryParams:n})}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=f({type:e,selectors:[["devmx-events"]],decls:7,vars:0,consts:[[3,"change"],[1,"events-container"],[1,"spacer"],[3,"pageChange","size","items"],[3,"routerLink"],[1,"event-card",3,"data"],[3,"rows"]],template:function(n,r){n&1&&(i(0,"header")(1,"devmx-event-filter",0),y("change",function(x){return r.onFilterChange(x)}),a(),i(2,"devmx-sort-direction",0),y("change",function(x){return r.onSortChange(x)}),a()(),C(3,Ct,2,3)(4,gt,4,3),H(5,3,mt,null,4),ee(500))},dependencies:[Re,He,q,F],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;padding:.4em .8em}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return e})();var In=[{path:"",data:{breadcrumb:"Eventos"},canActivate:[Q("member")],component:$e,children:[{path:"administracao",canActivate:[Q("leader","director","manager","staff")],loadChildren:()=>import("./chunk-UPXJHLAH.js").then(e=>e.eventFeatureAdminRoutes)},{path:"",component:qe},{path:":id",data:{breadcrumb:e=>e.event.title},resolve:{event:ze},component:je,outlet:"right"},{path:"",component:Ge}]}];export{$e as EventFeatureShellComponent,In as eventFeatureShellRoutes};
