import{a as Se}from"./chunk-3ODKOP2R.js";import{a as Me}from"./chunk-Y5THLB4M.js";import"./chunk-74H2XJ7M.js";import{a as W}from"./chunk-E5LW6VY7.js";import{h as qe}from"./chunk-UUY3VI3U.js";import"./chunk-D6W2LCQX.js";import{b as ye}from"./chunk-ZKZRDUGW.js";import{a as Q}from"./chunk-HI6IM3GR.js";import{c as Fe}from"./chunk-ACBCXO7L.js";import"./chunk-XOG32TGV.js";import"./chunk-7C4OGBUT.js";import"./chunk-JSMGHGEM.js";import{a as Be,b as Ve,c as Ae,d as $e}from"./chunk-GBPAXCNY.js";import"./chunk-DHJLQTLE.js";import"./chunk-2JFQCQIH.js";import{a as Re}from"./chunk-ACICD334.js";import"./chunk-K6BAOOYY.js";import"./chunk-EHE3LMIA.js";import{c as D,d as Ee,g as Pe}from"./chunk-FCFKOLNZ.js";import{a as z}from"./chunk-KFNJW3LU.js";import"./chunk-HI7DSU4M.js";import{H as ge,I as xe,J as S,c as M}from"./chunk-DRS6KPFN.js";import{b as Ne,c as ze,g as Ue,h as je,i as Ge,j as He}from"./chunk-GWR3E4OR.js";import"./chunk-QFO6SDSJ.js";import"./chunk-6XRDRI3M.js";import{g as V,i as A,j as $,p as F}from"./chunk-HSHVYIET.js";import"./chunk-I7VYXJU2.js";import{a as de,d as ue,e as ve,f as fe,g as _e,i as Ce,l as he}from"./chunk-D6LQDK3R.js";import{a as De,b as we,c as be,d as Oe,f as Te,g as Ie,h as ke,i as Le}from"./chunk-4MJB22NR.js";import{a as N,h as re,i as me,m as se,p as le,s as ce,x as pe}from"./chunk-G3WX2AVA.js";import"./chunk-HIWFQB25.js";import{$b as E,Ba as K,F as T,Fb as ee,Ha as X,Hc as b,Ia as G,Jc as v,Kc as C,Lc as q,Nb as f,Ob as H,Pb as te,Rb as ne,Tb as l,Yb as _,Yd as ie,_b as L,ac as P,ba as J,bc as a,cc as r,dc as s,gb as w,hc as R,je as oe,ka as c,kc as y,lb as o,mc as u,pe as ae,t as j,ta as I,u as Y,ua as k,ub as h,xb as Z,xc as p,yc as g,zc as B}from"./chunk-D2BDYEBL.js";var Qe=(()=>{class e{router=c(A);destroyRef=c(K);authFacade=c(z);layoutFacade=c(ye);ngOnInit(){this.authFacade.auth$.pipe(M(this.destroyRef)).subscribe(t=>{t&&(this.layoutFacade.loadNavLinks(t.roles),this.waitingForLogout())}),this.authFacade.load()}waitingForLogout(){this.authFacade.auth$.pipe(M(this.destroyRef)).subscribe(t=>{t===null&&(this.layoutFacade.resetNavLinks(),this.router.navigateByUrl("/conta/autenticacao"))})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["devmx-event-feature-shell"]],decls:1,vars:0,template:function(i,n){i&1&&s(0,"devmx-layout")},dependencies:[F,Me],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var We=e=>Pe(c(D),e.params);var Ye=(()=>{class e{transform(t){switch(t){case"in-person":return"Presencial";case"online":return"Online";case"mixed":return"H\xEDbrido"}}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=Z({name:"eventFormat",type:e,pure:!0})}return e})();function ot(e,m){if(e&1&&s(0,"img",7),e&2){let t=u();l("src",t.cover,w)("alt",t.title)}}function at(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"devmx-icon",15),a(2,"div",9),p(3),r()()),e&2){let t=u();o(3),g(t.address)}}function rt(e,m){if(e&1&&s(0,"devmx-maps-button",17),e&2){let t=u();l("data",t)}}function mt(e,m){if(e&1&&s(0,"devmx-youtube-button",18),e&2){let t=u();l("data",t)}}function st(e,m){if(e&1&&(a(0,"mat-card-content",12),s(1,"devmx-calendar-button",16),f(2,rt,1,1,"devmx-maps-button",17),v(3,"showEventAddress"),f(4,mt,1,1,"devmx-youtube-button",18),v(5,"showEventLink"),s(6,"devmx-whats-app-button",19),r()),e&2){let t=m;o(),l("data",t),o(),_(C(3,4,t.format)&&t.address?2:-1),o(2),_(C(5,6,t.format)&&t.link?4:-1),o(2),l("data",t)}}function lt(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"devmx-icon",21),a(2,"div",9),p(3),r()()),e&2){let t=m.$implicit;o(3),g(t.title)}}function ct(e,m){if(e&1&&(a(0,"mat-list")(1,"h3",20),p(2,"Apresenta\xE7\xF5es"),r(),E(3,lt,4,1,"mat-list-item",null,L),r()),e&2){let t=u();o(3),P(t.presentations)}}function pt(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"img",22),v(2,"photo"),a(3,"div",9),p(4),r()()),e&2){let t=m.$implicit;o(),l("src",C(2,3,t==null||t.profile==null?null:t.profile.photo),w)("alt",t.displayName),o(3),g(t.displayName)}}function dt(e,m){if(e&1&&(a(0,"mat-list")(1,"h3",20),p(2,"Organizadores"),r(),E(3,pt,5,5,"mat-list-item",null,L),r()),e&2){let t=u();o(3),P(t.leaders)}}function ut(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"img",22),v(2,"photo"),a(3,"div",9),p(4),r()()),e&2){let t=m.$implicit;o(),l("src",C(2,3,t.user.profile==null?null:t.user.profile.photo),w)("alt",t.user.displayName),o(3),g(t.user.displayName)}}function vt(e,m){if(e&1){let t=R();a(0,"form",23)(1,"devmx-rsvp-button",24),y("statusChange",function(){I(t);let n=u(2);return k(n.onStatusChange())}),r()(),a(2,"mat-list")(3,"h3",20),p(4,"Presen\xE7as"),r(),E(5,ut,5,5,"mat-list-item",null,L),r()}if(e&2){let t=u(2);l("formGroup",t.rsvpForm),o(5),P(m)}}function ft(e,m){if(e&1&&(a(0,"mat-card",0)(1,"mat-card-header",1)(2,"a",2),s(3,"devmx-icon",3),r(),a(4,"mat-card-title",4),p(5),r(),a(6,"a",5),s(7,"devmx-icon",6),r()(),f(8,ot,1,2,"img",7),a(9,"mat-list")(10,"mat-list-item"),s(11,"devmx-icon",8),a(12,"div",9),p(13),v(14,"eventFormat"),r()(),a(15,"mat-list-item"),s(16,"devmx-icon",10),a(17,"div",9),p(18),v(19,"date"),r()(),a(20,"mat-list-item"),s(21,"devmx-icon",11),a(22,"div",9),p(23),v(24,"date"),r()(),f(25,at,4,1,"mat-list-item"),r(),f(26,st,7,8,"mat-card-content",12),v(27,"async"),a(28,"mat-card-content"),s(29,"devmx-markdown-view",13),r(),f(30,ct,5,0,"mat-list")(31,dt,5,0,"mat-list")(32,vt,7,1),v(33,"async"),a(34,"mat-card-header"),s(35,"img",14),v(36,"photo"),a(37,"mat-card-title"),p(38),r(),a(39,"mat-card-subtitle"),p(40," Organizador "),r()()()),e&2){let t,i,n=m,d=u();o(5),B(" ",n.title," "),o(3),_(n.cover?8:-1),o(5),g(C(14,14,n.format)),o(5),g(q(19,16,n.date,"shortDate")),o(5),B("",q(24,19,n.date,"shortTime"),"h"),o(2),_(n.address?25:-1),o(),_((t=C(27,22,d.eventFacade.page$))?26:-1,t),o(3),l("content",n.description),o(),_(n.presentations.length?30:-1),o(),_(n.leaders.length?31:-1),o(),_((i=C(33,24,d.rsvpFacade.response$))?32:-1,i),o(3),l("src",C(36,26,n.owner.profile==null?null:n.owner.profile.photo),w)("alt",n.owner.displayName),o(3),B(" ",n.owner.displayName," ")}}var Je=(()=>{class e{route=c(V);rsvpForm=new He;authFacade=c(z);eventFacade=c(D);rsvpFacade=c(Ee);event$=this.route.data.pipe(T(t=>"event"in t),j(t=>t.event),J(t=>this.setRSVPEvent(t.id)));constructor(){let t=this.authFacade.auth$.pipe(T(n=>!!n),j(n=>n.id)),i=this.rsvpFacade.response$.pipe(T(n=>n.length>0));Y([t,i]).pipe(M()).subscribe(([n,d])=>{let x=d.find(U=>U.user.id===n);x&&this.setRSVPStatus(x)})}setRSVPEvent=t=>{this.rsvpForm.patchValue({event:t}),this.rsvpFacade.loadConfirmed(t)};setRSVPStatus({status:t}){this.rsvpForm.patchValue({status:t},{emitEvent:!1})}onStatusChange(){this.rsvpForm.valid&&this.rsvpFacade.create(this.rsvpForm.getRawValue())}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["devmx-event-details"]],decls:2,vars:3,consts:[[1,"event-card"],[1,"event-card-header","sticky"],["mat-card-avatar","","routerLink","..","mat-icon-button",""],["name","arrow/left"],[1,"event-card-header-title"],["routerLink","..","mat-icon-button",""],["name","close-cross"],["mat-card-image","",3,"src","alt"],["matListItemIcon","","name","transport/flag-pin"],["matListItemTitle",""],["matListItemIcon","","name","calendar"],["matListItemIcon","","name","alarm-clock-alert"],[1,"event-card-buttons"],[3,"content"],["mat-card-avatar","",3,"src","alt"],["matListItemIcon","","name","transport/map-pin"],["text","Definir lembrete",3,"data"],["text","Ver no mapa",3,"data"],["text","Assistir",3,"data"],["text","Compartilhar",3,"data"],["mat-subheader",""],["matListItemIcon","","name","presentation"],["matListItemAvatar","",3,"src","alt"],[1,"rsvp-button",3,"formGroup"],["formControlName","status",3,"statusChange"]],template:function(i,n){if(i&1&&(f(0,ft,41,28,"mat-card",0),v(1,"async")),i&2){let d;_((d=C(1,1,n.event$))?0:-1,d)}},dependencies:[F,$,pe,se,re,me,le,ce,ze,Ve,Ae,Be,$e,Le,De,ke,be,Te,Ie,Oe,we,he,fe,_e,ue,ve,Ce,de,S,xe,N,Ye,Re,Ue,je,Se,oe,ae],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 16px;font-size:1.2em;font-weight:500;opacity:.6}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.2em;word-wrap:break-word}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]   .mat-mdc-card-avatar[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .event-card-buttons[_ngcontent-%COMP%]{gap:1em;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .rsvp-button[_ngcontent-%COMP%]{padding:1em}"],changeDetection:0})}return e})();var Ke=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["devmx-event-home"]],decls:0,vars:0,template:function(i,n){},dependencies:[S,qe],encapsulation:2,changeDetection:0})}return e})();var Xe=(()=>{class e{ascText=G("");descText=G("");sortChange=X();current=ee("asc");toggle(){this.current()==="asc"?this.current.set("desc"):this.current.set("asc"),this.sortChange.emit(this.current())}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["devmx-sort-direction"]],inputs:{ascText:[1,"ascText"],descText:[1,"descText"]},outputs:{sortChange:"sortChange"},exportAs:["sortDirection"],decls:4,vars:2,consts:[["mat-icon-button","",3,"click","ngClass"],["name","arrow/up"]],template:function(i,n){i&1&&(a(0,"span"),p(1),r(),a(2,"button",0),y("click",function(){return n.toggle()}),s(3,"devmx-icon",1),r()),i&2&&(o(),g(n.current()==="asc"?n.ascText():n.descText()),o(),l("ngClass",n.current()))},dependencies:[S,ge,N,ie],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{transition:transform .6s cubic-bezier(.175,.885,.32,1.275)}[_nghost-%COMP%]   button.asc[_ngcontent-%COMP%]{transform:rotate(-360deg)}[_nghost-%COMP%]   button.desc[_ngcontent-%COMP%]{transform:rotate(540deg)}"]})}return e})();var _t=(e,m)=>m.id,Ct=()=>[Fe,Q,import("./chunk-IPXT3WA7.js").then(e=>e.AsyncPipe)],ht=()=>[Ge,$],gt=e=>[e],xt=e=>({right:e}),yt=e=>({outlets:e}),Mt=e=>["/","eventos",e];function Et(e,m){if(e&1&&(a(0,"a",5),s(1,"devmx-event-card",6),r()),e&2){let t=u().$implicit;l("routerLink",b(8,Mt,b(6,yt,b(4,xt,b(2,gt,t.id))))),o(),l("data",t)}}function Pt(e,m){e&1&&s(0,"devmx-skeleton",7),e&2&&l("rows",3)}function Ft(e,m){e&1&&(f(0,Et,2,10)(1,Pt,1,1),H(2,0,ht,null,1),ne(0,-1))}function St(e,m){if(e&1){let t=R();a(0,"div",2),E(1,Ft,4,0,null,null,_t),r(),s(3,"div",3),a(4,"footer")(5,"devmx-paginator",4),y("pageChange",function(n){I(t);let d=u(2);return k(d.onPageChange(n))}),r()()}if(e&2){let t=m;o(),P(t.data),o(4),l("size",10)("items",t.items)}}function Dt(e,m){if(e&1&&(f(0,St,6,2),v(1,"async")),e&2){let t,i=u();_((t=C(1,1,i.eventFacade.response$))?0:-1,t)}}function wt(e,m){e&1&&(a(0,"div",2),s(1,"devmx-skeleton",7)(2,"devmx-skeleton",7)(3,"devmx-skeleton",7),r()),e&2&&(o(),l("rows",3),o(),l("rows",2),o(),l("rows",3))}var Ze=(()=>{class e{router=c(A);route=c(V);eventFacade=c(D);constructor(){this.route.queryParams.pipe(M()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{title:i="",format:n="",date:d="asc"}=t,{page:x=0,size:U=10}=t,et={title:i,format:n},tt={date:d};this.eventFacade.setParams({page:x,size:U,filter:et,sort:tt}),this.eventFacade.load()};onFilterChange(t){let i={format:t};this.router.navigate([],{queryParams:i})}onSortChange(t){let i={date:t};this.router.navigate([],{queryParams:i})}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["devmx-events"]],decls:7,vars:0,consts:[[3,"filterChange"],[3,"sortChange"],[1,"events-container"],[1,"spacer"],[3,"pageChange","size","items"],[3,"routerLink"],[1,"event-card",3,"data"],[3,"rows"]],template:function(i,n){i&1&&(a(0,"header")(1,"devmx-event-filter",0),y("filterChange",function(x){return n.onFilterChange(x)}),r(),a(2,"devmx-sort-direction",1),y("sortChange",function(x){return n.onSortChange(x)}),r()(),f(3,Dt,2,3)(4,wt,4,3),H(5,3,Ct,null,4),te(500))},dependencies:[Ne,Xe,Q,F],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;padding:.4em .8em}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return e})();var jn=[{path:"",data:{breadcrumb:"Eventos"},canActivate:[W("member")],component:Qe,children:[{path:"administracao",canActivate:[W("leader","director","manager","staff")],loadChildren:()=>import("./chunk-TV3P4YYP.js").then(e=>e.eventFeatureAdminRoutes)},{path:"",title:"Eventos",component:Ze},{path:":id",data:{breadcrumb:e=>e.event.title},title:"Evento",resolve:{event:We},component:Je,outlet:"right"},{path:"",component:Ke}]}];export{Qe as EventFeatureShellComponent,jn as eventFeatureShellRoutes};
