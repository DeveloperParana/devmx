import{a as Ce,b as _e}from"./chunk-UD2WINGS.js";import{a as he,b as xe,c as ge,d as ve,e as Me,f as be,g as we,h as ye,i as Fe,j as Se,k as De}from"./chunk-UPL2R5GG.js";import{a as ue,b as fe}from"./chunk-BBXVUU3K.js";import{a as ae}from"./chunk-Q52RMKW4.js";import{a as pe}from"./chunk-NTYXZ34B.js";import"./chunk-QJXU5I4V.js";import"./chunk-T4WFKTQX.js";import{c as me}from"./chunk-DFYIO73B.js";import"./chunk-HS6AUOCB.js";import"./chunk-B7JMTDAV.js";import"./chunk-TJC2M7GG.js";import"./chunk-2IAXMR6M.js";import"./chunk-RSTIZ226.js";import{a as se,b as y}from"./chunk-SQZYZJQ3.js";import{a as A}from"./chunk-A3N3AUUJ.js";import"./chunk-JS3QJ7O4.js";import{n as oe,s as re,t as ie,u as T}from"./chunk-HSPBE7XI.js";import"./chunk-EVUXJHDY.js";import{g as N,h as J,i as K,j as W,p as R}from"./chunk-KXTQ2UTD.js";import"./chunk-I7VYXJU2.js";import{a as O,b as le,c as ce,d as de,e as k,f as V,i as H}from"./chunk-A6OBOLX6.js";import{a as X,e as B,f as j,h as Y,i as U,j as I,l as d,m as Z,p as ee,q as te,s as ne,x as E}from"./chunk-5R3537JV.js";import"./chunk-U457VICD.js";import{F as z,Fc as L,Jc as w,Kc as F,Mc as Q,Nb as u,Tb as C,Yb as g,bc as r,cc as o,dc as f,ec as S,fc as D,hc as v,je as P,ka as s,kc as M,lb as c,mc as p,ta as h,ua as x,ub as _,xb as q,xc as m,yc as b}from"./chunk-TEKHUYWQ.js";var Pe=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-account-feature-admin"]],decls:1,vars:0,template:function(n,a){n&1&&f(0,"router-outlet")},dependencies:[J],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var Ne=[fe()];var Re=(()=>{class e{transform(t,...n){return n.some(a=>t?.roles[a])}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=q({name:"hasRole",type:e,pure:!0})}return e})();function $e(e,i){e&1&&(r(0,"th",13),m(1,"Nome"),o())}function Ge(e,i){if(e&1&&(r(0,"td",14),m(1),o()),e&2){let t=i.$implicit;c(),b(t.displayName)}}function Be(e,i){e&1&&(r(0,"th",13),m(1,"Usu\xE1rio"),o())}function je(e,i){if(e&1&&(r(0,"td",14),m(1),o()),e&2){let t=i.$implicit;c(),b(t.name)}}function Ie(e,i){e&1&&f(0,"th",13)}function ze(e,i){if(e&1){let t=v();r(0,"button",18),M("click",function(){h(t);let a=p().$implicit,l=p(3);return x(l.openDelete(a))}),f(1,"devmx-icon",19),o()}}function qe(e,i){if(e&1&&(r(0,"td",14)(1,"a",15),f(2,"devmx-icon",16),o(),u(3,ze,2,0,"button",17),w(4,"hasRole"),o()),e&2){let t=i.$implicit,n=p(2);c(),C("routerLink",t.id),c(2),g(Q(4,2,n,"director","manager")?3:-1)}}function Le(e,i){e&1&&f(0,"tr",20)}function Qe(e,i){e&1&&f(0,"tr",21)}function Je(e,i){if(e&1){let t=v();r(0,"table",3),S(1,4),u(2,$e,2,0,"th",5)(3,Ge,2,1,"td",6),D(),S(4,7),u(5,Be,2,0,"th",5)(6,je,2,1,"td",6),D(),S(7,8),u(8,Ie,1,0,"th",5)(9,qe,5,6,"td",6),D(),u(10,Le,1,0,"tr",9)(11,Qe,1,0,"tr",10),o(),r(12,"mat-card-actions",11)(13,"devmx-paginator",12),M("pageChange",function(a){h(t);let l=p(2);return x(l.onPageChange(a))}),o()()}if(e&2){let t=i,n=p(2);C("dataSource",t.data),c(10),C("matHeaderRowDef",n.columns),c(),C("matRowDefColumns",n.columns),c(2),C("size",10)("items",t.items)}}function Ke(e,i){if(e&1){let t=v();r(0,"mat-card",0)(1,"mat-card-header",1)(2,"devmx-search-field",2),M("searchChange",function(a){h(t);let l=p();return x(l.onSearchChange(a))}),o()(),u(3,Je,14,5),w(4,"async"),o()}if(e&2){let t,n=p();c(2),C("debounce",800),c(),g((t=F(4,2,n.userFacade.response$))?3:-1,t)}}var Ue=(()=>{class e{router=s(K);route=s(N);authFacade=s(se);userFacade=s(y);dialogFacade=s(ue);columns=["displayName","name","actions"];constructor(){this.route.queryParams.pipe(A()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{page:n=0,size:a=10}=t,{name:l="",username:Oe=""}=t,ke={name:l,username:Oe};this.userFacade.setParams({page:n,size:a,filter:ke}),this.userFacade.load()};openDelete(t){this.dialogFacade.confirm(`Confirme que deseja remover o usu\xE1rio de ${t.displayName}`,"Esta a\xE7\xE3o n\xE3o poder\xE1 ser desfeita").subscribe(n=>{n&&this.userFacade.delete(t.id)})}onSearchChange(t=""){this.userFacade.setFilter({displayName:t}),this.userFacade.load()}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-users"]],decls:2,vars:3,consts:[[1,"users-card"],[1,"users-card-header"],[3,"searchChange","debounce"],["mat-table","",3,"dataSource"],["matColumnDef","displayName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],[3,"pageChange","size","items"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"routerLink"],["name","user-box"],["mat-icon-button","","color","warn"],["mat-icon-button","","color","warn",3,"click"],["name","trash"],["mat-header-row",""],["mat-row",""]],template:function(n,a){if(n&1&&(u(0,Ke,5,4,"mat-card",0),w(1,"async")),n&2){let l;g((l=F(1,1,a.authFacade.auth$))?0:-1,l)}},dependencies:[me,pe,T,ie,re,De,he,ge,we,ve,xe,ye,Me,be,Fe,Se,H,O,k,V,X,R,W,Re,P],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .users-card[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .users-card-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}[_nghost-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{max-width:4em}"],changeDetection:0})}return e})();var Ee=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-user-roles"]],features:[L([],[{provide:j,useFactory:()=>s(j,{skipSelf:!0})}])],decls:16,vars:0,consts:[["formGroupName","roles"],["formControlName","member"],["formControlName","speaker"],["formControlName","recruiter"],["formControlName","leader"],["formControlName","staff"]],template:function(n,a){n&1&&(r(0,"div",0)(1,"section")(2,"mat-checkbox",1),m(3,"Membro"),o()(),r(4,"section")(5,"mat-checkbox",2),m(6,"Palestrante"),o()(),r(7,"section")(8,"mat-checkbox",3),m(9,"Recrutador(a)"),o()(),r(10,"section")(11,"mat-checkbox",4),m(12,"L\xEDder de grupo"),o()(),r(13,"section")(14,"mat-checkbox",5),m(15,"Organizador"),o()()())},dependencies:[E,Y,U,ne,te,_e,Ce],encapsulation:2,changeDetection:0})}return e})();var G=class extends I{constructor(){super({id:new d("",{nonNullable:!0,validators:[B.required]}),roles:new I({academic:new d(!1,{nonNullable:!0}),director:new d(!1,{nonNullable:!0}),donor:new d(!1,{nonNullable:!0}),fellow:new d(!1,{nonNullable:!0}),leader:new d(!1,{nonNullable:!0}),manager:new d(!1,{nonNullable:!0}),member:new d(!1,{nonNullable:!0,validators:[B.requiredTrue]}),neighbor:new d(!1,{nonNullable:!0}),recruiter:new d(!1,{nonNullable:!0}),speaker:new d(!1,{nonNullable:!0}),staff:new d(!1,{nonNullable:!0})})})}};function Xe(e,i){if(e&1){let t=v();r(0,"form",1),M("submit",function(){h(t);let a=p();return x(a.onSubmit())}),r(1,"mat-card",2)(2,"mat-card-header",3)(3,"mat-card-title"),m(4),o(),r(5,"mat-card-subtitle"),m(6),o()(),r(7,"mat-card-content",4),f(8,"devmx-user-roles"),o(),r(9,"mat-card-actions",5)(10,"button",6),m(11,"Salvar"),o()()()()}if(e&2){let t=i,n=p();C("formGroup",n.form),c(4),b(t.displayName),c(2),b(t.name)}}var Te=(()=>{class e{route=s(N);userFacade=s(y);messageService=s(ae);form=new G;constructor(){this.route.data.pipe(A()).subscribe(({user:t})=>{t&&this.form.patchValue(t)})}onSubmit(){if(this.form.valid){let t=this.form.getRawValue();return this.userFacade.updateRoles(t),this.messageService.open({message:"Armazenando informa\xE7\xF5es"})}return this.form.markAllAsTouched()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-admin-user"]],decls:2,vars:3,consts:[[3,"formGroup"],[3,"submit","formGroup"],[1,"user-card"],[1,"user-card-header"],[1,"user-card-content"],["align","end"],["mat-button",""]],template:function(n,a){if(n&1&&(u(0,Xe,12,3,"form",0),w(1,"async")),n&2){let l;g((l=F(1,1,a.userFacade.selected$))?0:-1,l)}},dependencies:[E,Z,U,ee,Ee,T,oe,H,O,k,ce,V,de,le,R,P],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .user-card[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .user-card-header[_ngcontent-%COMP%]{padding-bottom:.8em;border-bottom:1px dashed rgba(0,0,0,.1)}[_nghost-%COMP%]   .user-card-content[_ngcontent-%COMP%]{padding-top:.8em}"],changeDetection:0})}return e})();var Ae=e=>{let i=s(y);return i.loadOne(e.params.id),i.selected$.pipe(z(t=>!!t))};var an=[{path:"",data:{breadcrumb:"Administra\xE7\xE3o"},providers:Ne,component:Pe,children:[{path:"usuarios",data:{breadcrumb:"Usu\xE1rios"},component:Ue},{path:"usuarios/:id",data:{breadcrumb:e=>e.user.displayName},resolve:{user:Ae},component:Te},{path:"",pathMatch:"prefix",redirectTo:"usuarios"}]}];export{Pe as AccountFeatureAdminComponent,an as accountFeatureAdminRoutes};
