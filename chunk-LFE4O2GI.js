import{a as _n}from"./chunk-AIDSIBEH.js";import{a as Yi,b as Qi,c as Xi,d as Zi,e as Ji,f as en}from"./chunk-YEG4EZPQ.js";import{a as Oe,b as tn}from"./chunk-XQ2X5WXW.js";import{a as an,b as rn,c as sn,d as ln,e as mn,f as cn,g as pn,h as dn,i as un,j as fn,k as hn}from"./chunk-S5YNRUC2.js";import{a as Ze,b as on}from"./chunk-QI34HWLF.js";import"./chunk-AFH22WZE.js";import{a as nn}from"./chunk-VA42OK7P.js";import{a as xi}from"./chunk-EL2X2KCH.js";import{a as wi}from"./chunk-ZHS65JNW.js";import{i as Hi,j as ji}from"./chunk-PUJ3XJFZ.js";import{a as Fi}from"./chunk-TICJBGV4.js";import{c as Oi,d as Ce,e as xe}from"./chunk-JT2DD3I4.js";import{a as Vi,b as Ni,c as Li,d as Bi,e as $i,g as Gi}from"./chunk-S2HSXFZX.js";import{c as Ii,d as Ri,e as Ai}from"./chunk-PP7QIMAL.js";import"./chunk-A42DQ33M.js";import{a as yi,b as Ei,c as We}from"./chunk-YBVNTHNC.js";import{a as Mi,b as bi}from"./chunk-UOFKNBGB.js";import{e as Ci}from"./chunk-H2KJYRW3.js";import{b as Ui,c as qi,d as zi}from"./chunk-GX5I6M3U.js";import{a as Ki}from"./chunk-2AFHEO5G.js";import"./chunk-3SNV2MVI.js";import"./chunk-2IAXMR6M.js";import{a as _i,b as gi,c as X,d as Qe,g as vi}from"./chunk-KQB6UOOE.js";import{a as Pi}from"./chunk-QQHHSVWN.js";import{a as W}from"./chunk-A3N3AUUJ.js";import"./chunk-OCN2RHRZ.js";import{F as hi,a as ai,k as Ue,l as ri,n as ve,r as di,s as L,t as ui,u as y,w as fi}from"./chunk-CVM2AHGP.js";import{f as Wi}from"./chunk-XVVNI7WI.js";import"./chunk-27JLR3AO.js";import{a as de,c as ue,e as Ke,f as fe,g as he,i as _e,l as ge}from"./chunk-PAP2P7QR.js";import{a as Si,b as Ti,e as ki,f as Di,i as Xe}from"./chunk-EC6LD5KM.js";import{a as I,b as si,c as Y,d as li,e as R,f as b,g as mi,h as K,i as V,j as H,l as _,m as qe,n as ci,p as N,r as ze,s as Q,t as pi,w as Ye,x as S}from"./chunk-EDIJ2EBQ.js";import{b as me,c as ni,e as je,g as oi,i as ce,j as pe}from"./chunk-QOJBU3AI.js";import{g as se,h as Yt,i as $e,j as lt,p as Ge}from"./chunk-KXTQ2UTD.js";import{$ as pt,I as Zt,T as Jt,U as ei,_ as Pe,aa as ti,ka as ii,na as le,o as Xt,s as ct}from"./chunk-W5KNOAKV.js";import{c as Kt,d as He,e as Qt,g as De,h as Wt,j as mt}from"./chunk-I7VYXJU2.js";import{$b as E,Aa as St,B as Ct,Ba as Tt,Eb as It,Ec as Ve,F as xt,Fb as ae,Fc as F,Gb as re,Ha as q,Hb as Rt,Hc as Ht,Ia as v,J as Mt,Ja as ye,Jb as At,Jc as z,Kb as Vt,Kc as Ne,L as T,Lc as Le,Nb as C,Nc as jt,Ob as Nt,Pb as Lt,Sb as we,Sc as Ut,Tb as u,Va as kt,Vc as Se,Xc as Te,Y as oe,Yb as P,Yc as Be,Zc as ke,ac as w,bc as s,cc as r,d as vt,dc as p,ec as $,ed as qt,fa as bt,fc as G,gb as Dt,ha as yt,hc as A,ic as Bt,jb as Ee,je as zt,ka as m,kc as f,lb as c,mb as Re,mc as x,nc as $t,oc as Gt,sb as Pt,t as ne,ta as k,u as Ie,ua as D,ub as h,uc as te,va as Et,vb as Ot,vc as Ae,wb as Ft,wc as st,xc as d,yc as U,za as wt,zc as O}from"./chunk-TEKHUYWQ.js";var gn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-feature-admin"]],decls:1,vars:0,template:function(t,n){t&1&&p(0,"router-outlet")},dependencies:[Yt],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return i})();var Je=class extends H{constructor(){super({src:new _("",{nonNullable:!0}),alt:new _("",{nonNullable:!0})})}};var zn=["box"],Yn=["overlay"],Kn=["image"],et=i=>`${i}px`,vn=(()=>{class i{src=v("");aspectRatio=v(16/9);width=v(null);height=v(null);cropChange=q();boxRef=re("box");get box(){let e=this.boxRef();if(!e)throw"box error";return e.nativeElement}overlayRef=re("overlay");get overlay(){let e=this.overlayRef();if(!e)throw"overlay error";return e.nativeElement}imageRef=re("image");get image(){let e=this.imageRef();if(!e)throw"error";return e.nativeElement}#e=null;#t=null;loaded=!1;ngOnInit(){let e=this.src();this.image.onload=()=>{this.loaded=!0,this.setInitialPosition()},this.box.addEventListener("touchstart",this.startUpdate.bind(this),{passive:!0}),this.image.src=e}setInitialPosition(){let{clientWidth:e,clientHeight:t}=this.image,n=this.width()??Math.round(e/2),a=this.height()??n;this.aspectRatio&&(a=Math.round(n/this.aspectRatio()));let l=(e-n)/2,g=(t-a)/2;this.#e=new Ue(l,g),this.updateDimensions(n,a)}updateDimensions(e,t,n=!0){if(!this.#e)return;let{offsetLeft:a,offsetTop:l}=this.box,{clientWidth:g,clientHeight:M}=this.image,j=Math.min(e,g-this.#e.x),Me=Math.min(t,M-this.#e.y),J=n?Math.round(Math.max(0,this.#e.x)):a,ee=n?Math.round(Math.max(0,this.#e.y)):l;this.box.style.left=et(J),this.box.style.top=et(ee),this.box.style.width=et(j),this.box.style.height=et(Me),this.updateOverlay(J,ee,j,Me);let be=new DOMRect(J,ee,j,Me);this.fireChangeEvent(be)}updateOverlay(e,t,n,a){this.overlay.style.clipPath=`polygon(
      0% 0%, 0% 100%, 100% 100%, 100% 0%,
      ${e}px 0%, ${e}px ${t}px,
      ${e+n}px ${t}px, ${e+n}px ${t+a}px,
      ${e}px ${t+a}px, ${e}px ${t}px,
      ${e}px 0%, 0% 0%
    )`}fireChangeEvent(e){let t=this.image,n=t.naturalWidth/t.clientWidth;e=new DOMRect(Math.round(e.x*n),Math.round(e.y*n),Math.round(e.width*n),Math.round(e.height*n)),this.cropChange.emit(e)}stopUpdate(){this.#t=null,this.box.classList.remove("nwse","nesw")}startUpdate(e){if(!(e.target instanceof HTMLElement))return;let t="touches"in e?e.touches[0].pageX:e.pageX,n="touches"in e?e.touches[0].pageY:e.pageY;this.#t=new Ue(t,n)}moveCropArea(e){if(!this.#t)return;let t="touches"in e?e.touches[0].pageX:e.pageX,n="touches"in e?e.touches[0].pageY:e.pageY,a=t-this.#t.x,l=n-this.#t.y,g=this.box,M=this.image,{offsetLeft:j,offsetTop:Me,offsetWidth:J,offsetHeight:ee}=g,be=Math.min(Math.max(0,j+a),M.clientWidth-J),rt=Math.min(Math.max(0,Me+l),M.clientHeight-ee);g.style.left=`${be}px`,g.style.top=`${rt}px`,this.updateOverlay(be,rt,J,ee);let qn=new DOMRect(be,rt,J,ee);this.fireChangeEvent(qn),this.#t=new Ue(t,n)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-crop-image"]],viewQuery:function(t,n){t&1&&(te(n.boxRef,zn,5),te(n.overlayRef,Yn,5),te(n.imageRef,Kn,5)),t&2&&Ae(3)},hostBindings:function(t,n){t&1&&f("mouseup",function(){return n.stopUpdate()},!1,Ee)("touchend",function(){return n.stopUpdate()},!1,Ee)("mousedown",function(l){return n.startUpdate(l)})("mousemove",function(l){return n.moveCropArea(l)},!1,Ee)("touchmove",function(l){return n.moveCropArea(l)},!1,Ee)},inputs:{src:[1,"src"],aspectRatio:[1,"aspectRatio"],width:[1,"width"],height:[1,"height"]},outputs:{cropChange:"cropChange"},decls:9,vars:1,consts:[["image",""],["box",""],["overlay",""],[1,"crop-wrapper"],["alt","imagem para recorte",1,"crop-image",3,"src"],[1,"crop-container"],[1,"crop-box"],[1,"crop-outline"],[1,"crop-overlay"]],template:function(t,n){t&1&&(s(0,"div",3),p(1,"img",4,0),s(3,"div",5)(4,"div",6,1),p(6,"div",7),r(),p(7,"div",8,2),r()()),t&2&&(c(),u("src",n.src(),Dt))},styles:["[_nghost-%COMP%]{display:block;touch-action:none;position:relative}[_nghost-%COMP%]   .crop-wrapper[_ngcontent-%COMP%]{position:relative;font-size:0}[_nghost-%COMP%]   .crop-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:2;top:0}[_nghost-%COMP%]   .crop-image[_ngcontent-%COMP%]{display:block;max-width:100%;width:100%}[_nghost-%COMP%]   .crop-box[_ngcontent-%COMP%]{position:absolute;border:1px dashed #ccc;box-sizing:border-box;background-color:transparent;cursor:move;z-index:3}[_nghost-%COMP%]   .crop-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);pointer-events:none;z-index:1}"],changeDetection:0})}return i})();function Cn({width:i,height:o}){let e=document.createElement("canvas");e.width=i,e.height=o;let t=e.getContext("2d");if(!t)throw"context error";return t}function xn(i,o){let e=Cn(i),t=Cn(o);return e.drawImage(i,0,0),t.drawImage(e.canvas,o.x,o.y,o.width,o.height,0,0,o.width,o.height),t.canvas.toDataURL("image/webp")}var yn=(()=>{class i{ref=m(Ii);data=m(Ri);src;form=new Je;position=new DOMRect;constructor(){this.src=URL.createObjectURL(this.data)}onCropChange(e){this.position=e}onCrop(){return vt(this,null,function*(){let e=yield _n(this.src),t=xn(e,this.position);this.form.patchValue({src:t}),this.ref.close(this.form.getRawValue())})}close(){this.ref.close()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-select-cover"]],decls:8,vars:3,consts:[[3,"cropChange","src","width"],[3,"submit","formGroup"],["matInput","","formControlName","alt"],["mat-icon-button",""],["name","menu/crop"]],template:function(t,n){t&1&&(s(0,"devmx-crop-image",0),f("cropChange",function(l){return n.onCropChange(l)}),r(),s(1,"form",1),f("submit",function(){return n.onCrop()}),s(2,"mat-form-field")(3,"mat-label"),d(4,"Texto alternativo"),r(),p(5,"input",2),r(),s(6,"button",3),p(7,"devmx-icon",4),r()()),t&2&&(u("src",n.src)("width",980),c(),u("formGroup",n.form))},dependencies:[S,qe,Y,K,V,N,Q,pe,ce,me,vn,xe,Ce,y,L,I],styles:["[_nghost-%COMP%]{gap:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1em}"],changeDetection:0})}return i})();var tt=class{dialog;constructor(o){this.dialog=o}open(o){return this.dialog.open(yn,{data:o}).closed.pipe(T(1))}};function En(){return{provide:tt,deps:[Ai]}}var dt=(i,o)=>o.id;function Qn(i,o){i&1&&p(0,"devmx-icon",5)}function Wn(i,o){i&1&&p(0,"devmx-icon",6)}function Xn(i,o){i&1&&p(0,"devmx-icon",7)}function Zn(i,o){if(i&1&&(s(0,"mat-list-item")(1,"span",4),d(2),r(),C(3,Qn,1,0,"devmx-icon",5)(4,Wn,1,0,"devmx-icon",6)(5,Xn,1,0,"devmx-icon",7),r()),i&2){let e,t=o.$implicit;c(2),O(" ",t.user.displayName," "),c(),P((e=t.status)==="confirmed"?3:e==="maybe"?4:e==="declined"?5:-1)}}function Jn(i,o){i&1&&p(0,"devmx-icon",5)}function eo(i,o){i&1&&p(0,"devmx-icon",6)}function to(i,o){i&1&&p(0,"devmx-icon",7)}function io(i,o){if(i&1&&(s(0,"mat-list-item")(1,"span",4),d(2),r(),C(3,Jn,1,0,"devmx-icon",5)(4,eo,1,0,"devmx-icon",6)(5,to,1,0,"devmx-icon",7),r()),i&2){let e,t=o.$implicit;c(2),O(" ",t.user.displayName," "),c(),P((e=t.status)==="confirmed"?3:e==="maybe"?4:e==="declined"?5:-1)}}function no(i,o){i&1&&p(0,"devmx-icon",5)}function oo(i,o){i&1&&p(0,"devmx-icon",6)}function ao(i,o){i&1&&p(0,"devmx-icon",7)}function ro(i,o){if(i&1&&(s(0,"mat-list-item")(1,"span",4),d(2),r(),C(3,no,1,0,"devmx-icon",5)(4,oo,1,0,"devmx-icon",6)(5,ao,1,0,"devmx-icon",7),r()),i&2){let e,t=o.$implicit;c(2),O(" ",t.user.displayName," "),c(),P((e=t.status)==="confirmed"?3:e==="maybe"?4:e==="declined"?5:-1)}}var Sn=(()=>{class i{ref=m(Vi);data=m(Ni);static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-rsvp"]],decls:24,vars:13,consts:[["mat-dialog-title",""],["mat-subheader",""],["align","end"],["mat-button","","mat-dialog-close",""],["matListItemTitle",""],["matListItemMeta","","name","emoji/happy"],["matListItemMeta","","name","emoji/confused"],["matListItemMeta","","name","emoji/crying"]],template:function(t,n){if(t&1&&(s(0,"h2",0),d(1),r(),s(2,"mat-list"),Ve(3),z(4,"rsvpByStatus"),s(5,"h3",1),d(6),r(),E(7,Zn,6,2,"mat-list-item",null,dt),Ve(9),z(10,"rsvpByStatus"),s(11,"h3",1),d(12),r(),E(13,io,6,2,"mat-list-item",null,dt),Ve(15),z(16,"rsvpByStatus"),s(17,"h3",1),d(18),r(),E(19,ro,6,2,"mat-list-item",null,dt),r(),s(21,"mat-dialog-actions",2)(22,"button",3),d(23,"Fechar"),r()()),t&2){c(),O("",n.data.length," respostas");let a=Le(4,4,n.data,"confirmed");c(5),O("",a.length," confirmado(s)"),c(),w(a);let l=Le(10,7,n.data,"maybe");c(5),O("",l.length," em d\xFAvida"),c(),w(l);let g=Le(16,10,n.data,"declined");c(5),O("",g.length," declinado(s)"),c(),w(g)}},dependencies:[$i,Gi,Bi,y,ve,ge,fe,he,_e,de,ue,I,Wi],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.6em;font-weight:500}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em;font-weight:400;margin:0 1em;opacity:.6}"],changeDetection:0})}return i})();var Z=class{dialog;constructor(o){this.dialog=o}open(o){return this.dialog.open(Sn,{data:o}).afterClosed().pipe(T(1))}};function Tn(){return{provide:Z,deps:[Li]}}var kn=[ji(),tn(),En(),Tn(),on()];var Dn=i=>vi(m(X),i.params);function so(i,o){i&1&&(s(0,"th",15),d(1,"T\xEDtulo do evento"),r())}function lo(i,o){if(i&1&&(s(0,"td",16),d(1),r()),i&2){let e=o.$implicit;c(),U(e.title)}}function mo(i,o){i&1&&(s(0,"th",15),d(1,"Criado por"),r())}function co(i,o){if(i&1&&(s(0,"td",16),d(1),r()),i&2){let e=o.$implicit;c(),U(e.owner.displayName)}}function po(i,o){i&1&&p(0,"th",15)}function uo(i,o){if(i&1){let e=A();s(0,"td",16)(1,"button",17),f("click",function(){let n=k(e).$implicit,a=x(2);return D(a.openDelete(n))}),p(2,"devmx-icon",18),r()()}}function fo(i,o){i&1&&p(0,"tr",19)}function ho(i,o){i&1&&p(0,"tr",20)}function _o(i,o){if(i&1){let e=A();s(0,"table",5),$(1,6),C(2,so,2,0,"th",7)(3,lo,2,1,"td",8),G(),$(4,9),C(5,mo,2,0,"th",7)(6,co,2,1,"td",8),G(),$(7,10),C(8,po,1,0,"th",7)(9,uo,3,0,"td",8),G(),C(10,fo,1,0,"tr",11)(11,ho,1,0,"tr",12),r(),s(12,"mat-card-actions",13)(13,"devmx-paginator",14),f("pageChange",function(n){k(e);let a=x();return D(a.onPageChange(n))}),r()()}if(i&2){let e=o,t=x();u("dataSource",e.data),c(10),u("matHeaderRowDef",t.columns),c(),u("matRowDefColumns",t.columns),c(2),u("size",10)("items",e.items)}}var Pn=(()=>{class i{router=m($e);route=m(se);dialogFacade=m(Ze);eventFacade=m(X);rsvpFacade=m(Qe);eventRSVP=m(Z);selectUser=m(Oe);#e=ri(null);columns=["title","owner","actions"];constructor(){let e=this.#e.observe().pipe(ne(n=>n?n.id:"")),t=this.route.queryParams.pipe(ne(({page:n,size:a,title:l,format:g,date:M})=>({page:n,size:a,title:l,format:g,date:M})));Ie([e,t]).pipe(W()).subscribe(this.onQueryParams),this.eventFacade.loadAll()}setUserRef(e=null){this.#e.update(e)}onQueryParams=([e,t])=>{let{page:n,size:a,title:l,format:g,date:M}=t,j={title:l,format:g,date:M,owner:e};this.eventFacade.setParams({page:n,size:a,filter:j}),this.eventFacade.load()};openSelectUser(){this.selectUser.open({onlyRole:"leader",multiple:!1}).subscribe(e=>{e&&this.#e.update(e)})}openRSVP(e){this.rsvpFacade.load(e),this.rsvpFacade.response$.pipe(oe(1),T(1)).subscribe(t=>{t&&this.eventRSVP.open(t)})}openDelete({id:e,title:t}){this.dialogFacade.confirm(`Confirme que deseja apagar o evento ${t}`,"Esta a\xE7\xE3o n\xE3o poder\xE1 ser desfeita").subscribe(n=>{n&&this.eventFacade.delete(e)})}onSearchChange(e=""){this.eventFacade.setFilter({title:e}),this.eventFacade.loadAll()}onPageChange({page:e,size:t}){let n={page:e,size:t};this.router.navigate([],{queryParams:n})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-admin-manage-events"]],decls:10,vars:4,consts:[[1,"events-card"],[1,"events-card-header"],["mat-icon-button","",3,"click"],["name","filter"],[3,"searchChange","debounce"],["mat-table","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","owner"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],[3,"pageChange","size","items"],["mat-header-cell",""],["mat-cell",""],["type","button","mat-icon-button","",3,"click"],["name","trash"],["mat-header-row",""],["mat-row",""]],template:function(t,n){if(t&1&&(s(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),d(3,"Eventos"),r(),s(4,"div")(5,"button",2),f("click",function(){return n.openSelectUser()}),p(6,"devmx-icon",3),r(),s(7,"devmx-search-field",4),f("searchChange",function(l){return n.onSearchChange(l)}),r()()(),C(8,_o,14,5),z(9,"async"),r()),t&2){let a;c(7),u("debounce",1e3),c(),P((a=Ne(9,2,n.eventFacade.response$))?8:-1,a)}},dependencies:[Ge,y,L,Fi,We,hn,an,sn,pn,ln,rn,dn,mn,cn,un,fn,Xe,Si,ki,Di,Ti,I,zt],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .events-card[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .events-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px dashed rgba(0,0,0,.1)}[_nghost-%COMP%]   .events-card-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{gap:2em;display:flex;align-items:baseline}[_nghost-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{max-width:3em}"],changeDetection:0})}return i})();var go=(i,o)=>o.id,vo=()=>[lt,ui,L,yi,import("./chunk-RHREINMJ.js").then(i=>i.EventCardComponent),We,I,import("./chunk-QQ3DFMVY.js").then(i=>i.AsyncPipe)],Co=i=>["/","evento",i];function xo(i,o){if(i&1){let e=A();s(0,"devmx-event-card",3)(1,"button",7),f("click",function(){let n=k(e).$implicit,a=x(3);return D(a.openRSVP(n.id))}),p(2,"devmx-icon",8),r(),s(3,"a",9),p(4,"devmx-icon",10),r(),s(5,"a",11),p(6,"devmx-icon",12),r(),s(7,"button",13),f("click",function(){let n=k(e).$implicit,a=x(3);return D(a.deleteEvent(n))}),p(8,"devmx-icon",14),r()()}if(i&2){let e=o.$implicit;u("data",e),c(3),u("routerLink",Ht(3,Co,e.id)),c(2),u("routerLink",e.id)}}function Mo(i,o){i&1&&(s(0,"div",4)(1,"h2"),d(2,"N\xE3o temos nada aqui..."),r(),s(3,"h3"),d(4," Siga nessa dire\xE7\xE3o "),p(5,"devmx-icon",15)(6,"br"),d(7," at\xE9 encontrar o bot\xE3o com um "),p(8,"devmx-icon",16)(9,"br"),d(10," e cadastre suas eventos. "),p(11,"devmx-icon",17),r()()),i&2&&(c(5),u("size",32),c(3),u("size",32),c(3),u("size",32))}function bo(i,o){if(i&1){let e=A();s(0,"div",2),E(1,xo,9,5,"devmx-event-card",3,go),r(),C(3,Mo,12,3,"div",4),p(4,"div",5),s(5,"footer")(6,"devmx-paginator",6),f("pageChange",function(n){k(e);let a=x(2);return D(a.onPageChange(n))}),r()()}if(i&2){let e=o;c(),w(e.data),c(2),P(e.items?-1:3),c(3),u("size",10)("items",e.items)}}function yo(i,o){if(i&1&&(C(0,bo,7,3),z(1,"async")),i&2){let e,t=x();P((e=Ne(1,1,t.eventFacade.response$))?0:-1,e)}}function Eo(i,o){i&1&&(s(0,"div",2),p(1,"devmx-skeleton",18)(2,"devmx-skeleton",18)(3,"devmx-skeleton",18),r()),i&2&&(c(),u("rows",3),c(),u("rows",2),c(),u("rows",3))}var On=(()=>{class i{router=m($e);route=m(se);dialogFacade=m(Ze);authFacade=m(Pi);eventFacade=m(X);rsvpFacade=m(Qe);eventRSVP=m(Z);constructor(){let e=this.authFacade.auth$.pipe(xt(n=>!!n),ne(({id:n})=>n)),t=this.route.queryParams.pipe(ne(({page:n,size:a,title:l,format:g,date:M})=>({page:n,size:a,title:l,format:g,date:M})));Ie([e,t]).pipe(W()).subscribe(this.onQueryParams)}onQueryParams=([e,t])=>{let{page:n,size:a,title:l,format:g,date:M}=t,j={title:l,format:g,date:M,owner:e};this.eventFacade.setParams({page:n,size:a,filter:j}),this.eventFacade.loadAll()};openRSVP(e){this.rsvpFacade.load(e),this.rsvpFacade.response$.pipe(oe(1),T(1)).subscribe(t=>{t&&this.eventRSVP.open(t)})}deleteEvent({id:e,title:t}){this.dialogFacade.confirm(`Confirme que deseja apagar a vaga ${t}`,"Esta a\xE7\xE3o n\xE3o poder\xE1 ser desfeita").subscribe(n=>{n&&this.eventFacade.delete(e)})}onPageChange({page:e,size:t}){let n={page:e,size:t};this.router.navigate([],{queryParams:n})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-admin-my-events"]],decls:6,vars:0,consts:[["mat-fab","","routerLink","novo",1,"tertiary-fab","top","right"],["name","plus"],[1,"events-container"],[3,"data"],[1,"no-events-yet"],[1,"spacer"],[3,"pageChange","size","items"],["mat-icon-button","","matTooltip","Lista de presen\xE7a","matTooltipPosition","before",3,"click"],["name","doc/check"],["mat-icon-button","","matTooltip","P\xE1gina p\xFAblica","matTooltipPosition","above",3,"routerLink"],["name","software/web-info"],["mat-icon-button","","matTooltip","Editar evento","matTooltipPosition","above",3,"routerLink"],["name","software/edit"],["type","button","mat-icon-button","","matTooltip","Apagar evento","matTooltipPosition","after",3,"click"],["name","trash-alt"],["color","#3BCE53","name","arrow/up-right",3,"size"],["color","#3BCE53","name","plus",3,"size"],["color","#3BCE53","name","emoji/smirking-alt",3,"size"],[3,"rows"]],template:function(t,n){t&1&&(s(0,"a",0),p(1,"devmx-icon",1),r(),C(2,yo,2,3)(3,Eo,4,3),Nt(4,2,vo,null,3),Lt(500))},dependencies:[Ge,lt,y,di,Ei,wi,I],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(3,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{flex:1;display:flex}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;padding:0;white-space:normal}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:160%}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:120%;text-align:end}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return i})();var wo=(i,o)=>o.value;function So(i,o){if(i&1){let e=A();s(0,"mat-list-item"),p(1,"devmx-icon",3),s(2,"span",4),d(3),r(),s(4,"button",5),f("click",function(){let n=k(e).$index,a=x(2);return D(a.form.presentations.removeAt(n))}),p(5,"devmx-icon",6),r()()}if(i&2){let e=o.$implicit;c(3),U(e.value.title)}}function To(i,o){if(i&1&&(s(0,"mat-list",1)(1,"p",2),d(2,"Palestras"),r(),E(3,So,6,1,"mat-list-item",null,wo),r()),i&2){let e=x();c(3),w(e.form.presentations.controls)}}var Fn=(()=>{class i{container=m(b);get form(){return this.container.control}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-admin-event-presentations"]],features:[F([],[{provide:b,useFactory:()=>m(b,{skipSelf:!0})}])],decls:2,vars:2,consts:[[3,"formGroup"],["formArrayName","presentations"],["mat-subheader",""],["matListItemIcon","","name","presentation"],["matListItemTitle",""],["type","button","mat-icon-button","","matListItemMeta","",3,"click"],["name","trash"]],template:function(t,n){t&1&&($(0,0),C(1,To,5,0,"mat-list",1),G()),t&2&&(u("formGroup",n.form),c(),P(n.form.presentations.controls.length?1:-1))},dependencies:[S,V,N,ze,ge,fe,he,Ke,_e,de,ue,y,L,I],encapsulation:2,changeDetection:0})}return i})();var ko=(i,o)=>o.value;function Do(i,o){if(i&1){let e=A();s(0,"mat-list-item"),p(1,"devmx-icon",3),s(2,"span",4),d(3),r(),s(4,"button",5),f("click",function(){let n=k(e).$index,a=x(2);return D(a.form.leaders.removeAt(n))}),p(5,"devmx-icon",6),r()()}if(i&2){let e=o.$implicit;c(3),U(e.value.displayName)}}function Po(i,o){if(i&1&&(s(0,"mat-list",1)(1,"p",2),d(2,"L\xEDderes"),r(),E(3,Do,6,1,"mat-list-item",null,ko),r()),i&2){let e=x();c(3),w(e.form.leaders.controls)}}var In=(()=>{class i{container=m(b);get form(){return this.container.control}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-admin-event-leaders"]],features:[F([],[{provide:b,useFactory:()=>m(b,{skipSelf:!0})}])],decls:2,vars:2,consts:[[3,"formGroup"],["formArrayName","leaders"],["mat-subheader",""],["matListItemIcon","","name","user-circle"],["matListItemTitle",""],["type","button","mat-icon-button","","matListItemMeta","",3,"click"],["name","trash"]],template:function(t,n){t&1&&($(0,0),C(1,Po,5,0,"mat-list",1),G()),t&2&&(u("formGroup",n.form),c(),P(n.form.leaders.controls.length?1:-1))},dependencies:[S,V,N,ze,ge,fe,he,Ke,_e,de,ue,y,L,I],encapsulation:2,changeDetection:0})}return i})();var Rn=(()=>{class i{container=m(b);destroyRef=m(Tt);get form(){return this.container.control}state=ae(null);clicked=q();ngAfterViewInit(){this.form.valueChanges.pipe(W(this.destroyRef),Mt(4e3),oe(1)).subscribe(()=>this.onClick())}onClick(){let e=Ct(1e3).pipe(T(1));return this.form.valid?(this.state.set("Salvando..."),this.clicked.emit(this.form.getRawValue()),e.subscribe(()=>this.state.set(null))):(this.form.markAllAsTouched(),e.subscribe(()=>this.state.set(null)))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-auto-save-button"]],outputs:{clicked:"clicked"},features:[F([],[{provide:b,useFactory:()=>m(b,{skipSelf:!0})}])],decls:2,vars:2,consts:[["type","button","mat-flat-button","",3,"click","disabled"]],template:function(t,n){t&1&&(s(0,"button",0),f("click",function(){return n.onClick()}),d(1),r()),t&2&&(u("disabled",n.state()),c(),O(" ",n.state()?n.state():"Salvar"," "))},dependencies:[S,y,ve],encapsulation:2,changeDetection:0})}return i})();var Ao=["panelTemplate"],Vo=(i,o)=>o.value;function No(i,o){if(i&1){let e=A();s(0,"mat-option",3),f("onSelectionChange",function(){let n=k(e).$implicit,a=x(2);return D(a._selectValue(n.value))}),d(1),r()}if(i&2){let e=o.$implicit;u("value",e.value),c(),U(e.label)}}function Lo(i,o){if(i&1&&(s(0,"div",1),E(1,No,2,2,"mat-option",2,Vo),r()),i&2){let e=x();u("id",e.panelId)("@panel",void 0),we("aria-label",e.ariaLabel()||null)("aria-labelledby",e._getAriaLabelledby()),c(),w(e._timeOptions)}}var Bo=[[["","matTimepickerToggleIcon",""]]],$o=["[matTimepickerToggleIcon]"];function Go(i,o){i&1&&(Et(),s(0,"svg",1),p(1,"path",2),r())}var Ho=/^(\d*\.?\d+)\s*(h|hour|hours|m|min|minute|minutes|s|second|seconds)?$/i,Nn=new yt("MAT_TIMEPICKER_CONFIG");function An(i){let o;if(i===null)return null;if(typeof i=="number")o=i;else{if(i.trim().length===0)return null;let e=i.match(Ho),t=e?parseFloat(e[1]):null,n=e?.[2]?.toLowerCase()||null;if(!e||t===null||isNaN(t))return null;n==="h"||n==="hour"||n==="hours"?o=t*3600:n==="m"||n==="min"||n==="minute"||n==="minutes"?o=t*60:o=t}return o}function jo(i,o,e,t,n){let a=[],l=i.compareTime(e,t)<1?e:t;for(;i.sameDate(l,e)&&i.compareTime(l,t)<1&&i.isValid(l);)a.push({value:l,label:i.format(l,o.display.timeOptionLabel)}),l=i.addSeconds(l,n);return a}var ft=(()=>{class i{_overlay=m(Ci);_dir=m(ei,{optional:!0});_viewContainerRef=m(It);_injector=m(wt);_defaultConfig=m(Nn,{optional:!0});_dateAdapter=m(Pe,{optional:!0});_dateFormats=m(pt,{optional:!0});_isOpen=ae(!1);_activeDescendant=ae(null);_input;_overlayRef=null;_portal=null;_optionsCacheKey=null;_localeChanges;_onOpenRender=null;_panelTemplate=re.required("panelTemplate");_timeOptions=[];_options=Rt(le);_keyManager=new Zt(this._options,this._injector).withHomeAndEnd(!0).withPageUpDown(!0).withVerticalOrientation(!0);interval=v(An(this._defaultConfig?.interval||null),{transform:An});options=v(null);isOpen=this._isOpen.asReadonly();selected=q();opened=q();closed=q();activeDescendant=this._activeDescendant.asReadonly();panelId=m(Jt).getId("mat-timepicker-panel-");disableRipple=v(this._defaultConfig?.disableRipple??!1,{transform:Se});ariaLabel=v(null,{alias:"aria-label"});ariaLabelledby=v(null,{alias:"aria-labelledby"});constructor(){m(ye).nativeElement.setAttribute("mat-timepicker-panel-id",this.panelId),this._handleLocaleChanges(),this._handleInputStateChanges(),this._keyManager.change.subscribe(()=>this._activeDescendant.set(this._keyManager.activeItem?.id||null))}open(){if(!this._input||(this._input.focus(),this._isOpen()))return;this._isOpen.set(!0),this._generateOptions();let e=this._getOverlayRef();e.updateSize({width:this._input.getOverlayOrigin().nativeElement.offsetWidth}),this._portal??=new fi(this._panelTemplate(),this._viewContainerRef),e.attach(this._portal),this._onOpenRender?.destroy(),this._onOpenRender=kt(()=>{let t=this._options();this._syncSelectedState(this._input.value(),t,t[0]),this._onOpenRender=null},{injector:this._injector}),this.opened.emit()}close(){this._isOpen()&&(this._isOpen.set(!1),this._overlayRef?.detach(),this.closed.emit())}registerInput(e){this._input&&this._input,this._input=e}ngOnDestroy(){this._keyManager.destroy(),this._localeChanges.unsubscribe(),this._onOpenRender?.destroy(),this._overlayRef?.dispose()}_selectValue(e){this.close(),this.selected.emit({value:e,source:this}),this._input.focus()}_getAriaLabelledby(){return this.ariaLabel()?null:this.ariaLabelledby()||this._input?._getLabelId()||null}_getOverlayRef(){if(this._overlayRef)return this._overlayRef;let e=this._overlay.position().flexibleConnectedTo(this._input.getOverlayOrigin()).withFlexibleDimensions(!1).withPush(!1).withTransformOriginOn(".mat-timepicker-panel").withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-timepicker-above"}]);return this._overlayRef=this._overlay.create({positionStrategy:e,scrollStrategy:this._overlay.scrollStrategies.reposition(),direction:this._dir||"ltr",hasBackdrop:!1}),this._overlayRef.keydownEvents().subscribe(t=>{this._handleKeydown(t)}),this._overlayRef.outsidePointerEvents().subscribe(t=>{let n=Xt(t),a=this._input.getOverlayOrigin().nativeElement;n&&n!==a&&!a.contains(n)&&this.close()}),this._overlayRef}_generateOptions(){let e=this.interval()??1800,t=this.options();if(t!==null)this._timeOptions=t;else{let n=this._dateAdapter,a=this._dateFormats.display.timeInput,l=this._input.min()||n.setTime(n.today(),0,0,0),g=this._input.max()||n.setTime(n.today(),23,59,0),M=e+"/"+n.format(l,a)+"/"+n.format(g,a);M!==this._optionsCacheKey&&(this._optionsCacheKey=M,this._timeOptions=jo(n,this._dateFormats,l,g,e))}}_syncSelectedState(e,t,n){let a=!1;for(let l of t)e&&this._dateAdapter.sameTime(l.value,e)?(l.select(!1),ut(l,"center"),Be(()=>this._keyManager.setActiveItem(l)),a=!0):l.deselect(!1);a||(n?(Be(()=>this._keyManager.setActiveItem(n)),ut(n,"center")):Be(()=>this._keyManager.setActiveItem(-1)))}_handleKeydown(e){let t=e.keyCode;if(t===9)this.close();else if(t===27&&!ct(e))e.preventDefault(),this.close();else if(t===13)e.preventDefault(),this._keyManager.activeItem?this._selectValue(this._keyManager.activeItem.value):this.close();else{let n=this._keyManager.activeItem;this._keyManager.onKeydown(e);let a=this._keyManager.activeItem;a&&a!==n&&ut(a,"nearest")}}_handleLocaleChanges(){this._localeChanges=this._dateAdapter.localeChanges.subscribe(()=>{this._optionsCacheKey=null,this.isOpen()&&this._generateOptions()})}_handleInputStateChanges(){ke(()=>{let e=this._input?.value(),t=this._options();this._isOpen()&&this._syncSelectedState(e,t,null)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["mat-timepicker"]],viewQuery:function(t,n){t&1&&(te(n._panelTemplate,Ao,5),te(n._options,le,5)),t&2&&Ae(2)},inputs:{interval:[1,"interval"],options:[1,"options"],disableRipple:[1,"disableRipple"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"]},outputs:{selected:"selected",opened:"opened",closed:"closed"},exportAs:["matTimepicker"],features:[F([{provide:ii,useExisting:i}])],decls:2,vars:0,consts:[["panelTemplate",""],["role","listbox",1,"mat-timepicker-panel",3,"id"],[3,"value"],[3,"onSelectionChange","value"]],template:function(t,n){t&1&&C(0,Lo,3,4,"ng-template",null,0,jt)},dependencies:[le],styles:["mat-timepicker{display:none}.mat-timepicker-panel{width:100%;max-height:256px;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;border-bottom-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-timepicker-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-timepicker-container-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){.mat-timepicker-panel{outline:solid 1px}}.mat-timepicker-above .mat-timepicker-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small))}.mat-timepicker-input:read-only{cursor:pointer}@media(forced-colors: active){.mat-timepicker-toggle-default-icon{color:CanvasText}}"],encapsulation:2,data:{animation:[Kt("panel",[Wt("void",De({opacity:0,transform:"scaleY(0.8)"})),mt(":enter",[Qt([He("0.03s linear",De({opacity:1})),He("0.12s cubic-bezier(0, 0, 0.2, 1)",De({transform:"scaleY(1)"}))])]),mt(":leave",[He("0.075s linear",De({opacity:0}))])])]},changeDetection:0})}return i})();function ut(i,o){i._getHostElement().scrollIntoView({block:o,inline:o})}var Ln=(()=>{class i{_elementRef=m(ye);_document=m(qt);_dateAdapter=m(Pe,{optional:!0});_dateFormats=m(pt,{optional:!0});_formField=m(oi,{optional:!0});_onChange;_onTouched;_validatorOnChange;_accessorDisabled=ae(!1);_localeSubscription;_timepickerSubscription;_validator;_lastValueValid=!0;_lastValidDate=null;_ariaActiveDescendant=Te(()=>{let e=this.timepicker(),t=e.isOpen(),n=e.activeDescendant();return t&&n?n:null});_ariaExpanded=Te(()=>this.timepicker().isOpen()+"");_ariaControls=Te(()=>{let e=this.timepicker();return e.isOpen()?e.panelId:null});value=At(null);timepicker=v.required({alias:"matTimepicker"});min=v(null,{alias:"matTimepickerMin",transform:e=>this._transformDateInput(e)});max=v(null,{alias:"matTimepickerMax",transform:e=>this._transformDateInput(e)});disabled=Te(()=>this.disabledInput()||this._accessorDisabled());disabledInput=v(!1,{transform:Se,alias:"disabled"});constructor(){this._validator=this._getValidator(),this._respondToValueChanges(),this._respondToMinMaxChanges(),this._registerTimepicker(),this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._hasFocus()||this._formatValue(this.value())}),this.getOverlayOrigin().nativeElement.addEventListener("click",this._handleClick)}writeValue(e){this.value.set(this._dateAdapter.getValidDateOrNull(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._accessorDisabled.set(e)}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._validatorOnChange=e}getOverlayOrigin(){return this._formField?.getConnectedOverlayOrigin()||this._elementRef}focus(){this._elementRef.nativeElement.focus()}ngOnDestroy(){this.getOverlayOrigin().nativeElement.removeEventListener("click",this._handleClick),this._timepickerSubscription?.unsubscribe(),this._localeSubscription.unsubscribe()}_getLabelId(){return this._formField?.getLabelId()||null}_handleClick=()=>{this.timepicker().open()};_handleInput(e){let t=this.value(),n=this._dateAdapter.parseTime(e,this._dateFormats.parse.timeInput),a=!this._dateAdapter.sameTime(n,t);!n||a||e&&!t?this._assignUserSelection(n,!0):this._validatorOnChange?.()}_handleBlur(){let e=this.value();e&&this._isValid(e)&&this._formatValue(e),this._onTouched?.()}_handleKeydown(e){this.timepicker().isOpen()||(e.keyCode===27&&!ct(e)&&this.value()!==null?(e.preventDefault(),this.value.set(null),this._formatValue(null)):(e.keyCode===40||e.keyCode===38)&&!this.disabled()&&(e.preventDefault(),this.timepicker().open()))}_respondToValueChanges(){ke(()=>{let e=this._dateAdapter.deserialize(this.value()),t=this._lastValueValid;this._lastValueValid=this._isValid(e),this._hasFocus()||this._formatValue(e),e&&this._lastValueValid&&(this._lastValidDate=e),t!==this._lastValueValid&&this._validatorOnChange?.()})}_registerTimepicker(){ke(()=>{let e=this.timepicker();e.registerInput(this),e.closed.subscribe(()=>this._onTouched?.()),e.selected.subscribe(({value:t})=>{this._dateAdapter.sameTime(t,this.value())||(this._assignUserSelection(t,!0),this._formatValue(t))})})}_respondToMinMaxChanges(){ke(()=>{this.min(),this.max(),this._validatorOnChange?.()})}_assignUserSelection(e,t){if(e==null||!this._isValid(e))this.value.set(e);else{let n=this._dateAdapter,a=n.getValidDateOrNull(this._lastValidDate||this.value()),l=n.getHours(e),g=n.getMinutes(e),M=n.getSeconds(e);this.value.set(a?n.setTime(a,l,g,M):e)}t&&this._onChange?.(this.value())}_formatValue(e){e=this._dateAdapter.getValidDateOrNull(e),this._elementRef.nativeElement.value=e==null?"":this._dateAdapter.format(e,this._dateFormats.display.timeInput)}_isValid(e){return!e||this._dateAdapter.isValid(e)}_transformDateInput(e){let t=typeof e=="string"?this._dateAdapter.parseTime(e,this._dateFormats.parse.timeInput):this._dateAdapter.deserialize(e);return t&&this._dateAdapter.isValid(t)?t:null}_hasFocus(){return this._document.activeElement===this._elementRef.nativeElement}_getValidator(){return R.compose([()=>this._lastValueValid?null:{matTimepickerParse:{text:this._elementRef.nativeElement.value}},e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this.min();return!n||!t||this._dateAdapter.compareTime(n,t)<=0?null:{matTimepickerMin:{min:n,actual:t}}},e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this.max();return!n||!t||this._dateAdapter.compareTime(n,t)>=0?null:{matTimepickerMax:{max:n,actual:t}}}])}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Ft({type:i,selectors:[["input","matTimepicker",""]],hostAttrs:["role","combobox","type","text","aria-haspopup","listbox",1,"mat-timepicker-input"],hostVars:5,hostBindings:function(t,n){if(t&1&&f("blur",function(){return n._handleBlur()})("input",function(l){return n._handleInput(l.target.value)})("keydown",function(l){return n._handleKeydown(l)}),t&2){let a;Bt("disabled",n.disabled()),we("aria-activedescendant",n._ariaActiveDescendant())("aria-expanded",n._ariaExpanded())("aria-controls",n._ariaControls())("mat-timepicker-id",(a=n.timepicker())==null?null:a.panelId)}},inputs:{value:[1,"value"],timepicker:[1,"matTimepicker","timepicker"],min:[1,"matTimepickerMin","min"],max:[1,"matTimepickerMax","max"],disabledInput:[1,"disabled","disabledInput"]},outputs:{value:"valueChange"},exportAs:["matTimepickerInput"],features:[F([{provide:si,useExisting:i,multi:!0},{provide:li,useExisting:i,multi:!0},{provide:Oi,useExisting:i}])]})}return i})(),ht=(()=>{class i{_defaultConfig=m(Nn,{optional:!0});_defaultTabIndex=(()=>{let e=m(new St("tabindex"),{optional:!0}),t=Number(e);return isNaN(t)?null:t})();timepicker=v.required({alias:"for"});ariaLabel=v(void 0,{alias:"aria-label"});disabled=v(!1,{transform:Se,alias:"disabled"});tabIndex=v(this._defaultTabIndex);disableRipple=v(this._defaultConfig?.disableRipple??!1,{transform:Se});_open(e){this.timepicker()&&!this.disabled()&&(this.timepicker().open(),e.stopPropagation())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["mat-timepicker-toggle"]],hostAttrs:[1,"mat-timepicker-toggle"],hostVars:1,hostBindings:function(t,n){t&1&&f("click",function(l){return n._open(l)}),t&2&&we("tabindex",null)},inputs:{timepicker:[1,"for","timepicker"],ariaLabel:[1,"aria-label","ariaLabel"],disabled:[1,"disabled"],tabIndex:[1,"tabIndex"],disableRipple:[1,"disableRipple"]},exportAs:["matTimepickerToggle"],ngContentSelectors:$o,decls:3,vars:5,consts:[["mat-icon-button","","type","button","aria-haspopup","listbox",3,"disabled","disableRipple"],["height","24px","width","24px","viewBox","0 -960 960 960","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-timepicker-toggle-default-icon"],["d","m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z"]],template:function(t,n){t&1&&($t(Bo),s(0,"button",0),Gt(1,0,null,Go,2,0),r()),t&2&&(u("disabled",n.disabled())("disableRipple",n.disableRipple()),we("aria-label",n.ariaLabel())("aria-expanded",n.timepicker().isOpen())("tabindex",n.disabled()?-1:n.tabIndex()))},dependencies:[L],encapsulation:2,changeDetection:0})}return i})(),Bn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ot({type:i});static \u0275inj=bt({imports:[ft,ht,hi]})}return i})();var it=class extends H{constructor(){super({date:new _,time:new _})}};var $n=(()=>{class i extends Y{elRef;ngControl;get control(){return this.ngControl.control}_adapter=m(Pe);form=new it;constructor(e,t,n){super(e,t,!0),this.elRef=t,this.ngControl=n,this.ngControl.valueAccessor=this,this._adapter.setLocale("pt-BR")}ngAfterViewInit(){this.control.value||this.control.setValue(new Date);let{value:e}=this.control;this.form.setValue({date:e,time:e},{emitEvent:!1});let{date:t,time:n}=this.form.controls;t.valueChanges.subscribe(a=>{let{value:l}=this.control;!a||!l||(l.setDate(a.getDate()),l.setMonth(a.getMonth()),l.setFullYear(a.getFullYear()),this.control.setValue(l))}),n.valueChanges.subscribe(a=>{let{value:l}=this.control;!a||!l||(l.setHours(a.getHours()),l.setMinutes(a.getMinutes()),l.setSeconds(a.getSeconds()),this.control.setValue(l))})}static \u0275fac=function(t){return new(t||i)(Re(Pt),Re(ye),Re(mi,10))};static \u0275cmp=h({type:i,selectors:[["devmx-date-time-picker"]],features:[F([ti()]),Vt],decls:15,vars:5,consts:[["datepicker",""],["timepicker",""],[1,"date-time-picker",3,"formGroup"],[1,"date-picker"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],[1,"time-picker"],["matInput","","formControlName","time",3,"matTimepicker"]],template:function(t,n){if(t&1&&(s(0,"section",2)(1,"mat-form-field",3)(2,"mat-label"),d(3,"Dia"),r(),p(4,"input",4)(5,"mat-datepicker",null,0)(7,"mat-datepicker-toggle",5),r(),s(8,"mat-form-field",6)(9,"mat-label"),d(10,"Hor\xE1rio"),r(),p(11,"input",7)(12,"mat-timepicker",null,1)(14,"mat-timepicker-toggle",5),r()()),t&2){let a=st(6),l=st(13);u("formGroup",n.form),c(4),u("matDatepicker",a),c(3),u("for",a),c(4),u("matTimepicker",l),c(3),u("for",l)}},dependencies:[S,Y,K,V,N,Q,en,Xi,Zi,Ji,Bn,ft,Ln,ht,pe,ce,me,je,xe,Ce],styles:["[_nghost-%COMP%]{display:inline-flex}[_nghost-%COMP%]   .date-time-picker[_ngcontent-%COMP%]{display:inline-flex;flex-flow:row wrap;gap:1em}[_nghost-%COMP%]   .date-time-picker[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]{width:10em}[_nghost-%COMP%]   .date-time-picker[_ngcontent-%COMP%]   .time-picker[_ngcontent-%COMP%]{width:8em}"],changeDetection:0})}return i})();var Gn=(i,o)=>o.value;function qo(i,o){if(i&1&&(s(0,"mat-option",5),d(1),r()),i&2){let e=o.$implicit;u("value",e.value),c(),O(" ",e.viewValue," ")}}function zo(i,o){if(i&1&&(s(0,"mat-option",5),d(1),r()),i&2){let e=o.$implicit;u("value",e.value),c(),O(" ",e.viewValue," ")}}var Hn=(()=>{class i{container=m(b);get form(){return this.container.control}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-admin-event-form"]],features:[F([],[{provide:b,useFactory:()=>m(b,{skipSelf:!0})}])],decls:42,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","title","placeholder","Ex.: 10\xBA Meetup Maring\xE1 Agile"],["formControlName","date"],[1,"event-duration"],["formControlName","duration"],[3,"value"],[1,"event-max"],["matInput","","type","number","min","0","formControlName","maxAttendees"],["matTextSuffix",""],[1,"event-format"],["formControlName","format",3,"selectionChange"],[1,"event-address"],["matInput","","formControlName","address"],[1,"event-link"],["matInput","","type","url","formControlName","link"]],template:function(t,n){t&1&&($(0,0),s(1,"mat-form-field")(2,"mat-label"),d(3,"Qual nome ou t\xEDtulo do evento?"),r(),p(4,"input",1),s(5,"mat-error"),d(6,"Obrigat\xF3rio"),r()(),s(7,"div"),p(8,"devmx-date-time-picker",2),s(9,"mat-form-field",3)(10,"mat-label"),d(11,"Dura\xE7\xE3o"),r(),s(12,"mat-select",4),E(13,qo,2,2,"mat-option",5,Gn),r(),s(15,"mat-error"),d(16,"Obrigat\xF3rio"),r()(),s(17,"mat-form-field",6)(18,"mat-label"),d(19,"M\xE1ximo de"),r(),p(20,"input",7),s(21,"span",8),d(22,"pessoas"),r()()(),s(23,"div")(24,"mat-form-field",9)(25,"mat-label"),d(26,"Formato"),r(),s(27,"mat-select",10),f("selectionChange",function(){return n.form.onFormatChange(n.form.format.value)}),E(28,zo,2,2,"mat-option",5,Gn),r(),s(30,"mat-error"),d(31,"Obrigat\xF3rio"),r()(),s(32,"mat-form-field",11)(33,"mat-label"),d(34,"Endere\xE7o"),r(),p(35,"input",12),r(),s(36,"mat-form-field",13)(37,"mat-label"),d(38,"Link"),r(),p(39,"input",14),s(40,"mat-error"),d(41,"Obrigat\xF3rio"),r()()(),G()),t&2&&(u("formGroup",n.form),c(13),w(n.form.durations),c(15),w(n.form.formats))},dependencies:[S,Y,ci,K,V,pi,N,Q,pe,ce,me,ni,je,xe,Ce,bi,Mi,le,$n],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:2em}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{gap:2em;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   div[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .event-duration[_ngcontent-%COMP%]{max-width:8em}[_nghost-%COMP%]   .event-max[_ngcontent-%COMP%]{max-width:10em}[_nghost-%COMP%]   .event-format[_ngcontent-%COMP%]{max-width:9em}[_nghost-%COMP%]   .event-address[_ngcontent-%COMP%]{flex:2}[_nghost-%COMP%]   .event-link[_ngcontent-%COMP%]{width:18em}"],changeDetection:0})}return i})();var _t=class extends H{constructor(o){super({id:new _("",{nonNullable:!0,validators:[R.required]}),title:new _("",{nonNullable:!0,validators:[R.required]}),description:new _("",{nonNullable:!0}),cover:new _("",{nonNullable:!0})}),o&&this.patchValue(o)}},nt=class extends Ye{constructor(){super([])}add(o){this.push(new _t(o))}};var gt=class extends H{get name(){return this.controls.name.value}constructor(o){super({id:new _("",{nonNullable:!0,validators:[R.required]}),name:new _("",{nonNullable:!0,validators:[R.required]}),displayName:new _("",{nonNullable:!0,validators:[R.required]})}),o&&this.patchValue(o)}},ot=class extends Ye{constructor(){super([])}add(o){this.push(new gt(o))}};function jn(i,o,e){let t=gi(i,e?.in);return isNaN(o)?_i(e?.in||i,NaN):(o&&t.setDate(t.getDate()+o),t)}var at=class i extends H{formats=[{value:"in-person",viewValue:"Presencial"},{value:"mixed",viewValue:"H\xEDbrido"},{value:"online",viewValue:"Online"}];durations=ai.map(o=>({value:o,viewValue:o}));static date=jn(new Date,10);constructor(){super({id:new _("",{nonNullable:!0}),title:new _("",{nonNullable:!0,validators:[R.required]}),date:new _(i.date,{nonNullable:!0,validators:[R.required],updateOn:"blur"}),time:new _("",{nonNullable:!0,validators:[R.required]}),duration:new _("2h",{nonNullable:!0}),maxAttendees:new _(0,{nonNullable:!0}),description:new _("",{nonNullable:!0}),presentations:new nt,leaders:new ot,format:new _("",{nonNullable:!0}),address:new _("",{nonNullable:!0}),link:new _("",{nonNullable:!0}),visible:new _(!0,{nonNullable:!0})}),this.controls.link?.disable()}get format(){return this.controls.format}get presentations(){return this.controls.presentations}get leaders(){return this.controls.leaders}patch(o){if(this.patchValue(o),o.presentations){this.presentations.clear();for(let e of o.presentations)this.presentations.add(e)}if(o.leaders){this.leaders.clear();for(let e of o.leaders)this.leaders.add(e)}}onFormatChange(o=""){o==="in-person"&&(this.controls.address?.enable(),this.controls.link?.disable()),o==="online"&&(this.controls.address?.disable(),this.controls.link?.enable()),o==="mixed"&&(this.controls.link?.enable(),this.controls.address?.enable())}};var Un=(()=>{class i{route=m(se);cdr=m(Ut);eventFacade=m(X);messageService=m(xi);searchLeaders=m(Oe);selectPresentation=m(Hi);selectUser=m(Oe);form=new at;constructor(){this.route.data.pipe(W()).subscribe(({event:e})=>{if(e&&e.id&&(this.form.patch(e),this.form.onFormatChange(e.format),e.date)){let t=new Date(e.date);this.form.patchValue({date:t})}})}selectPresentations(){this.selectPresentation.open({multiple:!0}).pipe(T(1)).subscribe(t=>{if(t){for(let n of t)this.form.presentations.add(n);this.cdr.detectChanges()}})}selectLeaders(){this.selectUser.open({multiple:!0,onlyRole:"leader"}).pipe(T(1)).subscribe(t=>{if(t){for(let n of t)this.form.leaders.add(n);this.cdr.detectChanges()}})}onSubmit(){if(this.form.valid){let e=this.form.getRawValue();return e.id?this.eventFacade.update(e):this.eventFacade.create(e),this.messageService.open({message:"Armazenando informa\xE7\xF5es"})}return this.form.markAllAsTouched()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-admin-event"]],decls:22,vars:4,consts:[["id","event",3,"formGroup"],["mat-stretch-tabs","","dynamicHeight","",1,"event-tab"],["label","Evento"],[1,"event-tab-content"],["label","Detalhes"],["label","Descreva o evento","hint","Compat\xEDvel com markdown do Github","formControlName","description",3,"minRows","maxRows"],[3,"content"],["label","Organizadores"],["type","button","mat-button","",3,"click"],["label","Apresenta\xE7\xF5es"],[1,"event-footer"],[3,"clicked"]],template:function(t,n){if(t&1&&(s(0,"form",0)(1,"mat-tab-group",1)(2,"mat-tab",2)(3,"section",3),p(4,"devmx-admin-event-form"),r()(),s(5,"mat-tab",4)(6,"section",3)(7,"devmx-markdown-toolbar"),p(8,"devmx-markdown-editor",5)(9,"devmx-markdown-view",6),r()()(),s(10,"mat-tab",7)(11,"section",3),p(12,"devmx-admin-event-leaders"),s(13,"button",8),f("click",function(){return n.selectLeaders()}),d(14," Adicionar outras pessoas "),r()()(),s(15,"mat-tab",9)(16,"section",3),p(17,"devmx-admin-event-presentations"),s(18,"button",8),f("click",function(){return n.selectPresentations()}),d(19," Procure por conte\xFAdos "),r()()()(),s(20,"footer",10)(21,"devmx-auto-save-button",11),f("clicked",function(){return n.onSubmit()}),r()()()),t&2){let a;u("formGroup",n.form),c(8),u("minRows",20)("maxRows",40),c(),u("content",(a=n.form.value.description)!==null&&a!==void 0?a:"")}},dependencies:[S,qe,K,V,N,Q,Ki,Yi,Qi,Fn,Rn,In,Hn,y,ve,zi,Ui,qi,Xe],styles:["[_nghost-%COMP%]{padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{gap:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .event-tab[_ngcontent-%COMP%]{border-radius:.8em;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .event-tab-content[_ngcontent-%COMP%]{padding:2em 1em}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .event-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return i})();var Mm=[{path:"",data:{breadcrumb:"Administra\xE7\xE3o"},providers:kn,component:gn,children:[{path:"meus-eventos/novo",data:{breadcrumb:"Novo"},title:"Novo evento"},{path:"meus-eventos/:id",data:{breadcrumb:i=>i.event.title},title:"Meu evento",resolve:{event:Dn},component:Un},{path:"meus-eventos",data:{breadcrumb:"Meus eventos"},title:"Meus eventos",component:On},{path:"gerenciar-eventos",data:{breadcrumb:"Gerenciar eventos"},title:"Gerenciar eventos",canActivate:[nn("director","manager","staff")],component:Pn},{path:"",pathMatch:"prefix",redirectTo:"meus-eventos"}]}];export{gn as EventFeatureAdminComponent,Mm as eventFeatureAdminRoutes};
