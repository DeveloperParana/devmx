import{a as De}from"./chunk-6STDPPRP.js";import{a as Ee}from"./chunk-KAZRQD4G.js";import"./chunk-ZQOXWN4S.js";import{a as W}from"./chunk-AD4TXQD3.js";import{h as Qe}from"./chunk-JX4IWPKV.js";import"./chunk-XC6WES62.js";import{b as Me}from"./chunk-RRBYVHNZ.js";import{a as Q}from"./chunk-ZHS65JNW.js";import{c as Se}from"./chunk-VYHC3V3G.js";import"./chunk-3I45H2NO.js";import"./chunk-R66KDUEB.js";import"./chunk-MLNPCJDD.js";import{a as Ae,b as Ve,c as $e,d as Ne}from"./chunk-F2GYQZHU.js";import"./chunk-UOTKRQ63.js";import"./chunk-BJXILAOS.js";import{a as Be}from"./chunk-AC7KYN3P.js";import"./chunk-3SNV2MVI.js";import"./chunk-2IAXMR6M.js";import{c as w,d as Pe,g as Fe}from"./chunk-F7T7LXKS.js";import"./chunk-XIUDFJWJ.js";import{a as z}from"./chunk-TZR6QHL3.js";import"./chunk-5DAHKZ7F.js";import{a as E}from"./chunk-A3N3AUUJ.js";import{C as ge,G as xe,H as ye,I as D}from"./chunk-4FWBEGAE.js";import{b as ze,c as Ue,g as je,h as Ge,i as He,j as qe}from"./chunk-WKFC47QM.js";import"./chunk-HGOTYYGI.js";import"./chunk-2K6IALUF.js";import{g as A,i as V,j as $,p as S}from"./chunk-KXTQ2UTD.js";import"./chunk-I7VYXJU2.js";import{a as de,d as ue,e as ve,f as fe,g as _e,i as Ce,l as he}from"./chunk-PAP2P7QR.js";import{a as we,b as be,c as Oe,d as Te,f as Ie,g as ke,h as Le,i as Re}from"./chunk-EC6LD5KM.js";import{a as N,h as re,i as me,m as se,p as le,s as ce,x as pe}from"./chunk-EDIJ2EBQ.js";import"./chunk-W5KNOAKV.js";import{$b as P,Ba as K,F as T,Fb as ee,Ha as X,Hc as M,Ia as G,Jc as v,Kc as C,Lc as q,Nb as f,Ob as H,Pb as te,Rb as ne,Tb as l,Yb as _,Yd as ie,_b as L,ac as F,ba as J,bc as o,cc as r,dc as s,gb as b,hc as R,je as oe,ka as p,kc as y,lb as i,mc as u,pe as ae,t as j,ta as I,u as Y,ua as k,ub as h,xb as Z,xc as c,yc as g,zc as B}from"./chunk-TEKHUYWQ.js";var We=(()=>{class e{router=p(V);destroyRef=p(K);authFacade=p(z);layoutFacade=p(Me);ngOnInit(){this.authFacade.auth$.pipe(E(this.destroyRef)).subscribe(t=>{t&&(this.layoutFacade.loadNavLinks(t.roles),this.waitingForLogout())}),this.authFacade.load()}waitingForLogout(){this.authFacade.auth$.pipe(E(this.destroyRef)).subscribe(t=>{t===null&&(this.layoutFacade.resetNavLinks(),this.router.navigateByUrl("/conta/autenticacao"))})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=h({type:e,selectors:[["devmx-event-feature-shell"]],decls:1,vars:0,template:function(a,n){a&1&&s(0,"devmx-layout")},dependencies:[S,Ee],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var Ye=e=>Fe(p(w),e.params);var Je=(()=>{class e{transform(t){switch(t){case"in-person":return"Presencial";case"online":return"Online";case"mixed":return"H\xEDbrido"}}static \u0275fac=function(a){return new(a||e)};static \u0275pipe=Z({name:"eventFormat",type:e,pure:!0})}return e})();var at=e=>["/","evento",e];function rt(e,m){if(e&1&&s(0,"img",7),e&2){let t=u();l("src",t.cover,b)("alt",t.title)}}function mt(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"devmx-icon",16),o(2,"div",9),c(3),r()()),e&2){let t=u();i(3),g(t.address)}}function st(e,m){if(e&1&&s(0,"devmx-maps-button",18),e&2){let t=u();l("data",t)}}function lt(e,m){if(e&1&&s(0,"devmx-youtube-button",19),e&2){let t=u();l("data",t)}}function ct(e,m){if(e&1&&(o(0,"mat-card-content",12),s(1,"devmx-calendar-button",17),f(2,st,1,1,"devmx-maps-button",18),v(3,"showEventAddress"),f(4,lt,1,1,"devmx-youtube-button",19),v(5,"showEventLink"),s(6,"devmx-whats-app-button",20),r()),e&2){let t=m;i(),l("data",t),i(),_(C(3,4,t.format)&&t.address?2:-1),i(2),_(C(5,6,t.format)&&t.link?4:-1),i(2),l("data",t)}}function pt(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"devmx-icon",22),o(2,"div",9),c(3),r()()),e&2){let t=m.$implicit;i(3),g(t.title)}}function dt(e,m){if(e&1&&(o(0,"mat-list")(1,"h3",21),c(2,"Apresenta\xE7\xF5es"),r(),P(3,pt,4,1,"mat-list-item",null,L),r()),e&2){let t=u();i(3),F(t.presentations)}}function ut(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"img",23),v(2,"photo"),o(3,"div",9),c(4),r()()),e&2){let t=m.$implicit;i(),l("src",C(2,3,t==null||t.profile==null?null:t.profile.photo),b)("alt",t.displayName),i(3),g(t.displayName)}}function vt(e,m){if(e&1&&(o(0,"mat-list")(1,"h3",21),c(2,"Organizadores"),r(),P(3,ut,5,5,"mat-list-item",null,L),r()),e&2){let t=u();i(3),F(t.leaders)}}function ft(e,m){if(e&1&&(o(0,"mat-list-item"),s(1,"img",23),v(2,"photo"),o(3,"div",9),c(4),r()()),e&2){let t=m.$implicit;i(),l("src",C(2,3,t.user.profile==null?null:t.user.profile.photo),b)("alt",t.user.displayName),i(3),g(t.user.displayName)}}function _t(e,m){if(e&1){let t=R();o(0,"form",24)(1,"devmx-rsvp-button",25),y("statusChange",function(){I(t);let n=u(2);return k(n.onStatusChange())}),r()(),o(2,"mat-list")(3,"h3",21),c(4,"Presen\xE7as"),r(),P(5,ft,5,5,"mat-list-item",null,L),r()}if(e&2){let t=u(2);l("formGroup",t.rsvpForm),i(5),F(m)}}function Ct(e,m){if(e&1&&(o(0,"mat-card",0)(1,"mat-card-header",1)(2,"a",2),s(3,"devmx-icon",3),r(),o(4,"mat-card-title",4),c(5),r(),o(6,"a",5),s(7,"devmx-icon",6),r()(),f(8,rt,1,2,"img",7),o(9,"mat-list")(10,"mat-list-item"),s(11,"devmx-icon",8),o(12,"div",9),c(13),v(14,"eventFormat"),r()(),o(15,"mat-list-item"),s(16,"devmx-icon",10),o(17,"div",9),c(18),v(19,"date"),r()(),o(20,"mat-list-item"),s(21,"devmx-icon",11),o(22,"div",9),c(23),v(24,"date"),r()(),f(25,mt,4,1,"mat-list-item"),r(),f(26,ct,7,8,"mat-card-content",12),v(27,"async"),o(28,"mat-card-content"),s(29,"devmx-markdown-view",13),o(30,"a",14),c(31," Ir para p\xE1gina do evento "),r()(),f(32,dt,5,0,"mat-list")(33,vt,5,0,"mat-list")(34,_t,7,1),v(35,"async"),o(36,"mat-card-header"),s(37,"img",15),v(38,"photo"),o(39,"mat-card-title"),c(40),r(),o(41,"mat-card-subtitle"),c(42," Organizador "),r()()()),e&2){let t,a,n=m,d=u();i(5),B(" ",n.title," "),i(3),_(n.cover?8:-1),i(5),g(C(14,15,n.format)),i(5),g(q(19,17,n.date,"shortDate")),i(5),B("",q(24,20,n.date,"shortTime"),"h"),i(2),_(n.address?25:-1),i(),_((t=C(27,23,d.eventFacade.page$))?26:-1,t),i(3),l("content",n.description),i(),l("routerLink",M(29,at,n.id)),i(2),_(n.presentations.length?32:-1),i(),_(n.leaders.length?33:-1),i(),_((a=C(35,25,d.rsvpFacade.response$))?34:-1,a),i(3),l("src",C(38,27,n.owner.profile==null?null:n.owner.profile.photo),b)("alt",n.owner.displayName),i(3),B(" ",n.owner.displayName," ")}}var Ke=(()=>{class e{route=p(A);rsvpForm=new qe;authFacade=p(z);eventFacade=p(w);rsvpFacade=p(Pe);event$=this.route.data.pipe(T(t=>"event"in t),j(t=>t.event),J(t=>this.setRSVPEvent(t.id)));constructor(){let t=this.authFacade.auth$.pipe(T(n=>!!n),j(n=>n.id)),a=this.rsvpFacade.response$.pipe(T(n=>n.length>0));Y([t,a]).pipe(E()).subscribe(([n,d])=>{let x=d.find(U=>U.user.id===n);x&&this.setRSVPStatus(x)})}setRSVPEvent=t=>{this.rsvpForm.patchValue({event:t}),this.rsvpFacade.loadConfirmed(t)};setRSVPStatus({status:t}){this.rsvpForm.patchValue({status:t},{emitEvent:!1})}onStatusChange(){this.rsvpForm.valid&&this.rsvpFacade.create(this.rsvpForm.getRawValue())}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=h({type:e,selectors:[["devmx-event-details"]],decls:2,vars:3,consts:[[1,"event-card"],[1,"event-card-header","sticky"],["mat-card-avatar","","routerLink","..","mat-icon-button",""],["name","arrow/left"],[1,"event-card-header-title"],["routerLink","..","mat-icon-button",""],["name","close-cross"],["mat-card-image","",3,"src","alt"],["matListItemIcon","","name","transport/flag-pin"],["matListItemTitle",""],["matListItemIcon","","name","calendar"],["matListItemIcon","","name","alarm-clock-alert"],[1,"event-card-buttons"],[3,"content"],["mat-raised-button","",3,"routerLink"],["mat-card-avatar","",3,"src","alt"],["matListItemIcon","","name","transport/map-pin"],["text","Definir lembrete",3,"data"],["text","Ver no mapa",3,"data"],["text","Assistir",3,"data"],["text","Compartilhar",3,"data"],["mat-subheader",""],["matListItemIcon","","name","presentation"],["matListItemAvatar","",3,"src","alt"],[1,"rsvp-button",3,"formGroup"],["formControlName","status",3,"statusChange"]],template:function(a,n){if(a&1&&(f(0,Ct,43,31,"mat-card",0),v(1,"async")),a&2){let d;_((d=C(1,1,n.event$))?0:-1,d)}},dependencies:[S,$,pe,se,re,me,le,ce,Ue,Ve,$e,Ae,Ne,Re,we,Le,Oe,Ie,ke,Te,be,he,fe,_e,ue,ve,Ce,de,D,ge,ye,N,Je,Be,je,Ge,De,oe,ae],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 16px;font-size:1.2em;font-weight:500;opacity:.6}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.2em;word-wrap:break-word}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]   .mat-mdc-card-avatar[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .event-card-buttons[_ngcontent-%COMP%]{gap:1em;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .rsvp-button[_ngcontent-%COMP%]{padding:1em}"],changeDetection:0})}return e})();var Xe=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275cmp=h({type:e,selectors:[["devmx-event-home"]],decls:0,vars:0,template:function(a,n){},dependencies:[D,Qe],encapsulation:2,changeDetection:0})}return e})();var Ze=(()=>{class e{ascText=G("");descText=G("");sortChange=X();current=ee("asc");toggle(){this.current()==="asc"?this.current.set("desc"):this.current.set("asc"),this.sortChange.emit(this.current())}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=h({type:e,selectors:[["devmx-sort-direction"]],inputs:{ascText:[1,"ascText"],descText:[1,"descText"]},outputs:{sortChange:"sortChange"},exportAs:["sortDirection"],decls:4,vars:2,consts:[["mat-icon-button","",3,"click","ngClass"],["name","arrow/up"]],template:function(a,n){a&1&&(o(0,"span"),c(1),r(),o(2,"button",0),y("click",function(){return n.toggle()}),s(3,"devmx-icon",1),r()),a&2&&(i(),g(n.current()==="asc"?n.ascText():n.descText()),i(),l("ngClass",n.current()))},dependencies:[D,xe,N,ie],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{transition:transform .6s cubic-bezier(.175,.885,.32,1.275)}[_nghost-%COMP%]   button.asc[_ngcontent-%COMP%]{transform:rotate(-360deg)}[_nghost-%COMP%]   button.desc[_ngcontent-%COMP%]{transform:rotate(540deg)}"]})}return e})();var ht=(e,m)=>m.id,gt=()=>[Se,Q,import("./chunk-QQ3DFMVY.js").then(e=>e.AsyncPipe)],xt=()=>[He,$],yt=e=>[e],Mt=e=>({right:e}),Et=e=>({outlets:e}),Pt=e=>["/","eventos",e];function Ft(e,m){if(e&1&&(o(0,"a",5),s(1,"devmx-event-card",6),r()),e&2){let t=u().$implicit;l("routerLink",M(8,Pt,M(6,Et,M(4,Mt,M(2,yt,t.id))))),i(),l("data",t)}}function St(e,m){e&1&&s(0,"devmx-skeleton",7),e&2&&l("rows",3)}function Dt(e,m){e&1&&(f(0,Ft,2,10)(1,St,1,1),H(2,0,xt,null,1),ne(0,-1))}function wt(e,m){if(e&1){let t=R();o(0,"div",2),P(1,Dt,4,0,null,null,ht),r(),s(3,"div",3),o(4,"footer")(5,"devmx-paginator",4),y("pageChange",function(n){I(t);let d=u(2);return k(d.onPageChange(n))}),r()()}if(e&2){let t=m;i(),F(t.data),i(4),l("size",10)("items",t.items)}}function bt(e,m){if(e&1&&(f(0,wt,6,2),v(1,"async")),e&2){let t,a=u();_((t=C(1,1,a.eventFacade.response$))?0:-1,t)}}function Ot(e,m){e&1&&(o(0,"div",2),s(1,"devmx-skeleton",7)(2,"devmx-skeleton",7)(3,"devmx-skeleton",7),r()),e&2&&(i(),l("rows",3),i(),l("rows",2),i(),l("rows",3))}var et=(()=>{class e{router=p(V);route=p(A);eventFacade=p(w);constructor(){this.route.queryParams.pipe(E()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{title:a="",format:n="",date:d="asc"}=t,{page:x=0,size:U=10}=t,tt={title:a,format:n},nt={date:d};this.eventFacade.setParams({page:x,size:U,filter:tt,sort:nt}),this.eventFacade.load()};onFilterChange(t){let a={format:t};this.router.navigate([],{queryParams:a})}onSortChange(t){let a={date:t};this.router.navigate([],{queryParams:a})}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=h({type:e,selectors:[["devmx-events"]],decls:7,vars:0,consts:[[3,"filterChange"],[3,"sortChange"],[1,"events-container"],[1,"spacer"],[3,"pageChange","size","items"],[3,"routerLink"],[1,"event-card",3,"data"],[3,"rows"]],template:function(a,n){a&1&&(o(0,"header")(1,"devmx-event-filter",0),y("filterChange",function(x){return n.onFilterChange(x)}),r(),o(2,"devmx-sort-direction",1),y("sortChange",function(x){return n.onSortChange(x)}),r()(),f(3,bt,2,3)(4,Ot,4,3),H(5,3,gt,null,4),te(500))},dependencies:[ze,Ze,Q,S],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;padding:.4em .8em}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return e})();var Hn=[{path:"",data:{breadcrumb:"Eventos"},canActivate:[W("member")],component:We,children:[{path:"administracao",canActivate:[W("leader","director","manager","staff")],loadChildren:()=>import("./chunk-GPXBXPIB.js").then(e=>e.eventFeatureAdminRoutes)},{path:"",title:"Eventos",component:et},{path:":id",data:{breadcrumb:e=>e.event.title},title:"Evento",resolve:{event:Ye},component:Ke,outlet:"right"},{path:"",component:Xe}]}];export{We as EventFeatureShellComponent,Hn as eventFeatureShellRoutes};
