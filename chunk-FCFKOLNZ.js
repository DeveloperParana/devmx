import{B as T,a as B,b as D,d as M,e as C,g as i,j as $,k as g,o as A,u as b,v as O}from"./chunk-DRS6KPFN.js";import{F as c,L as p,O as a,a as V,b as F,ba as U,t as E}from"./chunk-D2BDYEBL.js";var Z=Math.pow(10,8)*24*60*60*1e3,ve=-Z;var q=6e4;var ee=3600;var w=ee*24,me=w*7,te=w*365.2425,re=te/12,fe=re*3,y=Symbol.for("constructDateFrom");function k(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&y in t?t[y](e):t instanceof Date?new t.constructor(e):new Date(e)}function H(t,e){return k(e||t,t)}function W(t,e,r){let n=H(t,r?.in);return n.setTime(n.getTime()+e*q),n}function Y(t){let e=new Date(t.date??""),r=$(t.duration??"2h"),n=W(e,r);return F(V({},t),{start:e,end:n})}var j=t=>{switch(t){case"in-person":return"OfflineEventAttendanceMode";case"online":return"OnlineEventAttendanceMode";case"mixed":default:return"MixedEventAttendanceMode"}};function L(t){return{"@context":"https://schema.org","@type":"Event",name:t.title,description:g(t.description??""),startDate:`${t.start}`,endDate:`${t.end}`,eventAttendanceMode:j(t.format),eventSchedule:[{"@type":"Schedule"}]}}var o=class extends B{};var d=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.create(e)}};var u=class{eventService;constructor(e){this.eventService=e}execute({event:e,status:r}){return this.eventService.createRSVP(e,r)}};var v=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.delete(e)}};var m=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findAll(e)}};var f=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findOne(e)}};var x=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.find(e)}};var l=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findRSVPByEvent(e)}};var h=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.findRSVPConfirmedByEvent(e)}};var S=class{eventService;constructor(e){this.eventService=e}execute(e){return this.eventService.update(e.id,e)}};var P=class extends T{createEventUseCase;findEventsUseCase;findAllEventsUseCase;findEventByIDUseCase;updateEventUseCase;deleteEventUseCase;page$=this.select(e=>e.selected).pipe(c(e=>!!e),E(e=>Y(e)));schema$=this.page$.pipe(E(e=>L(e)));constructor(e,r,n,s,N,X){super({response:{data:[],items:0,pages:0},params:{page:0,size:10,filter:{title:"",format:""},sort:{date:"asc"}},selected:null}),this.createEventUseCase=e,this.findEventsUseCase=r,this.findAllEventsUseCase=n,this.findEventByIDUseCase=s,this.updateEventUseCase=N,this.deleteEventUseCase=X}load(){this.onLoad(this.findEventsUseCase.execute(this.state.params))}loadAll(){this.onLoad(this.findAllEventsUseCase.execute(this.state.params))}loadOne(e){this.onLoadOne(this.findEventByIDUseCase.execute(e))}create(e){let r=this.createEventUseCase.execute(e),n=s=>this.setState({selected:s});return r.pipe(p(1),U(n))}update(e){let r=this.updateEventUseCase.execute(e),n=s=>this.setState({selected:s});return r.pipe(p(1),U(n))}delete(e){this.onDelete(this.deleteEventUseCase.execute(e))}};function Q(){return C(P,[d,x,m,f,S,v])}var I=class extends b{createRSVPUseCase;findRSVPByEventUseCase;findRSVPConfirmedByEventUseCase;response$=this.select(e=>e.response);constructor(e,r,n){super({response:[]}),this.createRSVPUseCase=e,this.findRSVPByEventUseCase=r,this.findRSVPConfirmedByEventUseCase=n}load(e){let r=this.findRSVPByEventUseCase.execute(e),n=s=>{this.setState({response:s})};r.pipe(p(1)).subscribe(n)}loadConfirmed(e){let r=this.findRSVPConfirmedByEventUseCase.execute(e),n=s=>{this.setState({response:s})};r.pipe(p(1)).subscribe(n)}create(e){this.createRSVPUseCase.execute(e).pipe(p(1)).subscribe(()=>this.loadConfirmed(e.event))}};function z(){return C(I,[u,l,h])}function _(){return[Q(),z()]}var R=class extends O{findAll(e){let r=[`${this.url}/all`,A(e)];return this.http.get(r.join("?"))}createRSVP(e,r){let n=[this.url,e,"rsvps"];return this.http.post(n.join("/"),{status:r})}findRSVPByEvent(e){let r=[this.url,e,"rsvps"];return this.http.get(r.join("/"))}findRSVPConfirmedByEvent(e){let r=[this.url,e,"rsvps","confirmed"];return this.http.get(r.join("/"))}};function G(){return{provide:o,useFactory(t,e){return new R(t,e,"events")},deps:[M,D]}}function J(){return[G()]}function ne(){return i(d,[o])}function oe(){return i(x,[o])}function se(){return i(m,[o])}function ie(){return i(f,[o])}function ce(){return i(S,[o])}function pe(){return i(v,[o])}function ae(){return i(u,[o])}function de(){return i(l,[o])}function ue(){return i(h,[o])}function K(){return[ne(),oe(),se(),ie(),ce(),pe(),ae(),de(),ue()]}function Ht(){return[...J(),...K(),..._()]}var jt=(t,e)=>(t.loadOne(e.id),t.page$.pipe(a(),c(r=>!!r)));var zt=(t,e)=>(t.loadOne(e.id),t.selected$.pipe(a(),c(r=>!!r)));var Jt=(t,e)=>(t.loadOne(e.id),t.schema$.pipe(a(),c(r=>!!r)));export{k as a,H as b,P as c,I as d,Ht as e,jt as f,zt as g,Jt as h};
