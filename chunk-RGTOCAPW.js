import{a as Q,b as q,d as G,e as J}from"./chunk-JT2DD3I4.js";import{b as X,c as Y,d as Z,e as ee}from"./chunk-24EKWAM7.js";import{b as U}from"./chunk-TJC2M7GG.js";import{a as K}from"./chunk-2IAXMR6M.js";import{s as j,u as N}from"./chunk-CVM2AHGP.js";import{c as W}from"./chunk-NQHJHN2L.js";import{a as A,c as g,g as D,h as z,l as B,o as L,x as $}from"./chunk-EDIJ2EBQ.js";import{b as S,d as I,i as V,j as H}from"./chunk-QOJBU3AI.js";import{Gb as b,Ia as u,Ja as M,Jc as F,Kb as w,Kc as R,Nb as x,Tb as h,bc as n,cc as l,dc as r,fb as _,hc as E,kc as f,lb as m,mb as d,sb as v,ta as c,ua as p,ub as y,uc as T,vc as O,xc as C,yc as P,zc as k}from"./chunk-TEKHUYWQ.js";var re=["textareaRef"];function ae(o,te){o&1&&r(0,"devmx-icon",12)}function le(o,te){o&1&&r(0,"devmx-icon",13)}var Ie=(()=>{class o extends g{ngControl;textareaRef=b("textareaRef");label=u("");hint=u("");autofocus=u();get autofocusEnabled(){return this.autofocus()||this.autofocus()===""}get textarea(){let t=this.textareaRef();return t?t.nativeElement:null}get control(){return this.ngControl?this.ngControl.control:new B}constructor(t,i,e){super(t,i,!0),this.ngControl=e,this.ngControl&&(this.ngControl.valueAccessor=this)}get previewHTML(){return K(this.control.value??"",{gfm:!0,async:!1})}applyFormat(t,i=t){if(!this.textarea)return;let e=this.textarea.selectionStart,a=this.textarea.selectionEnd,s=this.control.value.slice(e,a),ie=this.control.value.slice(0,e),oe=this.control.value.slice(a),ne=`${ie}${t}${s}${i}${oe}`;this.control.setValue(ne),queueMicrotask(()=>{this.textarea&&(this.textarea.setSelectionRange(e+t.length,a+t.length),this.textarea.focus())})}applyBold(){this.applyFormat("**")}applyItalic(){this.applyFormat("_")}applyCode(){this.applyFormat("`")}static \u0275fac=function(i){return new(i||o)(d(v),d(M),d(D,10))};static \u0275cmp=y({type:o,selectors:[["devmx-editor"]],viewQuery:function(i,e){i&1&&T(e.textareaRef,re,5),i&2&&O()},inputs:{label:[1,"label"],hint:[1,"hint"],autofocus:[1,"autofocus"]},features:[w],decls:22,vars:7,consts:[["textareaRef",""],["dynamicHeight",""],["mat-tab-label",""],[1,"editor-textarea"],[1,"secondary-container-background"],["type","button","mat-icon-button","",3,"click"],["name","text/bold"],["name","text/italic"],["name","software/code"],[1,"editor-text-field"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","8","cdkAutosizeMaxRows","16",3,"formControl","autofocus"],[1,"editor-preview",3,"innerHTML"],["name","software/edit"],["name","text/layout"]],template:function(i,e){if(i&1){let a=E();n(0,"mat-tab-group",1)(1,"mat-tab"),x(2,ae,1,0,"ng-template",2),n(3,"div",3)(4,"menu",4)(5,"button",5),f("click",function(){return c(a),p(e.applyBold())}),r(6,"devmx-icon",6),l(),n(7,"button",5),f("click",function(){return c(a),p(e.applyItalic())}),r(8,"devmx-icon",7),l(),n(9,"button",5),f("click",function(){return c(a),p(e.applyCode())}),r(10,"devmx-icon",8),l()(),n(11,"mat-form-field",9)(12,"mat-label"),C(13),l(),r(14,"textarea",10,0),n(16,"mat-hint"),C(17),l()()()(),n(18,"mat-tab"),x(19,le,1,0,"ng-template",2),r(20,"div",11),F(21,"safeHtml"),l()()}i&2&&(m(13),P(e.label()),m(),h("formControl",e.control)("autofocus",e.autofocusEnabled),m(3),k(" ",e.hint()," "),m(3),h("innerHTML",R(21,5,e.previewHTML),_))},dependencies:[$,g,z,L,H,V,S,I,W,q,Q,J,G,N,j,ee,X,Y,Z,A,U],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .editor-textarea[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative}[_nghost-%COMP%]   .editor-textarea[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%]{top:.6em;display:flex;position:absolute;z-index:1000;opacity:.4;right:0;padding:0;margin:0;border-bottom-left-radius:16px;transition:opacity .3s ease-in-out}[_nghost-%COMP%]   .editor-textarea[_ngcontent-%COMP%]   menu[_ngcontent-%COMP%]:hover{opacity:1}[_nghost-%COMP%]   .editor-textarea[_ngcontent-%COMP%]   .editor-text-field[_ngcontent-%COMP%]{margin-top:.6em;display:flex;flex:1}[_nghost-%COMP%]   .editor-preview[_ngcontent-%COMP%]{padding:1em;white-space:pre-line}"],changeDetection:0})}return o})();export{Ie as a};
