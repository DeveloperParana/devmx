import{a as fn}from"./chunk-KZU7HIDH.js";import{i as hn,j as _n}from"./chunk-DDY5WEWG.js";import{a as Ii,b as Li}from"./chunk-O3NM7JJV.js";import{a as Fe,b as en}from"./chunk-6S2KI72K.js";import"./chunk-IBLKOITY.js";import{a as nn,b as on,c as an,d as rn,e as sn,f as ln,g as mn,h as cn,i as pn,j as dn,k as un}from"./chunk-THHJ2DT2.js";import{a as Je,b as tn}from"./chunk-A7IEQXOQ.js";import{a as Ji}from"./chunk-EQDX552D.js";import{a as ji}from"./chunk-SDGOOU6G.js";import{a as Qi,b as Yi,c as Ki,d as Wi,e as Xi,g as Zi}from"./chunk-SHICUOO6.js";import{a as bi}from"./chunk-PFN5K4GP.js";import{a as Ti}from"./chunk-MT4QVEUY.js";import{a as Xe}from"./chunk-ERUAW4UO.js";import{a as yi,b as Ei}from"./chunk-MFHZ6JZ7.js";import"./chunk-6ZMPJAYP.js";import{d as Ri}from"./chunk-2SAHWZOE.js";import{a as Ai}from"./chunk-ZR4PYGAM.js";import"./chunk-MN2QX6OM.js";import"./chunk-M5O2VH4C.js";import{a as gi,b as Ci,c as X,d as We,g as xi}from"./chunk-QX6FSDGO.js";import"./chunk-XIUDFJWJ.js";import{h as Gi}from"./chunk-HODF7HCV.js";import{a as Ni,b as Bi,c as $i,h as Hi}from"./chunk-IRYLCLPE.js";import"./chunk-OKCIW3BB.js";import{g as se,h as Kt,i as le,j as lt,p as Ge}from"./chunk-I77QJBBK.js";import{c as qi,d as Ui,e as zi}from"./chunk-IQKXYVAO.js";import{a as wi,b as Si}from"./chunk-XOG3MR4O.js";import{a as Fi}from"./chunk-FGIWLLTD.js";import{h as si,s as Ue,t as li}from"./chunk-THCNWKDC.js";import{c as Vi,d as xe,e as Me}from"./chunk-SOKUPTDF.js";import{a as ue,c as fe,e as Ke,f as he,g as _e,i as ve,l as ge}from"./chunk-MVGT6HIX.js";import{a as Di,b as ki,e as Pi,f as Oi,i as Ze}from"./chunk-EKMWFXOB.js";import{b as ce,c as ai,e as qe,g as ri,i as pe,j as de,o as Mi}from"./chunk-WLWXH53B.js";import{b as _i}from"./chunk-ZA3WZWW5.js";import{a as R,b as mi,c as Q,d as ci,e as C,f as w,g as pi,h as Y,i as I,j as G,l as _,m as ze,n as di,p as A,r as Qe,s as K,t as ui,w as Ye,x as P,y as W}from"./chunk-57VKPFDS.js";import{$ as pt,Da as fi,Ea as L,Fa as hi,Ga as S,I as ei,Ka as vi,T as ti,U as ii,_ as Oe,aa as ni,ka as oi,na as me,o as Jt,s as ct,za as Ce}from"./chunk-XMIP7OAF.js";import{c as Wt,d as je,e as Xt,g as Pe,h as Zt,j as mt}from"./chunk-I7VYXJU2.js";import{$c as He,Aa as Tt,Ac as F,Ba as Dt,Ca as kt,Fb as It,Fc as Ne,G as bt,Gb as ae,Hb as re,Ia as U,Ib as At,Ic as V,Ja as g,K as yt,Ka as Ee,Kb as Lt,Kc as qt,Lb as Nt,M as B,Mc as z,Nc as Be,Ob as x,Oc as $e,Pb as Bt,Qb as $t,Qc as Ut,Tb as Se,Ub as u,Vc as zt,Wa as Pt,Yc as Te,Z as oe,Zb as O,_c as De,a as Ct,ac as T,ad as ke,b as xt,bc as D,cc as s,d as Mt,dc as r,ec as p,fc as $,ga as Et,gc as H,hb as Ot,hd as Qt,ia as wt,ic as k,jc as Ht,kb as we,la as m,lc as f,mb as c,me as Yt,nb as Ie,nc as M,oc as Gt,pc as jt,tb as Ft,u as ne,ua as y,v as Re,va as E,vb as h,vc as te,wa as St,wb as Vt,wc as Ae,xb as Rt,xc as Le,yc as d,zc as q}from"./chunk-FZSJMIDG.js";var vn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-feature-admin"]],decls:1,vars:0,template:function(t,n){t&1&&p(0,"router-outlet")},dependencies:[Kt],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return i})();var et=class extends G{constructor(){super({src:new _("",{nonNullable:!0}),alt:new _("",{nonNullable:!0})})}};var Un=["box"],zn=["overlay"],Qn=["image"],tt=i=>`${i}px`,gn=(()=>{class i{src=g("");aspectRatio=g(16/9);width=g(null);height=g(null);cropChange=U();boxRef=re("box");get box(){let e=this.boxRef();if(!e)throw"box error";return e.nativeElement}overlayRef=re("overlay");get overlay(){let e=this.overlayRef();if(!e)throw"overlay error";return e.nativeElement}imageRef=re("image");get image(){let e=this.imageRef();if(!e)throw"error";return e.nativeElement}#e=null;#t=null;loaded=!1;ngOnInit(){let e=this.src();this.image.onload=()=>{this.loaded=!0,this.setInitialPosition()},this.box.addEventListener("touchstart",this.startUpdate.bind(this),{passive:!0}),this.image.src=e}setInitialPosition(){let{clientWidth:e,clientHeight:t}=this.image,n=this.width()??Math.round(e/2),a=this.height()??n;this.aspectRatio&&(a=Math.round(n/this.aspectRatio()));let l=(e-n)/2,v=(t-a)/2;this.#e=new Ue(l,v),this.updateDimensions(n,a)}updateDimensions(e,t,n=!0){if(!this.#e)return;let{offsetLeft:a,offsetTop:l}=this.box,{clientWidth:v,clientHeight:b}=this.image,j=Math.min(e,v-this.#e.x),be=Math.min(t,b-this.#e.y),J=n?Math.round(Math.max(0,this.#e.x)):a,ee=n?Math.round(Math.max(0,this.#e.y)):l;this.box.style.left=tt(J),this.box.style.top=tt(ee),this.box.style.width=tt(j),this.box.style.height=tt(be),this.updateOverlay(J,ee,j,be);let ye=new DOMRect(J,ee,j,be);this.fireChangeEvent(ye)}updateOverlay(e,t,n,a){this.overlay.style.clipPath=`polygon(
      0% 0%, 0% 100%, 100% 100%, 100% 0%,
      ${e}px 0%, ${e}px ${t}px,
      ${e+n}px ${t}px, ${e+n}px ${t+a}px,
      ${e}px ${t+a}px, ${e}px ${t}px,
      ${e}px 0%, 0% 0%
    )`}fireChangeEvent(e){let t=this.image,n=t.naturalWidth/t.clientWidth;e=new DOMRect(Math.round(e.x*n),Math.round(e.y*n),Math.round(e.width*n),Math.round(e.height*n)),this.cropChange.emit(e)}stopUpdate(){this.#t=null,this.box.classList.remove("nwse","nesw")}startUpdate(e){if(!(e.target instanceof HTMLElement))return;let t="touches"in e?e.touches[0].pageX:e.pageX,n="touches"in e?e.touches[0].pageY:e.pageY;this.#t=new Ue(t,n)}moveCropArea(e){if(!this.#t)return;let t="touches"in e?e.touches[0].pageX:e.pageX,n="touches"in e?e.touches[0].pageY:e.pageY,a=t-this.#t.x,l=n-this.#t.y,v=this.box,b=this.image,{offsetLeft:j,offsetTop:be,offsetWidth:J,offsetHeight:ee}=v,ye=Math.min(Math.max(0,j+a),b.clientWidth-J),st=Math.min(Math.max(0,be+l),b.clientHeight-ee);v.style.left=`${ye}px`,v.style.top=`${st}px`,this.updateOverlay(ye,st,J,ee);let qn=new DOMRect(ye,st,J,ee);this.fireChangeEvent(qn),this.#t=new Ue(t,n)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-crop-image"]],viewQuery:function(t,n){t&1&&(te(n.boxRef,Un,5),te(n.overlayRef,zn,5),te(n.imageRef,Qn,5)),t&2&&Ae(3)},hostBindings:function(t,n){t&1&&f("mouseup",function(){return n.stopUpdate()},!1,we)("touchend",function(){return n.stopUpdate()},!1,we)("mousedown",function(l){return n.startUpdate(l)})("mousemove",function(l){return n.moveCropArea(l)},!1,we)("touchmove",function(l){return n.moveCropArea(l)},!1,we)},inputs:{src:[1,"src"],aspectRatio:[1,"aspectRatio"],width:[1,"width"],height:[1,"height"]},outputs:{cropChange:"cropChange"},decls:9,vars:1,consts:[["image",""],["box",""],["overlay",""],[1,"crop-wrapper"],["alt","imagem para recorte",1,"crop-image",3,"src"],[1,"crop-container"],[1,"crop-box"],[1,"crop-outline"],[1,"crop-overlay"]],template:function(t,n){t&1&&(s(0,"div",3),p(1,"img",4,0),s(3,"div",5)(4,"div",6,1),p(6,"div",7),r(),p(7,"div",8,2),r()()),t&2&&(c(),u("src",n.src(),Ot))},styles:["[_nghost-%COMP%]{display:block;touch-action:none;position:relative}[_nghost-%COMP%]   .crop-wrapper[_ngcontent-%COMP%]{position:relative;font-size:0}[_nghost-%COMP%]   .crop-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:2;top:0}[_nghost-%COMP%]   .crop-image[_ngcontent-%COMP%]{display:block;max-width:100%;width:100%}[_nghost-%COMP%]   .crop-box[_ngcontent-%COMP%]{position:absolute;border:1px dashed #ccc;box-sizing:border-box;background-color:transparent;cursor:move;z-index:3}[_nghost-%COMP%]   .crop-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);pointer-events:none;z-index:1}"],changeDetection:0})}return i})();function Cn({width:i,height:o}){let e=document.createElement("canvas");e.width=i,e.height=o;let t=e.getContext("2d");if(!t)throw"context error";return t}function xn(i,o){let e=Cn(i),t=Cn(o);return e.drawImage(i,0,0),t.drawImage(e.canvas,o.x,o.y,o.width,o.height,0,0,o.width,o.height),t.canvas.toDataURL("image/webp")}var yn=(()=>{class i{ref=m(qi);data=m(Ui);src;form=new et;position=new DOMRect;constructor(){this.src=URL.createObjectURL(this.data)}onCropChange(e){this.position=e}onCrop(){return Mt(this,null,function*(){let e=yield fn(this.src),t=xn(e,this.position);this.form.patchValue({src:t}),this.ref.close(this.form.getRawValue())})}close(){this.ref.close()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-select-cover"]],decls:8,vars:3,consts:[[3,"cropChange","src","width"],[3,"submit","formGroup"],["matInput","","formControlName","alt"],["mat-icon-button",""],["name","menu/crop"]],template:function(t,n){t&1&&(s(0,"devmx-crop-image",0),f("cropChange",function(l){return n.onCropChange(l)}),r(),s(1,"form",1),f("submit",function(){return n.onCrop()}),s(2,"mat-form-field")(3,"mat-label"),d(4,"Texto alternativo"),r(),p(5,"input",2),r(),s(6,"button",3),p(7,"devmx-icon",4),r()()),t&2&&(u("src",n.src)("width",980),c(),u("formGroup",n.form))},dependencies:[P,ze,Q,Y,I,A,K,de,pe,ce,gn,Me,xe,S,L,R],styles:["[_nghost-%COMP%]{gap:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1em}"],changeDetection:0})}return i})();var it=class{dialog;constructor(o){this.dialog=o}open(o){return this.dialog.open(yn,{data:o}).closed.pipe(B(1))}};function En(){return{provide:it,deps:[zi]}}var dt=(i,o)=>o.id;function Yn(i,o){i&1&&p(0,"devmx-icon",6)}function Kn(i,o){i&1&&p(0,"devmx-icon",7)}function Wn(i,o){i&1&&p(0,"devmx-icon",8)}function Xn(i,o){if(i&1&&(s(0,"mat-list-item")(1,"span",5),d(2),r(),x(3,Yn,1,0,"devmx-icon",6)(4,Kn,1,0,"devmx-icon",7)(5,Wn,1,0,"devmx-icon",8),r()),i&2){let e,t=o.$implicit;c(2),F(" ",t.user.displayName," "),c(),O((e=t.status)==="confirmed"?3:e==="maybe"?4:e==="declined"?5:-1)}}function Zn(i,o){i&1&&p(0,"devmx-icon",6)}function Jn(i,o){i&1&&p(0,"devmx-icon",7)}function eo(i,o){i&1&&p(0,"devmx-icon",8)}function to(i,o){if(i&1&&(s(0,"mat-list-item")(1,"span",5),d(2),r(),x(3,Zn,1,0,"devmx-icon",6)(4,Jn,1,0,"devmx-icon",7)(5,eo,1,0,"devmx-icon",8),r()),i&2){let e,t=o.$implicit;c(2),F(" ",t.user.displayName," "),c(),O((e=t.status)==="confirmed"?3:e==="maybe"?4:e==="declined"?5:-1)}}function io(i,o){i&1&&p(0,"devmx-icon",6)}function no(i,o){i&1&&p(0,"devmx-icon",7)}function oo(i,o){i&1&&p(0,"devmx-icon",8)}function ao(i,o){if(i&1&&(s(0,"mat-list-item")(1,"span",5),d(2),r(),x(3,io,1,0,"devmx-icon",6)(4,no,1,0,"devmx-icon",7)(5,oo,1,0,"devmx-icon",8),r()),i&2){let e,t=o.$implicit;c(2),F(" ",t.user.displayName," "),c(),O((e=t.status)==="confirmed"?3:e==="maybe"?4:e==="declined"?5:-1)}}var Sn=(()=>{class i{ref=m(Qi);data=m(Yi);static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-rsvp"]],decls:24,vars:13,consts:[["mat-dialog-title",""],[1,"overflow"],["mat-subheader",""],["align","end"],["mat-button","","mat-dialog-close",""],["matListItemTitle",""],["matListItemMeta","","name","emoji/happy"],["matListItemMeta","","name","emoji/confused"],["matListItemMeta","","name","emoji/crying"]],template:function(t,n){if(t&1&&(s(0,"h2",0),d(1),r(),s(2,"mat-list",1),Ne(3),z(4,"rsvpByStatus"),s(5,"h3",2),d(6),r(),T(7,Xn,6,2,"mat-list-item",null,dt),Ne(9),z(10,"rsvpByStatus"),s(11,"h3",2),d(12),r(),T(13,to,6,2,"mat-list-item",null,dt),Ne(15),z(16,"rsvpByStatus"),s(17,"h3",2),d(18),r(),T(19,ao,6,2,"mat-list-item",null,dt),r(),s(21,"mat-dialog-actions",3)(22,"button",4),d(23,"Fechar"),r()()),t&2){c(),F("",n.data.length," respostas");let a=$e(4,4,n.data,"confirmed");c(5),F("",a.length," confirmado(s)"),c(),D(a);let l=$e(10,7,n.data,"maybe");c(5),F("",l.length," em d\xFAvida"),c(),D(l);let v=$e(16,10,n.data,"declined");c(5),F("",v.length," declinado(s)"),c(),D(v)}},dependencies:[Xi,Zi,Wi,S,Ce,ge,he,_e,ve,ue,fe,R,Gi],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.6em;font-weight:500}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1em;font-weight:400;margin:0 1em;opacity:.6}[_nghost-%COMP%]   .overflow[_ngcontent-%COMP%]{overflow:auto;max-height:60vh}"],changeDetection:0})}return i})();var Z=class{dialog;constructor(o){this.dialog=o}open(o){return this.dialog.open(Sn,{data:o}).afterClosed().pipe(B(1))}};function Tn(){return{provide:Z,deps:[Ki]}}var Dn=[_n(),en(),En(),Tn(),tn()];var kn=i=>xi(m(X),i.params);function ro(i,o){i&1&&(s(0,"th",15),d(1,"T\xEDtulo do evento"),r())}function so(i,o){if(i&1&&(s(0,"td",16),d(1),r()),i&2){let e=o.$implicit;c(),q(e.title)}}function lo(i,o){i&1&&(s(0,"th",15),d(1,"Criado por"),r())}function mo(i,o){if(i&1&&(s(0,"td",16),d(1),r()),i&2){let e=o.$implicit;c(),q(e.owner.displayName)}}function co(i,o){i&1&&p(0,"th",15)}function po(i,o){if(i&1){let e=k();s(0,"td",16)(1,"button",17),f("click",function(){let n=y(e).$implicit,a=M(2);return E(a.openDelete(n))}),p(2,"devmx-icon",18),r()()}}function uo(i,o){i&1&&p(0,"tr",19)}function fo(i,o){i&1&&p(0,"tr",20)}function ho(i,o){if(i&1){let e=k();s(0,"table",5),$(1,6),x(2,ro,2,0,"th",7)(3,so,2,1,"td",8),H(),$(4,9),x(5,lo,2,0,"th",7)(6,mo,2,1,"td",8),H(),$(7,10),x(8,co,1,0,"th",7)(9,po,3,0,"td",8),H(),x(10,uo,1,0,"tr",11)(11,fo,1,0,"tr",12),r(),s(12,"mat-card-actions",13)(13,"devmx-paginator",14),f("pageChange",function(n){y(e);let a=M();return E(a.onPageChange(n))}),r()()}if(i&2){let e=o,t=M();u("dataSource",e.data),c(10),u("matHeaderRowDef",t.columns),c(),u("matRowDefColumns",t.columns),c(2),u("size",10)("items",e.items)}}var Pn=(()=>{class i{router=m(le);route=m(se);dialogFacade=m(Je);eventFacade=m(X);rsvpFacade=m(We);eventRSVP=m(Z);selectUser=m(Fe);#e=li(null);columns=["title","owner","actions"];constructor(){let e=this.#e.observe().pipe(ne(n=>n?n.id:"")),t=this.route.queryParams.pipe(ne(({page:n,size:a,title:l,format:v,date:b})=>({page:n,size:a,title:l,format:v,date:b})));Re([e,t]).pipe(W()).subscribe(this.onQueryParams),this.eventFacade.loadAll()}setUserRef(e=null){this.#e.update(e)}onQueryParams=([e,t])=>{let{page:n,size:a,title:l,format:v,date:b}=t,j={title:l,format:v,date:b,owner:e};this.eventFacade.setParams({page:n,size:a,filter:j}),this.eventFacade.load()};openSelectUser(){this.selectUser.open({onlyRole:"leader",multiple:!1}).subscribe(e=>{e&&this.#e.update(e)})}openRSVP(e){this.rsvpFacade.load(e),this.rsvpFacade.response$.pipe(oe(1),B(1)).subscribe(t=>{t&&this.eventRSVP.open(t)})}openDelete({id:e,title:t}){this.dialogFacade.confirm(`Confirme que deseja apagar o evento ${t}`,"Esta a\xE7\xE3o n\xE3o poder\xE1 ser desfeita").subscribe(n=>{n&&this.eventFacade.delete(e)})}onSearchChange(e=""){this.eventFacade.setFilter({title:e}),this.eventFacade.loadAll()}onPageChange({page:e,size:t}){let n={page:e,size:t};this.router.navigate([],{queryParams:n})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-admin-manage-events"]],decls:10,vars:4,consts:[[1,"events-card"],[1,"events-card-header"],["mat-icon-button","",3,"click"],["name","filter"],[3,"searchChange","debounce"],["mat-table","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","owner"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],[3,"pageChange","size","items"],["mat-header-cell",""],["mat-cell",""],["type","button","mat-icon-button","",3,"click"],["name","trash"],["mat-header-row",""],["mat-row",""]],template:function(t,n){if(t&1&&(s(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),d(3,"Eventos"),r(),s(4,"div")(5,"button",2),f("click",function(){return n.openSelectUser()}),p(6,"devmx-icon",3),r(),s(7,"devmx-search-field",4),f("searchChange",function(l){return n.onSearchChange(l)}),r()()(),x(8,ho,14,5),z(9,"async"),r()),t&2){let a;c(7),u("debounce",1e3),c(),O((a=Be(9,2,n.eventFacade.response$))?8:-1,a)}},dependencies:[Ge,S,L,Ji,Xe,un,nn,an,mn,rn,on,cn,sn,ln,pn,dn,Ze,Di,Pi,Oi,ki,R,Yt],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .events-card[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .events-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px dashed rgba(0,0,0,.1)}[_nghost-%COMP%]   .events-card-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{gap:2em;display:flex;align-items:baseline}[_nghost-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{max-width:3em}"],changeDetection:0})}return i})();var _o=(i,o)=>o.id,vo=()=>[lt,hi,L,wi,import("./chunk-K6BUDJ5M.js").then(i=>i.EventCardComponent),Xe,R,import("./chunk-DPOW4OC5.js").then(i=>i.AsyncPipe)],go=i=>["/","evento",i];function Co(i,o){if(i&1){let e=k();s(0,"devmx-event-card",3)(1,"button",7),f("click",function(){let n=y(e).$implicit,a=M(3);return E(a.openRSVP(n.id))}),p(2,"devmx-icon",8),r(),s(3,"a",9),p(4,"devmx-icon",10),r(),s(5,"a",11),p(6,"devmx-icon",12),r(),s(7,"button",13),f("click",function(){let n=y(e).$implicit,a=M(3);return E(a.copyEvent(n))}),p(8,"devmx-icon",14),r(),s(9,"button",15),f("click",function(){let n=y(e).$implicit,a=M(3);return E(a.deleteEvent(n))}),p(10,"devmx-icon",16),r()()}if(i&2){let e=o.$implicit;u("data",e),c(3),u("routerLink",qt(3,go,e.id)),c(2),u("routerLink",e.id)}}function xo(i,o){i&1&&(s(0,"div",4)(1,"h2"),d(2,"N\xE3o temos nada aqui..."),r(),s(3,"h3"),d(4," Siga nessa dire\xE7\xE3o "),p(5,"devmx-icon",17)(6,"br"),d(7," at\xE9 encontrar o bot\xE3o com um "),p(8,"devmx-icon",18)(9,"br"),d(10," e cadastre suas eventos. "),p(11,"devmx-icon",19),r()()),i&2&&(c(5),u("size",32),c(3),u("size",32),c(3),u("size",32))}function Mo(i,o){if(i&1){let e=k();s(0,"div",2),T(1,Co,11,5,"devmx-event-card",3,_o),r(),x(3,xo,12,3,"div",4),p(4,"div",5),s(5,"footer")(6,"devmx-paginator",6),f("pageChange",function(n){y(e);let a=M(2);return E(a.onPageChange(n))}),r()()}if(i&2){let e=o;c(),D(e.data),c(2),O(e.items?-1:3),c(3),u("size",10)("items",e.items)}}function bo(i,o){if(i&1&&(x(0,Mo,7,3),z(1,"async")),i&2){let e,t=M();O((e=Be(1,1,t.eventFacade.response$))?0:-1,e)}}function yo(i,o){i&1&&(s(0,"div",2),p(1,"devmx-skeleton",20)(2,"devmx-skeleton",20)(3,"devmx-skeleton",20),r()),i&2&&(c(),u("rows",3),c(),u("rows",2),c(),u("rows",3))}var On=(()=>{class i{router=m(le);route=m(se);dialogFacade=m(Je);authFacade=m(Fi);eventFacade=m(X);rsvpFacade=m(We);eventRSVP=m(Z);constructor(){let e=this.authFacade.auth$.pipe(bt(n=>!!n),ne(({id:n})=>n)),t=this.route.queryParams.pipe(ne(({page:n,size:a,title:l,format:v,date:b})=>({page:n,size:a,title:l,format:v,date:b})));Re([e,t]).pipe(W()).subscribe(this.onQueryParams)}onQueryParams=([e,t])=>{let{page:n,size:a,title:l,format:v,date:b}=t,j={title:l,format:v,date:b,owner:e};this.eventFacade.setParams({page:n,size:a,filter:j}),this.eventFacade.loadMyEvents()};openRSVP(e){this.rsvpFacade.load(e),this.rsvpFacade.response$.pipe(oe(1),B(1)).subscribe(t=>{t&&this.eventRSVP.open(t)})}copyEvent(e){this.dialogFacade.prompt("Qual nome do evento?",e.title,!0).subscribe(t=>{t&&this.eventFacade.copy(xt(Ct({},e),{title:t})).subscribe(({id:n})=>{this.router.navigate([n],{relativeTo:this.route})})})}deleteEvent({id:e,title:t}){this.dialogFacade.confirm(`Confirme que deseja apagar ${t}`,"Esta a\xE7\xE3o n\xE3o poder\xE1 ser desfeita").subscribe(n=>{n&&this.eventFacade.delete(e)})}onPageChange({page:e,size:t}){let n={page:e,size:t};this.router.navigate([],{queryParams:n})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-admin-my-events"]],decls:6,vars:0,consts:[["mat-fab","","routerLink","novo",1,"tertiary-fab","top","right"],["name","plus"],[1,"events-container"],[3,"data"],[1,"no-events-yet"],[1,"spacer"],[3,"pageChange","size","items"],["mat-icon-button","","matTooltip","Lista de presen\xE7a","matTooltipPosition","before",3,"click"],["name","doc/check"],["mat-icon-button","","matTooltip","P\xE1gina p\xFAblica","matTooltipPosition","above",3,"routerLink"],["name","software/web-info"],["mat-icon-button","","matTooltip","Editar evento","matTooltipPosition","above",3,"routerLink"],["name","software/edit"],["type","button","mat-icon-button","","matTooltip","Copiar evento","matTooltipPosition","above",3,"click"],["name","doc/copy"],["type","button","mat-icon-button","","matTooltip","Apagar evento","matTooltipPosition","after",3,"click"],["name","trash-alt"],["color","#3BCE53","name","arrow/up-right",3,"size"],["color","#3BCE53","name","plus",3,"size"],["color","#3BCE53","name","emoji/smirking-alt",3,"size"],[3,"rows"]],template:function(t,n){t&1&&(s(0,"a",0),p(1,"devmx-icon",1),r(),x(2,bo,2,3)(3,yo,4,3),Bt(4,2,vo,null,3),$t(500))},dependencies:[Ge,lt,S,fi,Si,Ti,R],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(3,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{flex:1;display:flex}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;padding:0;white-space:normal}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:160%}[_nghost-%COMP%]   .no-events-yet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:120%;text-align:end}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return i})();var Eo=(i,o)=>o.value;function wo(i,o){if(i&1){let e=k();s(0,"mat-list-item"),p(1,"devmx-icon",3),s(2,"span",4),d(3),r(),s(4,"button",5),f("click",function(){let n=y(e).$index,a=M(2);return E(a.form.presentations.removeAt(n))}),p(5,"devmx-icon",6),r()()}if(i&2){let e=o.$implicit;c(3),q(e.value.title)}}function So(i,o){if(i&1&&(s(0,"mat-list",1)(1,"p",2),d(2,"Palestras"),r(),T(3,wo,6,1,"mat-list-item",null,Eo),r()),i&2){let e=M();c(3),D(e.form.presentations.controls)}}var Fn=(()=>{class i{container=m(w);get form(){return this.container.control}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-admin-event-presentations"]],features:[V([],[{provide:w,useFactory:()=>m(w,{skipSelf:!0})}])],decls:2,vars:2,consts:[[3,"formGroup"],["formArrayName","presentations"],["mat-subheader",""],["matListItemIcon","","name","presentation"],["matListItemTitle",""],["type","button","mat-icon-button","","matListItemMeta","",3,"click"],["name","trash"]],template:function(t,n){t&1&&($(0,0),x(1,So,5,0,"mat-list",1),H()),t&2&&(u("formGroup",n.form),c(),O(n.form.presentations.controls.length?1:-1))},dependencies:[P,I,A,Qe,ge,he,_e,Ke,ve,ue,fe,S,L,R],encapsulation:2,changeDetection:0})}return i})();var To=(i,o)=>o.value;function Do(i,o){if(i&1){let e=k();s(0,"mat-list-item"),p(1,"devmx-icon",3),s(2,"span",4),d(3),r(),s(4,"button",5),f("click",function(){let n=y(e).$index,a=M(2);return E(a.form.leaders.removeAt(n))}),p(5,"devmx-icon",6),r()()}if(i&2){let e=o.$implicit;c(3),q(e.value.displayName)}}function ko(i,o){if(i&1&&(s(0,"mat-list",1)(1,"p",2),d(2,"L\xEDderes"),r(),T(3,Do,6,1,"mat-list-item",null,To),r()),i&2){let e=M();c(3),D(e.form.leaders.controls)}}var Vn=(()=>{class i{container=m(w);get form(){return this.container.control}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-admin-event-leaders"]],features:[V([],[{provide:w,useFactory:()=>m(w,{skipSelf:!0})}])],decls:2,vars:2,consts:[[3,"formGroup"],["formArrayName","leaders"],["mat-subheader",""],["matListItemIcon","","name","user-circle"],["matListItemTitle",""],["type","button","mat-icon-button","","matListItemMeta","",3,"click"],["name","trash"]],template:function(t,n){t&1&&($(0,0),x(1,ko,5,0,"mat-list",1),H()),t&2&&(u("formGroup",n.form),c(),O(n.form.leaders.controls.length?1:-1))},dependencies:[P,I,A,Qe,ge,he,_e,Ke,ve,ue,fe,S,L,R],encapsulation:2,changeDetection:0})}return i})();var Rn=(()=>{class i{container=m(w);get form(){return this.container.control}destroyRef=m(kt);saving=g.required();autoSave=U();ngAfterViewInit(){this.form.valueChanges.pipe(W(this.destroyRef),yt(4e3),oe(1)).subscribe(()=>this.autoSave.emit(this.form.getRawValue()))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-auto-save-button"]],inputs:{saving:[1,"saving"]},outputs:{autoSave:"autoSave"},features:[V([],[{provide:w,useFactory:()=>m(w,{skipSelf:!0})}])],decls:2,vars:2,consts:[["mat-flat-button","",3,"disabled"]],template:function(t,n){t&1&&(s(0,"button",0),d(1),r()),t&2&&(u("disabled",n.saving()),c(),F(" ",n.saving()?"Salvando...":"Salvar"," "))},dependencies:[P,S,Ce],encapsulation:2,changeDetection:0})}return i})();var Ro=["panelTemplate"],Io=(i,o)=>o.value;function Ao(i,o){if(i&1){let e=k();s(0,"mat-option",3),f("onSelectionChange",function(){let n=y(e).$implicit,a=M(2);return E(a._selectValue(n.value))}),d(1),r()}if(i&2){let e=o.$implicit;u("value",e.value),c(),q(e.label)}}function Lo(i,o){if(i&1&&(s(0,"div",1),T(1,Ao,2,2,"mat-option",2,Io),r()),i&2){let e=M();u("id",e.panelId)("@panel",void 0),Se("aria-label",e.ariaLabel()||null)("aria-labelledby",e._getAriaLabelledby()),c(),D(e._timeOptions)}}var No=[[["","matTimepickerToggleIcon",""]]],Bo=["[matTimepickerToggleIcon]"];function $o(i,o){i&1&&(St(),s(0,"svg",1),p(1,"path",2),r())}var Ho=/^(\d*\.?\d+)\s*(h|hour|hours|m|min|minute|minutes|s|second|seconds)?$/i,Ln=new wt("MAT_TIMEPICKER_CONFIG");function In(i){let o;if(i===null)return null;if(typeof i=="number")o=i;else{if(i.trim().length===0)return null;let e=i.match(Ho),t=e?parseFloat(e[1]):null,n=e?.[2]?.toLowerCase()||null;if(!e||t===null||isNaN(t))return null;n==="h"||n==="hour"||n==="hours"?o=t*3600:n==="m"||n==="min"||n==="minute"||n==="minutes"?o=t*60:o=t}return o}function Go(i,o,e,t,n){let a=[],l=i.compareTime(e,t)<1?e:t;for(;i.sameDate(l,e)&&i.compareTime(l,t)<1&&i.isValid(l);)a.push({value:l,label:i.format(l,o.display.timeOptionLabel)}),l=i.addSeconds(l,n);return a}var ft=(()=>{class i{_overlay=m(Mi);_dir=m(ii,{optional:!0});_viewContainerRef=m(It);_injector=m(Tt);_defaultConfig=m(Ln,{optional:!0});_dateAdapter=m(Oe,{optional:!0});_dateFormats=m(pt,{optional:!0});_isOpen=ae(!1);_activeDescendant=ae(null);_input;_overlayRef=null;_portal=null;_optionsCacheKey=null;_localeChanges;_onOpenRender=null;_panelTemplate=re.required("panelTemplate");_timeOptions=[];_options=At(me);_keyManager=new ei(this._options,this._injector).withHomeAndEnd(!0).withPageUpDown(!0).withVerticalOrientation(!0);interval=g(In(this._defaultConfig?.interval||null),{transform:In});options=g(null);isOpen=this._isOpen.asReadonly();selected=U();opened=U();closed=U();activeDescendant=this._activeDescendant.asReadonly();panelId=m(ti).getId("mat-timepicker-panel-");disableRipple=g(this._defaultConfig?.disableRipple??!1,{transform:Te});ariaLabel=g(null,{alias:"aria-label"});ariaLabelledby=g(null,{alias:"aria-labelledby"});constructor(){m(Ee).nativeElement.setAttribute("mat-timepicker-panel-id",this.panelId),this._handleLocaleChanges(),this._handleInputStateChanges(),this._keyManager.change.subscribe(()=>this._activeDescendant.set(this._keyManager.activeItem?.id||null))}open(){if(!this._input||(this._input.focus(),this._isOpen()))return;this._isOpen.set(!0),this._generateOptions();let e=this._getOverlayRef();e.updateSize({width:this._input.getOverlayOrigin().nativeElement.offsetWidth}),this._portal??=new _i(this._panelTemplate(),this._viewContainerRef),e.attach(this._portal),this._onOpenRender?.destroy(),this._onOpenRender=Pt(()=>{let t=this._options();this._syncSelectedState(this._input.value(),t,t[0]),this._onOpenRender=null},{injector:this._injector}),this.opened.emit()}close(){this._isOpen()&&(this._isOpen.set(!1),this._overlayRef?.detach(),this.closed.emit())}registerInput(e){this._input&&this._input,this._input=e}ngOnDestroy(){this._keyManager.destroy(),this._localeChanges.unsubscribe(),this._onOpenRender?.destroy(),this._overlayRef?.dispose()}_selectValue(e){this.close(),this.selected.emit({value:e,source:this}),this._input.focus()}_getAriaLabelledby(){return this.ariaLabel()?null:this.ariaLabelledby()||this._input?._getLabelId()||null}_getOverlayRef(){if(this._overlayRef)return this._overlayRef;let e=this._overlay.position().flexibleConnectedTo(this._input.getOverlayOrigin()).withFlexibleDimensions(!1).withPush(!1).withTransformOriginOn(".mat-timepicker-panel").withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-timepicker-above"}]);return this._overlayRef=this._overlay.create({positionStrategy:e,scrollStrategy:this._overlay.scrollStrategies.reposition(),direction:this._dir||"ltr",hasBackdrop:!1}),this._overlayRef.keydownEvents().subscribe(t=>{this._handleKeydown(t)}),this._overlayRef.outsidePointerEvents().subscribe(t=>{let n=Jt(t),a=this._input.getOverlayOrigin().nativeElement;n&&n!==a&&!a.contains(n)&&this.close()}),this._overlayRef}_generateOptions(){let e=this.interval()??1800,t=this.options();if(t!==null)this._timeOptions=t;else{let n=this._dateAdapter,a=this._dateFormats.display.timeInput,l=this._input.min()||n.setTime(n.today(),0,0,0),v=this._input.max()||n.setTime(n.today(),23,59,0),b=e+"/"+n.format(l,a)+"/"+n.format(v,a);b!==this._optionsCacheKey&&(this._optionsCacheKey=b,this._timeOptions=Go(n,this._dateFormats,l,v,e))}}_syncSelectedState(e,t,n){let a=!1;for(let l of t)e&&this._dateAdapter.sameTime(l.value,e)?(l.select(!1),ut(l,"center"),He(()=>this._keyManager.setActiveItem(l)),a=!0):l.deselect(!1);a||(n?(He(()=>this._keyManager.setActiveItem(n)),ut(n,"center")):He(()=>this._keyManager.setActiveItem(-1)))}_handleKeydown(e){let t=e.keyCode;if(t===9)this.close();else if(t===27&&!ct(e))e.preventDefault(),this.close();else if(t===13)e.preventDefault(),this._keyManager.activeItem?this._selectValue(this._keyManager.activeItem.value):this.close();else{let n=this._keyManager.activeItem;this._keyManager.onKeydown(e);let a=this._keyManager.activeItem;a&&a!==n&&ut(a,"nearest")}}_handleLocaleChanges(){this._localeChanges=this._dateAdapter.localeChanges.subscribe(()=>{this._optionsCacheKey=null,this.isOpen()&&this._generateOptions()})}_handleInputStateChanges(){ke(()=>{let e=this._input?.value(),t=this._options();this._isOpen()&&this._syncSelectedState(e,t,null)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["mat-timepicker"]],viewQuery:function(t,n){t&1&&(te(n._panelTemplate,Ro,5),te(n._options,me,5)),t&2&&Ae(2)},inputs:{interval:[1,"interval"],options:[1,"options"],disableRipple:[1,"disableRipple"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"]},outputs:{selected:"selected",opened:"opened",closed:"closed"},exportAs:["matTimepicker"],features:[V([{provide:oi,useExisting:i}])],decls:2,vars:0,consts:[["panelTemplate",""],["role","listbox",1,"mat-timepicker-panel",3,"id"],[3,"value"],[3,"onSelectionChange","value"]],template:function(t,n){t&1&&x(0,Lo,3,4,"ng-template",null,0,Ut)},dependencies:[me],styles:["mat-timepicker{display:none}.mat-timepicker-panel{width:100%;max-height:256px;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;border-bottom-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-timepicker-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-timepicker-container-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){.mat-timepicker-panel{outline:solid 1px}}.mat-timepicker-above .mat-timepicker-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-timepicker-container-shape, var(--mat-sys-corner-extra-small))}.mat-timepicker-input:read-only{cursor:pointer}@media(forced-colors: active){.mat-timepicker-toggle-default-icon{color:CanvasText}}"],encapsulation:2,data:{animation:[Wt("panel",[Zt("void",Pe({opacity:0,transform:"scaleY(0.8)"})),mt(":enter",[Xt([je("0.03s linear",Pe({opacity:1})),je("0.12s cubic-bezier(0, 0, 0.2, 1)",Pe({transform:"scaleY(1)"}))])]),mt(":leave",[je("0.075s linear",Pe({opacity:0}))])])]},changeDetection:0})}return i})();function ut(i,o){i._getHostElement().scrollIntoView({block:o,inline:o})}var Nn=(()=>{class i{_elementRef=m(Ee);_document=m(Qt);_dateAdapter=m(Oe,{optional:!0});_dateFormats=m(pt,{optional:!0});_formField=m(ri,{optional:!0});_onChange;_onTouched;_validatorOnChange;_accessorDisabled=ae(!1);_localeSubscription;_timepickerSubscription;_validator;_lastValueValid=!0;_lastValidDate=null;_ariaActiveDescendant=De(()=>{let e=this.timepicker(),t=e.isOpen(),n=e.activeDescendant();return t&&n?n:null});_ariaExpanded=De(()=>this.timepicker().isOpen()+"");_ariaControls=De(()=>{let e=this.timepicker();return e.isOpen()?e.panelId:null});value=Lt(null);timepicker=g.required({alias:"matTimepicker"});min=g(null,{alias:"matTimepickerMin",transform:e=>this._transformDateInput(e)});max=g(null,{alias:"matTimepickerMax",transform:e=>this._transformDateInput(e)});disabled=De(()=>this.disabledInput()||this._accessorDisabled());disabledInput=g(!1,{transform:Te,alias:"disabled"});constructor(){this._validator=this._getValidator(),this._respondToValueChanges(),this._respondToMinMaxChanges(),this._registerTimepicker(),this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._hasFocus()||this._formatValue(this.value())}),this.getOverlayOrigin().nativeElement.addEventListener("click",this._handleClick)}writeValue(e){this.value.set(this._dateAdapter.getValidDateOrNull(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._accessorDisabled.set(e)}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._validatorOnChange=e}getOverlayOrigin(){return this._formField?.getConnectedOverlayOrigin()||this._elementRef}focus(){this._elementRef.nativeElement.focus()}ngOnDestroy(){this.getOverlayOrigin().nativeElement.removeEventListener("click",this._handleClick),this._timepickerSubscription?.unsubscribe(),this._localeSubscription.unsubscribe()}_getLabelId(){return this._formField?.getLabelId()||null}_handleClick=()=>{this.timepicker().open()};_handleInput(e){let t=this.value(),n=this._dateAdapter.parseTime(e,this._dateFormats.parse.timeInput),a=!this._dateAdapter.sameTime(n,t);!n||a||e&&!t?this._assignUserSelection(n,!0):this._validatorOnChange?.()}_handleBlur(){let e=this.value();e&&this._isValid(e)&&this._formatValue(e),this._onTouched?.()}_handleKeydown(e){this.timepicker().isOpen()||(e.keyCode===27&&!ct(e)&&this.value()!==null?(e.preventDefault(),this.value.set(null),this._formatValue(null)):(e.keyCode===40||e.keyCode===38)&&!this.disabled()&&(e.preventDefault(),this.timepicker().open()))}_respondToValueChanges(){ke(()=>{let e=this._dateAdapter.deserialize(this.value()),t=this._lastValueValid;this._lastValueValid=this._isValid(e),this._hasFocus()||this._formatValue(e),e&&this._lastValueValid&&(this._lastValidDate=e),t!==this._lastValueValid&&this._validatorOnChange?.()})}_registerTimepicker(){ke(()=>{let e=this.timepicker();e.registerInput(this),e.closed.subscribe(()=>this._onTouched?.()),e.selected.subscribe(({value:t})=>{this._dateAdapter.sameTime(t,this.value())||(this._assignUserSelection(t,!0),this._formatValue(t))})})}_respondToMinMaxChanges(){ke(()=>{this.min(),this.max(),this._validatorOnChange?.()})}_assignUserSelection(e,t){if(e==null||!this._isValid(e))this.value.set(e);else{let n=this._dateAdapter,a=n.getValidDateOrNull(this._lastValidDate||this.value()),l=n.getHours(e),v=n.getMinutes(e),b=n.getSeconds(e);this.value.set(a?n.setTime(a,l,v,b):e)}t&&this._onChange?.(this.value())}_formatValue(e){e=this._dateAdapter.getValidDateOrNull(e),this._elementRef.nativeElement.value=e==null?"":this._dateAdapter.format(e,this._dateFormats.display.timeInput)}_isValid(e){return!e||this._dateAdapter.isValid(e)}_transformDateInput(e){let t=typeof e=="string"?this._dateAdapter.parseTime(e,this._dateFormats.parse.timeInput):this._dateAdapter.deserialize(e);return t&&this._dateAdapter.isValid(t)?t:null}_hasFocus(){return this._document.activeElement===this._elementRef.nativeElement}_getValidator(){return C.compose([()=>this._lastValueValid?null:{matTimepickerParse:{text:this._elementRef.nativeElement.value}},e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this.min();return!n||!t||this._dateAdapter.compareTime(n,t)<=0?null:{matTimepickerMin:{min:n,actual:t}}},e=>{let t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this.max();return!n||!t||this._dateAdapter.compareTime(n,t)>=0?null:{matTimepickerMax:{max:n,actual:t}}}])}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Rt({type:i,selectors:[["input","matTimepicker",""]],hostAttrs:["role","combobox","type","text","aria-haspopup","listbox",1,"mat-timepicker-input"],hostVars:5,hostBindings:function(t,n){if(t&1&&f("blur",function(){return n._handleBlur()})("input",function(l){return n._handleInput(l.target.value)})("keydown",function(l){return n._handleKeydown(l)}),t&2){let a;Ht("disabled",n.disabled()),Se("aria-activedescendant",n._ariaActiveDescendant())("aria-expanded",n._ariaExpanded())("aria-controls",n._ariaControls())("mat-timepicker-id",(a=n.timepicker())==null?null:a.panelId)}},inputs:{value:[1,"value"],timepicker:[1,"matTimepicker","timepicker"],min:[1,"matTimepickerMin","min"],max:[1,"matTimepickerMax","max"],disabledInput:[1,"disabled","disabledInput"]},outputs:{value:"valueChange"},exportAs:["matTimepickerInput"],features:[V([{provide:mi,useExisting:i,multi:!0},{provide:ci,useExisting:i,multi:!0},{provide:Vi,useExisting:i}])]})}return i})(),ht=(()=>{class i{_defaultConfig=m(Ln,{optional:!0});_defaultTabIndex=(()=>{let e=m(new Dt("tabindex"),{optional:!0}),t=Number(e);return isNaN(t)?null:t})();timepicker=g.required({alias:"for"});ariaLabel=g(void 0,{alias:"aria-label"});disabled=g(!1,{transform:Te,alias:"disabled"});tabIndex=g(this._defaultTabIndex);disableRipple=g(this._defaultConfig?.disableRipple??!1,{transform:Te});_open(e){this.timepicker()&&!this.disabled()&&(this.timepicker().open(),e.stopPropagation())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["mat-timepicker-toggle"]],hostAttrs:[1,"mat-timepicker-toggle"],hostVars:1,hostBindings:function(t,n){t&1&&f("click",function(l){return n._open(l)}),t&2&&Se("tabindex",null)},inputs:{timepicker:[1,"for","timepicker"],ariaLabel:[1,"aria-label","ariaLabel"],disabled:[1,"disabled"],tabIndex:[1,"tabIndex"],disableRipple:[1,"disableRipple"]},exportAs:["matTimepickerToggle"],ngContentSelectors:Bo,decls:3,vars:5,consts:[["mat-icon-button","","type","button","aria-haspopup","listbox",3,"disabled","disableRipple"],["height","24px","width","24px","viewBox","0 -960 960 960","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-timepicker-toggle-default-icon"],["d","m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z"]],template:function(t,n){t&1&&(Gt(No),s(0,"button",0),jt(1,0,null,$o,2,0),r()),t&2&&(u("disabled",n.disabled())("disableRipple",n.disableRipple()),Se("aria-label",n.ariaLabel())("aria-expanded",n.timepicker().isOpen())("tabindex",n.disabled()?-1:n.tabIndex()))},dependencies:[L],encapsulation:2,changeDetection:0})}return i})(),Bn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Vt({type:i});static \u0275inj=Et({imports:[ft,ht,vi]})}return i})();var nt=class extends G{constructor(){super({date:new _,time:new _})}};var $n=(()=>{class i extends Q{elRef;ngControl;get control(){return this.ngControl.control}_adapter=m(Oe);form=new nt;constructor(e,t,n){super(e,t,!0),this.elRef=t,this.ngControl=n,this.ngControl.valueAccessor=this,this._adapter.setLocale("pt-BR")}ngAfterViewInit(){this.control.value||this.control.setValue(new Date);let{value:e}=this.control;this.form.setValue({date:e,time:e},{emitEvent:!1});let{date:t,time:n}=this.form.controls;t.valueChanges.subscribe(a=>{let{value:l}=this.control;!a||!l||(l.setDate(a.getDate()),l.setMonth(a.getMonth()),l.setFullYear(a.getFullYear()),this.control.setValue(l))}),n.valueChanges.subscribe(a=>{let{value:l}=this.control;!a||!l||(l.setHours(a.getHours()),l.setMinutes(a.getMinutes()),l.setSeconds(a.getSeconds()),this.control.setValue(l))})}static \u0275fac=function(t){return new(t||i)(Ie(Ft),Ie(Ee),Ie(pi,10))};static \u0275cmp=h({type:i,selectors:[["devmx-date-time-picker"]],features:[V([ni()]),Nt],decls:15,vars:5,consts:[["datepicker",""],["timepicker",""],[1,"date-time-picker",3,"formGroup"],[1,"date-picker"],["matInput","","formControlName","date","readonly","",3,"focus","matDatepicker"],["matSuffix","",3,"for"],[1,"time-picker"],["matInput","","formControlName","time","readonly","",3,"matTimepicker"]],template:function(t,n){if(t&1){let a=k();s(0,"section",2)(1,"mat-form-field",3)(2,"mat-label"),d(3,"Dia"),r(),s(4,"input",4),f("focus",function(){y(a);let v=Le(6);return E(v.open())}),r(),p(5,"mat-datepicker",null,0)(7,"mat-datepicker-toggle",5),r(),s(8,"mat-form-field",6)(9,"mat-label"),d(10,"Hor\xE1rio"),r(),p(11,"input",7)(12,"mat-timepicker",null,1)(14,"mat-timepicker-toggle",5),r()()}if(t&2){let a=Le(6),l=Le(13);u("formGroup",n.form),c(4),u("matDatepicker",a),c(3),u("for",a),c(4),u("matTimepicker",l),c(3),u("for",l)}},dependencies:[P,Q,Y,I,A,K,Hi,Ni,Bi,$i,Bn,ft,Nn,ht,de,pe,ce,qe,Me,xe],styles:["[_nghost-%COMP%]{display:inline-flex}[_nghost-%COMP%]   .date-time-picker[_ngcontent-%COMP%]{display:inline-flex;flex-flow:row wrap;gap:1em}[_nghost-%COMP%]   .date-time-picker[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]{width:10em}[_nghost-%COMP%]   .date-time-picker[_ngcontent-%COMP%]   .time-picker[_ngcontent-%COMP%]{width:8em}"],changeDetection:0})}return i})();var Hn=(i,o)=>o.value;function qo(i,o){if(i&1&&(s(0,"mat-option",5),d(1),r()),i&2){let e=o.$implicit;u("value",e.value),c(),F(" ",e.viewValue," ")}}function Uo(i,o){if(i&1&&(s(0,"mat-option",5),d(1),r()),i&2){let e=o.$implicit;u("value",e.value),c(),F(" ",e.viewValue," ")}}var Gn=(()=>{class i{container=m(w);get form(){return this.container.control}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-admin-event-form"]],features:[V([],[{provide:w,useFactory:()=>m(w,{skipSelf:!0})}])],decls:42,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","title","placeholder","Ex.: 10\xBA Meetup Maring\xE1 Agile","autofocus",""],["formControlName","date"],[1,"event-duration"],["formControlName","duration"],[3,"value"],[1,"event-max"],["matInput","","type","number","min","0","formControlName","maxAttendees"],["matTextSuffix",""],[1,"event-format"],["formControlName","format",3,"selectionChange"],[1,"event-address"],["matInput","","formControlName","address"],[1,"event-link"],["matInput","","type","url","formControlName","link"]],template:function(t,n){t&1&&($(0,0),s(1,"mat-form-field")(2,"mat-label"),d(3,"Qual nome ou t\xEDtulo do evento?"),r(),p(4,"input",1),s(5,"mat-error"),d(6,"Obrigat\xF3rio"),r()(),s(7,"div"),p(8,"devmx-date-time-picker",2),s(9,"mat-form-field",3)(10,"mat-label"),d(11,"Dura\xE7\xE3o"),r(),s(12,"mat-select",4),T(13,qo,2,2,"mat-option",5,Hn),r(),s(15,"mat-error"),d(16,"Obrigat\xF3rio"),r()(),s(17,"mat-form-field",6)(18,"mat-label"),d(19,"M\xE1ximo de"),r(),p(20,"input",7),s(21,"span",8),d(22,"pessoas"),r()()(),s(23,"div")(24,"mat-form-field",9)(25,"mat-label"),d(26,"Formato"),r(),s(27,"mat-select",10),f("selectionChange",function(){return n.form.onFormatChange(n.form.format.value)}),T(28,Uo,2,2,"mat-option",5,Hn),r(),s(30,"mat-error"),d(31,"Obrigat\xF3rio"),r()(),s(32,"mat-form-field",11)(33,"mat-label"),d(34,"Endere\xE7o"),r(),p(35,"input",12),r(),s(36,"mat-form-field",13)(37,"mat-label"),d(38,"Link"),r(),p(39,"input",14),s(40,"mat-error"),d(41,"Obrigat\xF3rio"),r()()(),H()),t&2&&(u("formGroup",n.form),c(13),D(n.form.durations),c(15),D(n.form.formats))},dependencies:[P,Q,di,Y,I,ui,A,K,de,pe,ce,ai,qe,Me,xe,Ei,yi,me,$n],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:2em}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{gap:2em;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   div[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .event-duration[_ngcontent-%COMP%]{max-width:8em}[_nghost-%COMP%]   .event-max[_ngcontent-%COMP%]{max-width:10em}[_nghost-%COMP%]   .event-format[_ngcontent-%COMP%]{max-width:9em}[_nghost-%COMP%]   .event-address[_ngcontent-%COMP%]{flex:2}[_nghost-%COMP%]   .event-link[_ngcontent-%COMP%]{width:18em}"],changeDetection:0})}return i})();var _t=class extends G{constructor(o){super({id:new _("",{nonNullable:!0,validators:[C.required]}),title:new _("",{nonNullable:!0,validators:[C.required]}),description:new _("",{nonNullable:!0}),cover:new _("",{nonNullable:!0})}),o&&this.patchValue(o)}},ot=class extends Ye{constructor(){super([])}add(o){this.push(new _t(o))}};var vt=class extends G{get name(){return this.controls.name.value}constructor(o){super({id:new _("",{nonNullable:!0,validators:[C.required]}),name:new _("",{nonNullable:!0,validators:[C.required]}),displayName:new _("",{nonNullable:!0,validators:[C.required]})}),o&&this.patchValue(o)}},at=class extends Ye{constructor(){super([])}add(o){this.push(new vt(o))}};function jn(i,o,e){let t=Ci(i,e?.in);return isNaN(o)?gi(e?.in||i,NaN):(o&&t.setDate(t.getDate()+o),t)}var rt=class i extends G{formats=[{value:"in-person",viewValue:"Presencial"},{value:"mixed",viewValue:"H\xEDbrido"},{value:"online",viewValue:"Online"}];durations=si.map(o=>({value:o,viewValue:o}));static date=jn(new Date,10);constructor(){i.date.setHours(19),i.date.setMinutes(0),i.date.setSeconds(0),super({id:new _("",{nonNullable:!0}),title:new _("",{nonNullable:!0,validators:[C.required]}),date:new _(i.date,{nonNullable:!0,validators:[C.required],updateOn:"blur"}),duration:new _("2h",{nonNullable:!0,validators:[C.required]}),maxAttendees:new _(0,{nonNullable:!0}),description:new _("",{nonNullable:!0,validators:[C.required]}),presentations:new ot,leaders:new at,format:new _("",{nonNullable:!0,validators:[C.required]}),address:new _("",{nonNullable:!0}),link:new _("",{nonNullable:!0}),visible:new _(!0,{nonNullable:!0})}),this.controls.link?.disable()}get format(){return this.controls.format}get presentations(){return this.controls.presentations}get leaders(){return this.controls.leaders}patch(o){if(this.patchValue(o),o.presentations){this.presentations.clear();for(let e of o.presentations)this.presentations.add(e)}if(o.leaders){this.leaders.clear();for(let e of o.leaders)this.leaders.add(e)}}onFormatChange(o=""){!this.controls.address||!this.controls.link||(o==="in-person"&&(this.controls.address.enable(),this.controls.address.addValidators(C.required),this.controls.link.disable(),this.controls.link.removeValidators(C.required)),o==="online"&&(this.controls.address.disable(),this.controls.address.removeValidators(C.required),this.controls.link.enable(),this.controls.address.addValidators(C.required)),o==="mixed"&&(this.controls.link.enable(),this.controls.link.addValidators(C.required),this.controls.address.enable(),this.controls.address.addValidators(C.required)),this.updateValueAndValidity({onlySelf:!0}))}getErrors(){let o={};for(let e in this.controls){let t=e;o[e]=this.controls[t]?.errors??null}return o}};var gt=(()=>{class i{router=m(le);route=m(se);cdr=m(zt);eventFacade=m(X);messageService=m(bi);searchLeaders=m(Fe);selectPresentation=m(hn);selectUser=m(Fe);saving=ae(!1);form=new rt;constructor(){this.route.data.pipe(W()).subscribe(({event:e})=>{if(e&&e.id&&(this.form.patch(e),this.form.onFormatChange(e.format),e.date)){let t=new Date(e.date);this.form.patchValue({date:t})}})}selectPresentations(){this.selectPresentation.open({multiple:!0}).pipe(B(1)).subscribe(t=>{if(t){for(let n of t)this.form.presentations.add(n);this.cdr.detectChanges()}})}selectLeaders(){this.selectUser.open({multiple:!0,onlyRole:"leader"}).pipe(B(1)).subscribe(t=>{if(t){for(let n of t)this.form.leaders.add(n);this.cdr.detectChanges()}})}onSubmit(){if(this.form.valid){this.saving.set(!0);let e=this.form.getRawValue();e.id?this.eventFacade.update(e).subscribe(this.#e):this.eventFacade.create(e).subscribe(this.#e)}else this.form.markAllAsTouched()}#e=e=>{this.saving.set(!1),this.messageService.open({message:"Armazenando informa\xE7\xF5es"}),e&&e.id&&this.router.navigate(["..",e.id],{relativeTo:this.route})};static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["devmx-event-admin-event"]],decls:17,vars:5,consts:[["id","event",3,"submit","formGroup"],[1,"event-tab-content"],["label","Descreva o evento","hint","Compat\xEDvel com markdown do Github","formControlName","description",3,"minRows","maxRows"],[3,"content"],["type","button","mat-button","",3,"click"],[1,"event-footer"],[3,"autoSave","saving"]],template:function(t,n){if(t&1&&(s(0,"form",0),f("submit",function(){return n.onSubmit()}),s(1,"section",1),p(2,"devmx-admin-event-form"),r(),s(3,"section",1)(4,"devmx-markdown-toolbar"),p(5,"devmx-markdown-editor",2)(6,"devmx-markdown-view",3),r()(),s(7,"section",1),p(8,"devmx-admin-event-leaders"),s(9,"button",4),f("click",function(){return n.selectLeaders()}),d(10," Adicionar outras pessoas "),r()(),s(11,"section",1),p(12,"devmx-admin-event-presentations"),s(13,"button",4),f("click",function(){return n.selectPresentations()}),d(14," Procure por conte\xFAdos "),r()(),s(15,"footer",5)(16,"devmx-auto-save-button",6),f("autoSave",function(){return n.onSubmit()}),r()()()),t&2){let a;u("formGroup",n.form),c(5),u("minRows",20)("maxRows",40),c(),u("content",(a=n.form.value.description)!==null&&a!==void 0?a:""),c(10),u("saving",n.saving())}},dependencies:[P,ze,Y,I,A,K,Ai,Ii,Li,Fn,Rn,Vn,Gn,S,Ce,Ri,Ze],styles:["[_nghost-%COMP%]{padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{gap:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .event-tab[_ngcontent-%COMP%]{border-radius:.8em;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .event-tab-content[_ngcontent-%COMP%]{padding:2em 1em}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .event-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return i})();var xm=[{path:"",data:{breadcrumb:"Administra\xE7\xE3o"},providers:Dn,component:vn,children:[{path:"meus-eventos/novo",data:{breadcrumb:"Novo"},title:"Novo evento",component:gt},{path:"meus-eventos/:id",data:{breadcrumb:i=>i.event.title},title:"Meu evento",resolve:{event:kn},component:gt},{path:"meus-eventos",data:{breadcrumb:"Meus eventos"},title:"Meus eventos",component:On},{path:"gerenciar-eventos",data:{breadcrumb:"Gerenciar eventos"},title:"Gerenciar eventos",canActivate:[ji("director","manager","staff")],component:Pn},{path:"",pathMatch:"prefix",redirectTo:"meus-eventos"}]}];export{vn as EventFeatureAdminComponent,xm as eventFeatureAdminRoutes};
