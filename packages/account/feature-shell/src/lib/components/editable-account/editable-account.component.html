<form [formGroup]="form" (submit)="onSubmit()">
  <section formGroupName="name">
    <mat-form-field>
      <mat-label>Nome</mat-label>
      <input
        matInput
        #firstName
        formControlName="first"
        autocomplete="given-name"
        autofocus
      />
      <mat-error>Obrigatório</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Sobrenome</mat-label>
      <input matInput formControlName="last" autocomplete="family-name" />
      <mat-error>Obrigatório</mat-error>
    </mat-form-field>
  </section>

  <mat-form-field>
    <mat-label>Minibio</mat-label>
    <textarea
      matInput
      formControlName="minibio"
      cdkAutosizeMinRows="1"
      cdkAutosizeMaxRows="10"
      cdkTextareaAutosize
      rows="3"
    ></textarea>
    <mat-hint>Conte um pouco sobre você</mat-hint>
  </mat-form-field>

  <section>
    <mat-form-field>
      <mat-label>E-mail</mat-label>
      <input
        type="email"
        matInput
        formControlName="email"
        autocomplete="email"
      />
      <mat-error>Endereço inválido</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Usuário</mat-label>
      <input matInput formControlName="username" autocomplete="username" />
      <mat-error>Obrigatório</mat-error>
    </mat-form-field>
  </section>

  <section>
    <mat-form-field>
      <mat-label>Gênero</mat-label>
      <mat-select formControlName="gender">
        @for (gender of form.genders; track gender) {
        <mat-option [value]="gender.value">{{ gender.viewValue }}</mat-option>
        }
      </mat-select>
      <mat-hint>Opcional</mat-hint>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Nascimento</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        formControlName="birthday"
        autocomplete="bday"
        tabindex="-1"
        readonly
      />
      <mat-hint>Opcional</mat-hint>
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  </section>

  <devmx-autocomplete-cities formControlName="city" />

  <footer>
    <div class="flex gap-1">
      <button type="button" mat-raised-button (click)="toggleForm(firstName)">
        <mat-icon>{{ form.disabled ? 'lock_open' : 'lock' }}</mat-icon>
        <span>{{ form.disabled ? 'Alterar' : 'Bloquear' }}</span>
      </button>

      <button [disabled]="form.disabled" mat-flat-button>
        <mat-icon>cloud_upload</mat-icon>
        <span>Salvar</span>
      </button>
    </div>
  </footer>
</form>
