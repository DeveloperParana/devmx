<form [formGroup]="form" (submit)="onSubmit()">
  <input hidden formControlName="username" autocomplete="username" />

  <mat-form-field>
    <mat-label>Senha atual</mat-label>
    <input
      matInput
      #currentPassword
      type="password"
      formControlName="currentPassword"
      autocomplete="current-password"
    />
    <mat-error>Mínimo 6 caracteres</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Nova senha</mat-label>
    <input
      matInput
      type="password"
      formControlName="newPassword"
      autocomplete="new-password"
    />
    <mat-error>Mínimo 6 caracteres</mat-error>
  </mat-form-field>

  <footer>
    <div>
      @if (form.hasError('samePasswords')) {
      <mat-error>A nova senha está igual a atual</mat-error>
      }
    </div>

    <div class="flex gap-1">
      <button
        type="button"
        mat-stroked-button
        (click)="toggleForm(currentPassword)"
      >
        <mat-icon>{{ form.disabled ? 'lock_open' : 'lock' }}</mat-icon>
        <span>{{ form.disabled ? 'Alterar' : 'Bloquear' }}</span>
      </button>

      <button [disabled]="form.disabled" mat-flat-button>
        <mat-icon>cloud_upload</mat-icon>
        <span>Salvar</span>
      </button>
    </div>
  </footer>
</form>
