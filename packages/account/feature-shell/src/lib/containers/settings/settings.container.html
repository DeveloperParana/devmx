<mat-accordion class="settings-headers-align">
  <mat-expansion-panel
    hideToggle
    (closed)="accountComponent.disable()"
    class="settings-panel"
  >
    <mat-expansion-panel-header>
      <mat-panel-title> Conta </mat-panel-title>
      <mat-panel-description>
        Perfil público
        <mat-icon>account_circle</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div class="flex row wrap">
      <aside>
        @if (accountFacade.account$ | async; as account) { @if (account.photo) {
        <devmx-image [src]="account.photo" [width]="200" />
        } }
        <div>
          <button mat-raised-button type="button" (click)="changePhoto()">
            Alterar foto
          </button>
        </div>
      </aside>
      <form [formGroup]="form.updateAccount">
        <devmx-editable-account
          #accountComponent="devmxEditableAccount"
          (submitted)="onAccountSubmitted($event)"
        />
      </form>
    </div>
  </mat-expansion-panel>

  <mat-expansion-panel
    hideToggle
    (closed)="autoRoleComponent.disable()"
    class="settings-panel"
  >
    <mat-expansion-panel-header>
      <mat-panel-title> Papéis </mat-panel-title>
      <mat-panel-description>
        Alterar funções
        <mat-icon>local_police</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div class="flex row wrap">
      <aside>
        <figure>
          <img src="figures/roles.png" width="128" alt="Password" />
        </figure>
      </aside>

      <devmx-auto-assignable-role
        #autoRoleComponent="devmxAutoAssignableRole"
        (submitted)="onRolesSubmitted($event)"
      />
    </div>
  </mat-expansion-panel>

  <mat-expansion-panel
    hideToggle
    (closed)="passwordComponent.disable()"
    class="settings-panel"
  >
    <mat-expansion-panel-header>
      <mat-panel-title> Segurança </mat-panel-title>
      <mat-panel-description>
        Alterar senha
        <mat-icon>password</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div class="flex row wrap">
      <aside>
        <figure>
          <img src="figures/password.svg" width="128" alt="Password" />
        </figure>
      </aside>

      <devmx-editable-password
        #passwordComponent="devmxEditablePassword"
        (submitted)="onPasswordSubmitted($event)"
      />
    </div>
  </mat-expansion-panel>
</mat-accordion>

@if (accountFacade.account$ | async; as account) {
<mat-card>
  <mat-card-header>
    <mat-card-title>Conta</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <button
      type="button"
      mat-raised-button
      (click)="openUpdateAccount(account)"
    >
      Alterar dados da conta
    </button>
  </mat-card-content>

  <mat-card-header>
    <mat-card-title>Segurança</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <button type="button" mat-raised-button (click)="openPassword(account)">
      Alterar senha
    </button>
  </mat-card-content>
</mat-card>
}
