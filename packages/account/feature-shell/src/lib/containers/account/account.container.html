<form [formGroup]="form" (submit)="onSubmit()">
  <section>
    <devmx-account-user />

    <devmx-account-contact />

    <devmx-account-profile />

    <fieldset>
      <legend>Informações públicas</legend>

      <devmx-account-visibility />
    </fieldset>

    <devmx-account-skills />

    <section formGroupName="profile">
      <devmx-markdown-toolbar>
        <devmx-markdown-editor
          label="Bio"
          #editor="markdownEditor"
          formControlName="minibio"
          [maxRows]="80"
        />
        <devmx-markdown-view
          [content]="form.profile.controls.minibio?.value ?? ''"
        />
      </devmx-markdown-toolbar>
    </section>

    <footer>
      <button mat-flat-button [disabled]="state()">
        {{state() ? state() : 'Salvar'}}
      </button>
    </footer>
  </section>

  <aside>
    <div class="user-avatar">
      <devmx-avatar [src]="photo()" />
      <devmx-select-file
        class="select-file"
        (selectChange)="changePhoto($event)"
      />
    </div>

    <a
      mat-stroked-button
      [routerLink]="['/', 'sobre', form.controls.name.value]"
    >
      Acessar página pública
    </a>

    <devmx-account-social />
  </aside>
</form>
