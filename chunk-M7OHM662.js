import{a as K}from"./chunk-O6EBTHRX.js";import"./chunk-NJXNSQTG.js";import{a as oe}from"./chunk-UXZFML7F.js";import{a as g,b as X,d as Y}from"./chunk-3GNLET54.js";import{b as J}from"./chunk-V3SRCOLE.js";import{a as R}from"./chunk-MT4QVEUY.js";import{a as Z}from"./chunk-ERUAW4UO.js";import"./chunk-MFHZ6JZ7.js";import"./chunk-T47JS64O.js";import"./chunk-RDOH2E2X.js";import"./chunk-XIUDFJWJ.js";import"./chunk-WYCWMXPA.js";import{g as A,i as D,j as H,p as _}from"./chunk-I77QJBBK.js";import{f as ee,g as te,i as ne}from"./chunk-TRANLFL2.js";import"./chunk-MTK7EKDI.js";import"./chunk-IQKXYVAO.js";import"./chunk-XOG3MR4O.js";import{a as k}from"./chunk-VHZFMT4N.js";import"./chunk-P77LSAIN.js";import"./chunk-SOKUPTDF.js";import"./chunk-MVGT6HIX.js";import"./chunk-EKMWFXOB.js";import"./chunk-WLWXH53B.js";import"./chunk-ZA3WZWW5.js";import{y as x}from"./chunk-57VKPFDS.js";import{Ga as W}from"./chunk-XMIP7OAF.js";import"./chunk-I7VYXJU2.js";import{Ca as j,Fc as I,G as V,Gc as U,Hc as q,Ic as N,Kc as Q,M as E,Mc as h,Nc as b,Ob as f,Pb as T,Qb as z,Sb as B,Ub as r,Zb as v,a as C,ac as O,b as L,bc as y,cc as c,dc as s,ec as d,ic as w,la as o,lc as F,mb as m,me as G,nc as p,u as $,ua as M,va as P,vb as u}from"./chunk-FZSJMIDG.js";var ie=[];var re=(()=>{class e{router=o(D);destroyRef=o(j);authFacade=o(k);layoutFacade=o(J);constructor(){this.authFacade.auth$.pipe(x()).subscribe(t=>{t&&(this.layoutFacade.loadNavLinks(t.roles),this.waitingForLogout())}),this.authFacade.load()}waitingForLogout(){this.authFacade.auth$.pipe(x(this.destroyRef)).subscribe(t=>{t===null&&(this.layoutFacade.resetNavLinks(),this.router.navigateByUrl("/conta/autenticacao"))})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["devmx-album-feature-shell"]],decls:1,vars:0,template:function(n,a){n&1&&d(0,"devmx-layout")},dependencies:[_,K],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var de=(e,i)=>i.id,pe=()=>[Z,R,import("./chunk-DPOW4OC5.js").then(e=>e.AsyncPipe)],ue=()=>[import("./chunk-Y6PMEJDU.js").then(e=>e.AlbumCardComponent),H],fe=e=>[".",e];function _e(e,i){if(e&1&&(c(0,"a",3),d(1,"devmx-album-card",4),s()),e&2){let t=p().$implicit;r("routerLink",Q(2,fe,t.id)),m(),r("data",t)}}function ge(e,i){e&1&&d(0,"devmx-skeleton",5),e&2&&r("rows",3)}function Ce(e,i){e&1&&(f(0,_e,2,4)(1,ge,1,1),T(2,0,ue,null,1),B(0,-1))}function he(e,i){if(e&1){let t=w();c(0,"div",0),O(1,Ce,4,0,null,null,de),s(),d(3,"div",1),c(4,"footer")(5,"devmx-paginator",2),F("pageChange",function(a){M(t);let l=p(2);return P(l.onPageChange(a))}),s()()}if(e&2){let t=i;m(),y(t.data),m(4),r("size",10)("items",t.items)}}function be(e,i){if(e&1&&(f(0,he,6,2),h(1,"async")),e&2){let t,n=p();v((t=b(1,1,n.albumFacade.response$))?0:-1,t)}}function xe(e,i){e&1&&(c(0,"div",0),d(1,"devmx-skeleton",5)(2,"devmx-skeleton",5)(3,"devmx-skeleton",5),s()),e&2&&(m(),r("rows",3),m(),r("rows",2),m(),r("rows",3))}var me=(()=>{class e{albumFacade=o(g);router=o(D);route=o(A);constructor(){this.route.queryParams.pipe(x()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{page:n=0,size:a=10}=t,{title:l=""}=t,S={title:l};this.albumFacade.setParams({page:n,size:a,filter:S}),this.albumFacade.load()};mergeParams(t){return C(C({},this.route.snapshot.queryParams),t)}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["devmx-admin-albums"]],decls:5,vars:0,consts:[[1,"albums-container"],[1,"spacer"],[3,"pageChange","size","items"],[3,"routerLink"],[3,"data"],[3,"rows"]],template:function(n,a){n&1&&(d(0,"header"),f(1,be,2,3)(2,xe,4,3),T(3,1,pe,null,2),z(500))},dependencies:[R,_],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;padding:.4em .8em}[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{flex:1;display:flex}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return e})();var Me=(e,i)=>i.id;function Pe(e,i){if(e&1){let t=w();c(0,"devmx-photo",2),F("click",function(){let a=M(t).$implicit,l=p(),S=q(0),se=p();return P(se.open(a,S,l.id))}),s()}if(e&2){let t=i.$implicit;r("photo",t)}}function ve(e,i){if(e&1&&(I(0),h(1,"async"),c(2,"div",0),O(3,Pe,1,1,"devmx-photo",1,Me),s()),e&2){let t=p();U(b(1,0,t.authFacade.auth$)),m(3),y(i.photos)}}var le=(()=>{class e{route=o(A);authFacade=o(k);albumFacade=o(g);photoFacade=o(X);photoViewer=o(ee);album$=this.route.data.pipe(V(t=>"album"in t),$(t=>t.album));open(t,n,a){this.photoViewer.open({photo:t,auth:n}).closed.pipe(E(1)).subscribe(this.updateTags(a))}updateTags=t=>n=>{if(n&&n.tags){let a=n.tags??[];this.photoFacade.updateTags(L(C({},n),{tags:a,album:t}))}};static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["devmx-album"]],features:[N([te()])],decls:2,vars:3,consts:[[1,"grid"],[1,"photo",3,"photo"],[1,"photo",3,"click","photo"]],template:function(n,a){if(n&1&&(f(0,ve,5,3,"div",0),h(1,"async")),n&2){let l;v((l=b(1,1,a.album$))?0:-1,l)}},dependencies:[_,W,ne,G],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{gap:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .photo[_ngcontent-%COMP%]{margin:0;box-sizing:border-box;border-radius:.4em;position:relative;overflow:hidden;background-color:#0000000a;transition:width .3s ease-in-out}"],changeDetection:0})}return e})();var ce=e=>Y(o(g),e.params);var Ct=[{path:"",data:{breadcrumb:"Albuns"},canActivate:[oe("member")],providers:ie,component:re,children:[{path:"administracao",loadChildren:()=>import("./chunk-GCMLNUXK.js").then(e=>e.albumFeatureAdminRoutes)},{path:"",data:{breadcrumb:"Albuns"},title:"Albuns",component:me},{path:":id",data:{breadcrumb:e=>e.album.title},title:"Album de fotos",resolve:{album:ce},component:le}]}];export{re as AlbumFeatureShellComponent,Ct as albumFeatureShellRoutes};
