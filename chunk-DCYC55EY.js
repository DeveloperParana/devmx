import{a as J}from"./chunk-O6EBTHRX.js";import"./chunk-NJXNSQTG.js";import{a as ne}from"./chunk-UXZFML7F.js";import{a as g,b as K,d as X}from"./chunk-3GNLET54.js";import{b as W}from"./chunk-V3SRCOLE.js";import{a as R}from"./chunk-MT4QVEUY.js";import{a as Y}from"./chunk-ERUAW4UO.js";import"./chunk-MFHZ6JZ7.js";import"./chunk-T47JS64O.js";import"./chunk-RDOH2E2X.js";import"./chunk-XIUDFJWJ.js";import"./chunk-WYCWMXPA.js";import{g as F,i as A,j as G,p as _}from"./chunk-I77QJBBK.js";import{f as Z,g as ee,i as te}from"./chunk-TRANLFL2.js";import"./chunk-MTK7EKDI.js";import"./chunk-IQKXYVAO.js";import"./chunk-XOG3MR4O.js";import{a as D}from"./chunk-VHZFMT4N.js";import"./chunk-P77LSAIN.js";import"./chunk-SOKUPTDF.js";import"./chunk-MVGT6HIX.js";import"./chunk-EKMWFXOB.js";import"./chunk-WLWXH53B.js";import"./chunk-ZA3WZWW5.js";import{y as b}from"./chunk-57VKPFDS.js";import{Ga as H}from"./chunk-XMIP7OAF.js";import"./chunk-I7VYXJU2.js";import{Ca as E,Fc as B,G as $,Gc as I,Hc as U,Ic as q,Kc as N,M as V,Mc as C,Nc as h,Ob as f,Pb as T,Qb as j,Sb as z,Ub as a,Zb as P,a as S,ac as v,bc as O,cc as c,dc as d,ec as s,ic as y,la as o,lc as w,mb as m,me as Q,nc as p,u as L,ua as x,va as M,vb as u}from"./chunk-FZSJMIDG.js";var oe=[];var ae=(()=>{class e{router=o(A);destroyRef=o(E);authFacade=o(D);layoutFacade=o(W);constructor(){this.authFacade.auth$.pipe(b()).subscribe(t=>{t&&(this.layoutFacade.loadNavLinks(t.roles),this.waitingForLogout())}),this.authFacade.load()}waitingForLogout(){this.authFacade.auth$.pipe(b(this.destroyRef)).subscribe(t=>{t===null&&(this.layoutFacade.resetNavLinks(),this.router.navigateByUrl("/conta/autenticacao"))})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["devmx-album-feature-shell"]],decls:1,vars:0,template:function(n,r){n&1&&s(0,"devmx-layout")},dependencies:[_,J],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var ce=(e,i)=>i.id,de=()=>[Y,R,import("./chunk-DPOW4OC5.js").then(e=>e.AsyncPipe)],se=()=>[import("./chunk-Y6PMEJDU.js").then(e=>e.AlbumCardComponent),G],pe=e=>[".",e];function ue(e,i){if(e&1&&(c(0,"a",3),s(1,"devmx-album-card",4),d()),e&2){let t=p().$implicit;a("routerLink",N(2,pe,t.id)),m(),a("data",t)}}function fe(e,i){e&1&&s(0,"devmx-skeleton",5),e&2&&a("rows",3)}function _e(e,i){e&1&&(f(0,ue,2,4)(1,fe,1,1),T(2,0,se,null,1),z(0,-1))}function ge(e,i){if(e&1){let t=y();c(0,"div",0),v(1,_e,4,0,null,null,ce),d(),s(3,"div",1),c(4,"footer")(5,"devmx-paginator",2),w("pageChange",function(r){x(t);let l=p(2);return M(l.onPageChange(r))}),d()()}if(e&2){let t=i;m(),O(t.data),m(4),a("size",10)("items",t.items)}}function Ce(e,i){if(e&1&&(f(0,ge,6,2),C(1,"async")),e&2){let t,n=p();P((t=h(1,1,n.albumFacade.response$))?0:-1,t)}}function he(e,i){e&1&&(c(0,"div",0),s(1,"devmx-skeleton",5)(2,"devmx-skeleton",5)(3,"devmx-skeleton",5),d()),e&2&&(m(),a("rows",3),m(),a("rows",2),m(),a("rows",3))}var re=(()=>{class e{albumFacade=o(g);router=o(A);route=o(F);constructor(){this.route.queryParams.pipe(b()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{page:n=0,size:r=10}=t,{title:l=""}=t,k={title:l};this.albumFacade.setParams({page:n,size:r,filter:k}),this.albumFacade.load()};mergeParams(t){return S(S({},this.route.snapshot.queryParams),t)}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["devmx-admin-albums"]],decls:5,vars:0,consts:[[1,"albums-container"],[1,"spacer"],[3,"pageChange","size","items"],[3,"routerLink"],[3,"data"],[3,"rows"]],template:function(n,r){n&1&&(s(0,"header"),f(1,Ce,2,3)(2,he,4,3),T(3,1,de,null,2),j(500))},dependencies:[R,_],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;padding:.4em .8em}[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .albums-container[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{flex:1;display:flex}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return e})();var be=(e,i)=>i.id;function xe(e,i){if(e&1){let t=y();c(0,"devmx-photo",2),w("click",function(){let r=x(t).$implicit;p();let l=U(0),k=p();return M(k.open(r,l))}),d()}if(e&2){let t=i.$implicit;a("photo",t)}}function Me(e,i){if(e&1&&(B(0),C(1,"async"),c(2,"div",0),v(3,xe,1,1,"devmx-photo",1,be),d()),e&2){let t=p();I(h(1,0,t.authFacade.auth$)),m(3),O(i.photos)}}var me=(()=>{class e{route=o(F);authFacade=o(D);albumFacade=o(g);photoFacade=o(K);photoViewer=o(Z);album$=this.route.data.pipe($(t=>"album"in t),L(t=>t.album));open(t,n){this.photoViewer.open({photo:t,auth:n}).closed.pipe(V(1)).subscribe(this.updateTags)}updateTags=t=>{t&&this.photoFacade.updateTags(t)};static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["devmx-album"]],features:[q([ee()])],decls:2,vars:3,consts:[[1,"grid"],[1,"photo",3,"photo"],[1,"photo",3,"click","photo"]],template:function(n,r){if(n&1&&(f(0,Me,5,3,"div",0),C(1,"async")),n&2){let l;P((l=h(1,1,r.album$))?0:-1,l)}},dependencies:[_,H,te,Q],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{gap:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .photo[_ngcontent-%COMP%]{margin:0;box-sizing:border-box;border-radius:.4em;position:relative;overflow:hidden;background-color:#0000000a;transition:width .3s ease-in-out}"],changeDetection:0})}return e})();var le=e=>X(o(g),e.params);var ft=[{path:"",data:{breadcrumb:"Albuns"},canActivate:[ne("member")],providers:oe,component:ae,children:[{path:"administracao",loadChildren:()=>import("./chunk-GCMLNUXK.js").then(e=>e.albumFeatureAdminRoutes)},{path:"",data:{breadcrumb:"Albuns"},title:"Albuns",component:re},{path:":id",data:{breadcrumb:e=>e.album.title},title:"Album de fotos",resolve:{album:le},component:me}]}];export{ae as AlbumFeatureShellComponent,ft as albumFeatureShellRoutes};
