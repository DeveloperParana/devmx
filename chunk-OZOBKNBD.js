import{a as Se}from"./chunk-H5XZJNE2.js";import{a as Ee}from"./chunk-2RN3PGED.js";import"./chunk-NJXNSQTG.js";import{a as H}from"./chunk-SDGOOU6G.js";import{h as Ke}from"./chunk-SHICUOO6.js";import{b as ye}from"./chunk-YD2NOG34.js";import{a as G}from"./chunk-MT4QVEUY.js";import{a as Fe}from"./chunk-ERUAW4UO.js";import"./chunk-MFHZ6JZ7.js";import"./chunk-T47JS64O.js";import{a as $e,b as Ne,c as ze,d as Ue}from"./chunk-VSAUFU5T.js";import"./chunk-RDOH2E2X.js";import{a as Ae}from"./chunk-ZR4PYGAM.js";import"./chunk-MN2QX6OM.js";import"./chunk-M5O2VH4C.js";import{c as w,d as Me,g as Pe}from"./chunk-QX6FSDGO.js";import"./chunk-XIUDFJWJ.js";import"./chunk-WYCWMXPA.js";import{b as je,d as qe,e as Qe,i as Ge,j as He,k as We,l as Ye,m as Je}from"./chunk-HODF7HCV.js";import"./chunk-IRYLCLPE.js";import{c as De,e as we,f as be}from"./chunk-OKCIW3BB.js";import{g as B,i as V,j as A,p as D}from"./chunk-I77QJBBK.js";import"./chunk-IQKXYVAO.js";import"./chunk-XOG3MR4O.js";import{a as N}from"./chunk-FGIWLLTD.js";import"./chunk-THCNWKDC.js";import"./chunk-SOKUPTDF.js";import{a as de,d as ue,e as ve,f as _e,g as fe,i as Ce,l as he}from"./chunk-MVGT6HIX.js";import{a as Oe,b as Te,c as Ie,d as Le,f as ke,g as Re,h as Be,i as Ve}from"./chunk-EKMWFXOB.js";import"./chunk-WLWXH53B.js";import"./chunk-ZA3WZWW5.js";import{a as oe,h as re,i as me,m as se,p as le,s as pe,x as ce,y as F}from"./chunk-57VKPFDS.js";import{Aa as ge,Fa as xe,Ga as $}from"./chunk-XMIP7OAF.js";import"./chunk-I7VYXJU2.js";import{$b as k,Ac as S,Ca as X,G as T,Ia as Z,Kc as P,Mc as _,Nc as h,Ob as f,Oc as Q,Pb as q,Qb as te,Sb as ne,Ub as l,Zb as C,a as U,ac as y,bc as E,ca as K,cc as a,dc as r,ec as s,hb as b,ic as R,la as d,lc as x,mb as o,me as ie,nc as v,se as ae,u as j,ua as I,v as J,va as L,vb as g,yb as ee,yc as p,zc as M}from"./chunk-FZSJMIDG.js";var Xe=(()=>{class e{router=d(V);destroyRef=d(X);authFacade=d(N);layoutFacade=d(ye);ngOnInit(){this.authFacade.auth$.pipe(F(this.destroyRef)).subscribe(t=>{t&&(this.layoutFacade.loadNavLinks(t.roles),this.waitingForLogout())}),this.authFacade.load()}waitingForLogout(){this.authFacade.auth$.pipe(F(this.destroyRef)).subscribe(t=>{t===null&&(this.layoutFacade.resetNavLinks(),this.router.navigateByUrl("/conta/autenticacao"))})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-event-feature-shell"]],decls:1,vars:0,template:function(i,n){i&1&&s(0,"devmx-layout")},dependencies:[D,Ee],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var Ze=e=>Pe(d(w),e.params);var et=(()=>{class e{transform(t){switch(t){case"in-person":return"Presencial";case"online":return"Online";case"mixed":return"H\xEDbrido"}}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=ee({name:"eventFormat",type:e,pure:!0})}return e})();var lt=e=>["/","evento",e];function pt(e,m){if(e&1&&s(0,"img",7),e&2){let t=v();l("src",t.cover,b)("alt",t.title)}}function ct(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"devmx-icon",16),a(2,"div",9),p(3),r()()),e&2){let t=v();o(3),M(t.address)}}function dt(e,m){if(e&1&&s(0,"devmx-maps-button",18),e&2){let t=v();l("data",t)}}function ut(e,m){if(e&1&&s(0,"devmx-youtube-button",19),e&2){let t=v();l("data",t)}}function vt(e,m){if(e&1&&(a(0,"mat-card-content",12),s(1,"devmx-calendar-button",17),f(2,dt,1,1,"devmx-maps-button",18),_(3,"showEventAddress"),f(4,ut,1,1,"devmx-youtube-button",19),_(5,"showEventLink"),s(6,"devmx-whats-app-button",20),r()),e&2){let t=m;o(),l("data",t),o(),C(h(3,4,t.format)&&t.address?2:-1),o(2),C(h(5,6,t.format)&&t.link?4:-1),o(2),l("data",t)}}function _t(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"devmx-icon",22),a(2,"div",9),p(3),r()()),e&2){let t=m.$implicit;o(3),M(t.title)}}function ft(e,m){if(e&1&&(a(0,"mat-list")(1,"h3",21),p(2,"Apresenta\xE7\xF5es"),r(),y(3,_t,4,1,"mat-list-item",null,k),r()),e&2){let t=v();o(3),E(t.presentations)}}function Ct(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"img",23),_(2,"photo"),a(3,"div",9),p(4),r()()),e&2){let t=m.$implicit;o(),l("src",h(2,3,t==null||t.profile==null?null:t.profile.photo),b)("alt",t.displayName),o(3),M(t.displayName)}}function ht(e,m){if(e&1&&(a(0,"mat-list")(1,"h3",21),p(2,"Organizadores"),r(),y(3,Ct,5,5,"mat-list-item",null,k),r()),e&2){let t=v();o(3),E(t.leaders)}}function gt(e,m){if(e&1&&(a(0,"mat-list-item"),s(1,"img",23),_(2,"photo"),a(3,"div",9),p(4),r()()),e&2){let t=m.$implicit;o(),l("src",h(2,3,t.user.profile==null?null:t.user.profile.photo),b)("alt",t.user.displayName),o(3),M(t.user.displayName)}}function xt(e,m){if(e&1){let t=R();a(0,"form",24)(1,"devmx-rsvp-button",25),x("statusChange",function(){I(t);let n=v(2);return L(n.onStatusChange())}),r()(),a(2,"mat-list")(3,"h3",21),p(4,"Presen\xE7as"),r(),y(5,gt,5,5,"mat-list-item",null,k),r()}if(e&2){let t=v(2);l("formGroup",t.rsvpForm),o(5),E(m)}}function yt(e,m){if(e&1&&(a(0,"mat-card",0)(1,"mat-card-header",1)(2,"a",2),s(3,"devmx-icon",3),r(),a(4,"mat-card-title",4),p(5),r(),a(6,"a",5),s(7,"devmx-icon",6),r()(),f(8,pt,1,2,"img",7),a(9,"mat-list")(10,"mat-list-item"),s(11,"devmx-icon",8),a(12,"div",9),p(13),_(14,"eventFormat"),r()(),a(15,"mat-list-item"),s(16,"devmx-icon",10),a(17,"div",9),p(18),_(19,"date"),r()(),a(20,"mat-list-item"),s(21,"devmx-icon",11),a(22,"div",9),p(23),_(24,"date"),r()(),f(25,ct,4,1,"mat-list-item"),r(),f(26,vt,7,8,"mat-card-content",12),_(27,"async"),a(28,"mat-card-content"),s(29,"devmx-markdown-view",13),a(30,"a",14),p(31," Ir para p\xE1gina do evento "),r()(),f(32,ft,5,0,"mat-list")(33,ht,5,0,"mat-list")(34,xt,7,1),_(35,"async"),a(36,"mat-card-header"),s(37,"img",15),_(38,"photo"),a(39,"mat-card-title"),p(40),r(),a(41,"mat-card-subtitle"),p(42," Organizador "),r()()()),e&2){let t,i,n=m,c=v();o(5),S(" ",n.title," "),o(3),C(n.cover?8:-1),o(5),M(h(14,15,n.format)),o(5),M(Q(19,17,n.date,"shortDate")),o(5),S("",Q(24,20,n.date,"shortTime"),"h"),o(2),C(n.address?25:-1),o(),C((t=h(27,23,c.eventFacade.page$))?26:-1,t),o(3),l("content",n.description),o(),l("routerLink",P(29,lt,n.id)),o(2),C(n.presentations.length?32:-1),o(),C(n.leaders.length?33:-1),o(),C((i=h(35,25,c.rsvpFacade.response$))?34:-1,i),o(3),l("src",h(38,27,n.owner.profile==null?null:n.owner.profile.photo),b)("alt",n.owner.displayName),o(3),S(" ",n.owner.displayName," ")}}var tt=(()=>{class e{route=d(B);rsvpForm=new Je;authFacade=d(N);eventFacade=d(w);rsvpFacade=d(Me);event$=this.route.data.pipe(T(t=>"event"in t),j(t=>t.event),K(t=>this.setRSVPEvent(t.id)));constructor(){let t=this.authFacade.auth$.pipe(T(n=>!!n),j(n=>n.id)),i=this.rsvpFacade.response$.pipe(T(n=>n.length>0));J([t,i]).pipe(F()).subscribe(([n,c])=>{let u=c.find(z=>z.user.id===n);u&&this.setRSVPStatus(u)})}setRSVPEvent=t=>{this.rsvpForm.patchValue({event:t}),this.rsvpFacade.loadConfirmed(t)};setRSVPStatus({status:t}){this.rsvpForm.patchValue({status:t},{emitEvent:!1})}onStatusChange(){this.rsvpForm.valid&&this.rsvpFacade.create(this.rsvpForm.getRawValue())}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-event-details"]],decls:2,vars:3,consts:[[1,"event-card"],[1,"event-card-header","sticky"],["mat-card-avatar","","routerLink","..","mat-icon-button",""],["name","arrow/left"],[1,"event-card-header-title"],["routerLink","..","mat-icon-button",""],["name","close-cross"],["mat-card-image","",3,"src","alt"],["matListItemIcon","","name","transport/flag-pin"],["matListItemTitle",""],["matListItemIcon","","name","calendar"],["matListItemIcon","","name","alarm-clock-alert"],[1,"event-card-buttons"],[3,"content"],["mat-raised-button","",3,"routerLink"],["mat-card-avatar","",3,"src","alt"],["matListItemIcon","","name","transport/map-pin"],["text","Definir lembrete",3,"data"],["text","Ver no mapa",3,"data"],["text","Assistir",3,"data"],["text","Compartilhar",3,"data"],["mat-subheader",""],["matListItemIcon","","name","presentation"],["matListItemAvatar","",3,"src","alt"],[1,"rsvp-button",3,"formGroup"],["formControlName","status",3,"statusChange"]],template:function(i,n){if(i&1&&(f(0,yt,43,31,"mat-card",0),_(1,"async")),i&2){let c;C((c=h(1,1,n.event$))?0:-1,c)}},dependencies:[D,A,ce,se,re,me,le,pe,Qe,Ne,ze,$e,Ue,Ve,Oe,Be,Ie,ke,Re,Le,Te,he,_e,fe,ue,ve,Ce,de,$,ge,xe,oe,et,Ae,Ge,He,Se,ie,ae],styles:["[_nghost-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 16px;font-size:1.2em;font-weight:500;opacity:.6}[_nghost-%COMP%]   .event-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.2em;word-wrap:break-word}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}[_nghost-%COMP%]   .event-card-header[_ngcontent-%COMP%]   .mat-mdc-card-avatar[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .event-card-buttons[_ngcontent-%COMP%]{gap:1em;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .rsvp-button[_ngcontent-%COMP%]{padding:1em}"],changeDetection:0})}return e})();var nt=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-event-home"]],decls:0,vars:0,template:function(i,n){},dependencies:[$,Ke],encapsulation:2,changeDetection:0})}return e})();var Et=(e,m)=>m.value;function Mt(e,m){if(e&1&&(a(0,"mat-chip-option",1),p(1),r()),e&2){let t=m.$implicit;l("value",t.value),o(),S(" ",t.viewValue," ")}}var it=(()=>{class e{sortChange=Z();directions=[{value:"asc",viewValue:"ASC"},{value:"desc",viewValue:"DESC"}];static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-sort-direction"]],outputs:{sortChange:"sortChange"},exportAs:["sortDirection"],decls:3,vars:0,consts:[[3,"change"],[3,"value"]],template:function(i,n){i&1&&(a(0,"mat-chip-listbox",0),x("change",function(u){return n.sortChange.emit(u.value)}),y(1,Mt,2,2,"mat-chip-option",1,Et),r()),i&2&&(o(),E(n.directions))},dependencies:[be,we,De],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{transition:transform .6s cubic-bezier(.175,.885,.32,1.275)}[_nghost-%COMP%]   button.asc[_ngcontent-%COMP%]{transform:rotate(-360deg)}[_nghost-%COMP%]   button.desc[_ngcontent-%COMP%]{transform:rotate(540deg)}"],changeDetection:0})}return e})();var Pt=(e,m)=>m.id,Ft=()=>[Fe,G,import("./chunk-DPOW4OC5.js").then(e=>e.AsyncPipe)],St=()=>[We,A],Dt=e=>[e],wt=e=>({right:e}),bt=e=>({outlets:e}),Ot=e=>["/","eventos",e];function Tt(e,m){if(e&1&&(a(0,"a",7),s(1,"devmx-event-card",8),r()),e&2){let t=v().$implicit;l("routerLink",P(8,Ot,P(6,bt,P(4,wt,P(2,Dt,t.id))))),o(),l("data",t)}}function It(e,m){e&1&&s(0,"devmx-skeleton",9),e&2&&l("rows",3)}function Lt(e,m){e&1&&(f(0,Tt,2,10)(1,It,1,1),q(2,0,St,null,1),ne(0,-1))}function kt(e,m){if(e&1){let t=R();a(0,"div",4),y(1,Lt,4,0,null,null,Pt),r(),s(3,"div",5),a(4,"footer")(5,"devmx-paginator",6),x("pageChange",function(n){I(t);let c=v(2);return L(c.onPageChange(n))}),r()()}if(e&2){let t=m;o(),E(t.data),o(4),l("size",10)("items",t.items)}}function Rt(e,m){if(e&1&&(f(0,kt,6,2),_(1,"async")),e&2){let t,i=v();C((t=h(1,1,i.eventFacade.response$))?0:-1,t)}}function Bt(e,m){e&1&&(a(0,"div",4),s(1,"devmx-skeleton",9)(2,"devmx-skeleton",9)(3,"devmx-skeleton",9),r()),e&2&&(o(),l("rows",3),o(),l("rows",2),o(),l("rows",3))}var at=(()=>{class e{router=d(V);route=d(B);eventFacade=d(w);constructor(){this.route.queryParams.pipe(F()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{title:i="",format:n="",date:c="asc",time:u=""}=t,{page:z=0,size:ot=10}=t,rt={title:i,format:n},{start:W,end:Y}=t,mt={date:c};this.eventFacade.setParams({page:z,size:ot,filter:rt,sort:mt}),W&&Y?this.eventFacade.loadDateRange(new Date(W),new Date(Y)):u==="until"?this.eventFacade.loadUntil():this.eventFacade.load()};onFilterChange(t){let i=this.mergeQueryParams({format:t});this.router.navigate([],{queryParams:i})}onTimeChange(t){let i={time:t};this.router.navigate([],{queryParams:i})}onRangeChange({start:t,end:i}){let n=this.mergeQueryParams({start:t,end:i});this.router.navigate([],{queryParams:n})}onSortChange(t){let i=this.mergeQueryParams({date:t});this.router.navigate([],{queryParams:i})}onPageChange(t){this.router.navigate([],{queryParams:t})}mergeQueryParams(t){return U(U({},this.route.snapshot.queryParams),t)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=g({type:e,selectors:[["devmx-events"]],decls:9,vars:0,consts:[[3,"rangeChange"],[3,"filterChange"],[3,"timeChange"],[3,"sortChange"],[1,"events-container"],[1,"spacer"],[3,"pageChange","size","items"],[3,"routerLink"],[1,"event-card",3,"data"],[3,"rows"]],template:function(i,n){i&1&&(a(0,"header")(1,"devmx-event-date-range",0),x("rangeChange",function(u){return n.onRangeChange(u)}),r(),a(2,"devmx-event-filter",1),x("filterChange",function(u){return n.onFilterChange(u)}),r(),a(3,"devmx-event-time",2),x("timeChange",function(u){return n.onTimeChange(u)}),r(),a(4,"devmx-sort-direction",3),x("sortChange",function(u){return n.onSortChange(u)}),r()(),f(5,Rt,2,3)(6,Bt,4,3),q(7,5,Ft,null,6),te(500))},dependencies:[Ye,qe,je,it,G,D],styles:["[_nghost-%COMP%]{flex:1;display:flex;padding-top:.6em;flex-direction:column}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{gap:.4em;display:flex;flex-flow:row wrap;align-items:baseline;justify-content:space-between;padding:.4em .8em}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{gap:1em;padding:1em;display:grid;grid-auto-flow:dense;grid-template-columns:repeat(4,1fr)}@media (max-width: 1918px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 1278px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 767px){[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}[_nghost-%COMP%]   .events-container[_ngcontent-%COMP%]   .event-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return e})();var Zn=[{path:"",data:{breadcrumb:"Eventos"},canActivate:[H("member")],component:Xe,children:[{path:"administracao",canActivate:[H("leader","director","manager","staff")],loadChildren:()=>import("./chunk-65MYVTLH.js").then(e=>e.eventFeatureAdminRoutes)},{path:"",title:"Eventos",component:at},{path:":id",data:{breadcrumb:e=>e.event.title},title:"Evento",resolve:{event:Ze},component:tt,outlet:"right"},{path:"",component:nt}]}];export{Xe as EventFeatureShellComponent,Zn as eventFeatureShellRoutes};
