import{a as ue,b as pe}from"./chunk-I7HMQKPZ.js";import{a as he,b as xe,c as ge,d as ve,e as Me,f as be,g as we,h as ye,i as Fe,j as Se,k as De}from"./chunk-TDAJGOKB.js";import{a as fe,b as Ce}from"./chunk-HOUESFGN.js";import{a as _e}from"./chunk-5XJFAPMG.js";import"./chunk-BJPVFIKR.js";import{a as ae}from"./chunk-FTG3SWGJ.js";import{c as me}from"./chunk-EJAMDHKS.js";import"./chunk-KCQYBIUM.js";import"./chunk-RVBVVCKL.js";import"./chunk-SBPBG2DZ.js";import"./chunk-7ZNDEEZ6.js";import"./chunk-XIUDFJWJ.js";import{a as de,b as y}from"./chunk-5MUU2WLY.js";import"./chunk-7BKB7KKA.js";import"./chunk-A74J7Y3C.js";import"./chunk-TJJFEYFG.js";import"./chunk-76QZXEBP.js";import{a as A}from"./chunk-366DNJGU.js";import{g as U,h as J,i as K,j as W,p as N,q as oe,v as ie,w as re,x as T}from"./chunk-7RMPQIRR.js";import"./chunk-I7VYXJU2.js";import{a as O,b as se,c as le,d as ce,e as k,f as V,i as H}from"./chunk-BJ2ND26O.js";import{a as X,e as B,f as j,h as Y,i as R,j as I,l as d,m as Z,p as ee,q as te,s as ne,x as E}from"./chunk-E5QACR6S.js";import"./chunk-CG5OOKZO.js";import{F as z,Fc as L,Jc as w,Kc as F,Mc as Q,Nb as p,Tb as C,Yb as g,bc as i,cc as o,dc as f,ec as S,fc as D,hc as v,je as P,ka as s,kc as M,lb as c,mc as u,ta as h,ua as x,ub as _,xb as q,xc as m,yc as b}from"./chunk-5L47ZUSK.js";var Pe=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-account-feature-admin"]],decls:1,vars:0,template:function(n,a){n&1&&f(0,"router-outlet")},dependencies:[J],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0})}return e})();var Ue=[Ce()];var Ne=(()=>{class e{transform(t,...n){return n.some(a=>t?.roles[a])}static \u0275fac=function(n){return new(n||e)};static \u0275pipe=q({name:"hasRole",type:e,pure:!0})}return e})();function $e(e,r){e&1&&(i(0,"th",13),m(1,"Nome"),o())}function Ge(e,r){if(e&1&&(i(0,"td",14),m(1),o()),e&2){let t=r.$implicit;c(),b(t.displayName)}}function Be(e,r){e&1&&(i(0,"th",13),m(1,"Usu\xE1rio"),o())}function je(e,r){if(e&1&&(i(0,"td",14),m(1),o()),e&2){let t=r.$implicit;c(),b(t.name)}}function Ie(e,r){e&1&&f(0,"th",13)}function ze(e,r){if(e&1){let t=v();i(0,"button",18),M("click",function(){h(t);let a=u().$implicit,l=u(3);return x(l.openDelete(a))}),f(1,"devmx-icon",19),o()}}function qe(e,r){if(e&1&&(i(0,"td",14)(1,"a",15),f(2,"devmx-icon",16),o(),p(3,ze,2,0,"button",17),w(4,"hasRole"),o()),e&2){let t=r.$implicit,n=u(2);c(),C("routerLink",t.id),c(2),g(Q(4,2,n,"director","manager")?3:-1)}}function Le(e,r){e&1&&f(0,"tr",20)}function Qe(e,r){e&1&&f(0,"tr",21)}function Je(e,r){if(e&1){let t=v();i(0,"table",3),S(1,4),p(2,$e,2,0,"th",5)(3,Ge,2,1,"td",6),D(),S(4,7),p(5,Be,2,0,"th",5)(6,je,2,1,"td",6),D(),S(7,8),p(8,Ie,1,0,"th",5)(9,qe,5,6,"td",6),D(),p(10,Le,1,0,"tr",9)(11,Qe,1,0,"tr",10),o(),i(12,"mat-card-actions",11)(13,"devmx-paginator",12),M("pageChange",function(a){h(t);let l=u(2);return x(l.onPageChange(a))}),o()()}if(e&2){let t=r,n=u(2);C("dataSource",t.data),c(10),C("matHeaderRowDef",n.columns),c(),C("matRowDefColumns",n.columns),c(2),C("size",10)("items",t.items)}}function Ke(e,r){if(e&1){let t=v();i(0,"mat-card",0)(1,"mat-card-header",1)(2,"devmx-search-field",2),M("searchChange",function(a){h(t);let l=u();return x(l.onSearchChange(a))}),o()(),p(3,Je,14,5),w(4,"async"),o()}if(e&2){let t,n=u();c(2),C("debounce",800),c(),g((t=F(4,2,n.userFacade.response$))?3:-1,t)}}var Re=(()=>{class e{router=s(K);route=s(U);authFacade=s(de);userFacade=s(y);dialogFacade=s(fe);columns=["displayName","name","actions"];constructor(){this.route.queryParams.pipe(A()).subscribe(this.onQueryParams)}onQueryParams=t=>{let{page:n=0,size:a=10}=t,{name:l="",username:Oe=""}=t,ke={name:l,username:Oe};this.userFacade.setParams({page:n,size:a,filter:ke}),this.userFacade.load()};openDelete(t){this.dialogFacade.confirm(`Confirme que deseja remover o usu\xE1rio de ${t.displayName}`,"Esta a\xE7\xE3o n\xE3o poder\xE1 ser desfeita").subscribe(n=>{n&&this.userFacade.delete(t.id)})}onSearchChange(t=""){this.userFacade.setFilter({displayName:t}),this.userFacade.load()}onPageChange(t){this.router.navigate([],{queryParams:t})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-users"]],decls:2,vars:3,consts:[[1,"users-card"],[1,"users-card-header"],[3,"searchChange","debounce"],["mat-table","",3,"dataSource"],["matColumnDef","displayName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],[3,"pageChange","size","items"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"routerLink"],["name","user-box"],["mat-icon-button","","color","warn"],["mat-icon-button","","color","warn",3,"click"],["name","trash"],["mat-header-row",""],["mat-row",""]],template:function(n,a){if(n&1&&(p(0,Ke,5,4,"mat-card",0),w(1,"async")),n&2){let l;g((l=F(1,1,a.authFacade.auth$))?0:-1,l)}},dependencies:[me,_e,T,re,ie,De,he,ge,we,ve,xe,ye,Me,be,Fe,Se,H,O,k,V,X,N,W,Ne,P],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .users-card[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .users-card-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}[_nghost-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{max-width:4em}"],changeDetection:0})}return e})();var Ee=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-user-roles"]],features:[L([],[{provide:j,useFactory:()=>s(j,{skipSelf:!0})}])],decls:16,vars:0,consts:[["formGroupName","roles"],["formControlName","member"],["formControlName","speaker"],["formControlName","recruiter"],["formControlName","leader"],["formControlName","staff"]],template:function(n,a){n&1&&(i(0,"div",0)(1,"section")(2,"mat-checkbox",1),m(3,"Membro"),o()(),i(4,"section")(5,"mat-checkbox",2),m(6,"Palestrante"),o()(),i(7,"section")(8,"mat-checkbox",3),m(9,"Recrutador(a)"),o()(),i(10,"section")(11,"mat-checkbox",4),m(12,"L\xEDder de grupo"),o()(),i(13,"section")(14,"mat-checkbox",5),m(15,"Organizador"),o()()())},dependencies:[E,Y,R,ne,te,pe,ue],encapsulation:2,changeDetection:0})}return e})();var G=class extends I{constructor(){super({id:new d("",{nonNullable:!0,validators:[B.required]}),roles:new I({academic:new d(!1,{nonNullable:!0}),director:new d(!1,{nonNullable:!0}),donor:new d(!1,{nonNullable:!0}),fellow:new d(!1,{nonNullable:!0}),leader:new d(!1,{nonNullable:!0}),manager:new d(!1,{nonNullable:!0}),member:new d(!1,{nonNullable:!0,validators:[B.requiredTrue]}),neighbor:new d(!1,{nonNullable:!0}),recruiter:new d(!1,{nonNullable:!0}),speaker:new d(!1,{nonNullable:!0}),staff:new d(!1,{nonNullable:!0})})})}};function Xe(e,r){if(e&1){let t=v();i(0,"form",1),M("submit",function(){h(t);let a=u();return x(a.onSubmit())}),i(1,"mat-card",2)(2,"mat-card-header",3)(3,"mat-card-title"),m(4),o(),i(5,"mat-card-subtitle"),m(6),o()(),i(7,"mat-card-content",4),f(8,"devmx-user-roles"),o(),i(9,"mat-card-actions",5)(10,"button",6),m(11,"Salvar"),o()()()()}if(e&2){let t=r,n=u();C("formGroup",n.form),c(4),b(t.displayName),c(2),b(t.name)}}var Te=(()=>{class e{route=s(U);userFacade=s(y);messageService=s(ae);form=new G;constructor(){this.route.data.pipe(A()).subscribe(({user:t})=>{t&&this.form.patchValue(t)})}onSubmit(){if(this.form.valid){let t=this.form.getRawValue();return this.userFacade.updateRoles(t),this.messageService.open({message:"Armazenando informa\xE7\xF5es"})}return this.form.markAllAsTouched()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=_({type:e,selectors:[["devmx-admin-user"]],decls:2,vars:3,consts:[[3,"formGroup"],[3,"submit","formGroup"],[1,"user-card"],[1,"user-card-header"],[1,"user-card-content"],["align","end"],["mat-button",""]],template:function(n,a){if(n&1&&(p(0,Xe,12,3,"form",0),w(1,"async")),n&2){let l;g((l=F(1,1,a.userFacade.selected$))?0:-1,l)}},dependencies:[E,Z,R,ee,Ee,T,oe,H,O,k,le,V,ce,se,N,P],styles:["[_nghost-%COMP%]{flex:1;padding:1em;display:flex;flex-direction:column}[_nghost-%COMP%]   .user-card[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .user-card-header[_ngcontent-%COMP%]{padding-bottom:.8em;border-bottom:1px dashed rgba(0,0,0,.1)}[_nghost-%COMP%]   .user-card-content[_ngcontent-%COMP%]{padding-top:.8em}"],changeDetection:0})}return e})();var Ae=e=>{let r=s(y);return r.loadOne(e.params.id),r.selected$.pipe(z(t=>!!t))};var an=[{path:"",data:{breadcrumb:"Administra\xE7\xE3o"},title:"Administrar conta",providers:Ue,component:Pe,children:[{path:"usuarios",data:{breadcrumb:"Usu\xE1rios"},title:"Contas de usu\xE1rios",component:Re},{path:"usuarios/:id",data:{breadcrumb:e=>e.user.displayName},title:"Usu\xE1rio",resolve:{user:Ae},component:Te},{path:"",pathMatch:"prefix",redirectTo:"usuarios"}]}];export{Pe as AccountFeatureAdminComponent,an as accountFeatureAdminRoutes};
